{"version":3,"file":"LazyLoadComponent-KGwVuZwr.js","sources":["../../src/components/LazyLoadComponent.vue"],"sourcesContent":["<template>\r\n  <div\r\n    ref=\"elementRef\"\r\n    :class=\"[\r\n      'lazy-wrapper',\r\n      animationType,\r\n      { 'is-visible': isVisible, 'is-hidden': !isVisible }\r\n    ]\"\r\n  >\r\n    <slot />\r\n  </div>\r\n</template>\r\n\r\n<script setup lang=\"ts\">\r\nimport { ref, onMounted, onUnmounted, defineProps } from 'vue'\r\n\r\ninterface Props {\r\n  animationType?: 'fade-up' | 'slide-left' | 'slide-right' | 'scale' | 'blur'\r\n  threshold?: number\r\n  rootMargin?: string\r\n}\r\n\r\nconst props = withDefaults(defineProps<Props>(), {\r\n  animationType: 'fade-up',\r\n  threshold: 0.99, // Yêu cầu hiển thị gần như hoàn toàn (99%) mới kích hoạt\r\n  rootMargin: '0px'\r\n})\r\n\r\nconst elementRef = ref<HTMLElement>()\r\nconst isVisible = ref(false)\r\nlet observer: IntersectionObserver | null = null\r\nlet isFullyVisible = false // Biến theo dõi trạng thái hiển thị hoàn toàn\r\n\r\nonMounted(() => {\r\n  if (elementRef.value) {\r\n    observer = new IntersectionObserver(\r\n      (entries) => {\r\n        entries.forEach((entry) => {\r\n          const ratio = entry.intersectionRatio;\r\n          const showThreshold = props.threshold;\r\n          const hideThreshold = Math.max(0, props.threshold - 0.1); // Ẩn khi thấp hơn 10%\r\n          \r\n          if (ratio >= showThreshold) {\r\n            if (!isFullyVisible) {\r\n              isFullyVisible = true;\r\n              isVisible.value = true;\r\n            }\r\n          } else if (ratio <= hideThreshold) {\r\n            // Chỉ ẩn khi tỷ lệ hiển thị thấp hơn ngưỡng ẩn\r\n            if (isFullyVisible) {\r\n              isFullyVisible = false;\r\n              isVisible.value = false;\r\n            }\r\n          }\r\n          // Vùng giữa showThreshold và hideThreshold: giữ nguyên trạng thái\r\n        })\r\n      },\r\n      {\r\n        threshold: [0, 0.25, 0.5, 0.75, 0.9, 0.99, 1.0], // Theo dõi nhiều ngưỡng để phát hiện chính xác\r\n        rootMargin: props.rootMargin\r\n      }\r\n    )\r\n\r\n    observer.observe(elementRef.value)\r\n  }\r\n})\r\n\r\nonUnmounted(() => {\r\n  if (observer && elementRef.value) {\r\n    observer.unobserve(elementRef.value)\r\n    observer.disconnect()\r\n  }\r\n})\r\n</script>\r\n\r\nexport default {\r\n  name: 'LazyLoadComponent'\r\n}\r\n\r\n<style scoped>\r\n.lazy-wrapper {\r\n  transition: all 0.4s ease-out;\r\n  transform-origin: center;\r\n  transform-style: preserve-3d;\r\n  will-change: opacity, transform;\r\n  backface-visibility: hidden;\r\n}\r\n\r\n/* Default hidden state - COMPLETELY HIDDEN */\r\n.lazy-wrapper.is-hidden {\r\n  opacity: 0;\r\n  visibility: hidden;\r\n  pointer-events: none;\r\n  transition: all 0.2s ease-out; /* Ẩn nhanh hơn hiện */\r\n}\r\n\r\n.lazy-wrapper.is-visible {\r\n  opacity: 1;\r\n  visibility: visible;\r\n  pointer-events: auto;\r\n}\r\n\r\n/* Fade up animation - LESS DRAMATIC */\r\n.fade-up.is-hidden {\r\n  transform: translateY(30px) scale(0.98);\r\n  opacity: 0;\r\n}\r\n\r\n.fade-up.is-visible {\r\n  transform: translateY(0) scale(1);\r\n  opacity: 1;\r\n  animation: smoothFadeUp 0.4s ease-out;\r\n}\r\n\r\n/* Slide left animation - LESS DRAMATIC */\r\n.slide-left.is-hidden {\r\n  transform: translateX(-30px) scale(0.98);\r\n  opacity: 0;\r\n}\r\n\r\n.slide-left.is-visible {\r\n  transform: translateX(0) scale(1);\r\n  opacity: 1;\r\n  animation: smoothSlideLeft 0.4s ease-out;\r\n}\r\n\r\n/* Slide right animation - LESS DRAMATIC */\r\n.slide-right.is-hidden {\r\n  transform: translateX(30px) scale(0.98);\r\n  opacity: 0;\r\n}\r\n\r\n.slide-right.is-visible {\r\n  transform: translateX(0) scale(1);\r\n  opacity: 1;\r\n  animation: smoothSlideRight 0.4s ease-out;\r\n}\r\n\r\n/* Scale animation - LESS DRAMATIC */\r\n.scale.is-hidden {\r\n  transform: scale(0.9);\r\n  opacity: 0;\r\n}\r\n\r\n.scale.is-visible {\r\n  transform: scale(1);\r\n  opacity: 1;\r\n  animation: smoothScaleIn 0.4s ease-out;\r\n}\r\n\r\n/* Blur animation - LESS DRAMATIC */\r\n.blur.is-hidden {\r\n  filter: blur(5px);\r\n  transform: translateY(20px) scale(0.98);\r\n  opacity: 0;\r\n}\r\n\r\n.blur.is-visible {\r\n  filter: blur(0);\r\n  transform: translateY(0) scale(1);\r\n  opacity: 1;\r\n  animation: smoothBlurIn 0.4s ease-out;\r\n}\r\n\r\n/* Smoother keyframe animations */\r\n@keyframes smoothFadeUp {\r\n  0% {\r\n    transform: translateY(30px) scale(0.98);\r\n    opacity: 0;\r\n  }\r\n  100% {\r\n    transform: translateY(0) scale(1);\r\n    opacity: 1;\r\n  }\r\n}\r\n\r\n@keyframes smoothSlideLeft {\r\n  0% {\r\n    transform: translateX(-30px) scale(0.98);\r\n    opacity: 0;\r\n  }\r\n  100% {\r\n    transform: translateX(0) scale(1);\r\n    opacity: 1;\r\n  }\r\n}\r\n\r\n@keyframes smoothSlideRight {\r\n  0% {\r\n    transform: translateX(30px) scale(0.98);\r\n    opacity: 0;\r\n  }\r\n  100% {\r\n    transform: translateX(0) scale(1);\r\n    opacity: 1;\r\n  }\r\n}\r\n\r\n@keyframes smoothScaleIn {\r\n  0% {\r\n    transform: scale(0.9);\r\n    opacity: 0;\r\n  }\r\n  100% {\r\n    transform: scale(1);\r\n    opacity: 1;\r\n  }\r\n}\r\n\r\n@keyframes smoothBlurIn {\r\n  0% {\r\n    filter: blur(5px);\r\n    transform: translateY(20px) scale(0.98);\r\n    opacity: 0;\r\n  }\r\n  100% {\r\n    filter: blur(0);\r\n    transform: translateY(0) scale(1);\r\n    opacity: 1;\r\n  }\r\n}\r\n</style>\r\n"],"names":["_createElementBlock","_normalizeClass","animationType","_renderSlot"],"mappings":";;;;;;;;;;;AAsBA,UAAM,QAAQ;AAMd,UAAM,aAAa,IAAA;AACnB,UAAM,YAAY,IAAI,KAAK;AAC3B,QAAI,WAAwC;AAC5C,QAAI,iBAAiB;AAErB,cAAU,MAAM;AACd,UAAI,WAAW,OAAO;AACpB,mBAAW,IAAI;AAAA,UACb,CAAC,YAAY;AACX,oBAAQ,QAAQ,CAAC,UAAU;AACzB,oBAAM,QAAQ,MAAM;AACpB,oBAAM,gBAAgB,MAAM;AAC5B,oBAAM,gBAAgB,KAAK,IAAI,GAAG,MAAM,YAAY,GAAG;AAEvD,kBAAI,SAAS,eAAe;AAC1B,oBAAI,CAAC,gBAAgB;AACnB,mCAAiB;AACjB,4BAAU,QAAQ;AAAA,gBACpB;AAAA,cACF,WAAW,SAAS,eAAe;AAEjC,oBAAI,gBAAgB;AAClB,mCAAiB;AACjB,4BAAU,QAAQ;AAAA,gBACpB;AAAA,cACF;AAAA,YAEF,CAAC;AAAA,UACH;AAAA,UACA;AAAA,YACE,WAAW,CAAC,GAAG,MAAM,KAAK,MAAM,KAAK,MAAM,CAAG;AAAA;AAAA,YAC9C,YAAY,MAAM;AAAA,UAAA;AAAA,QACpB;AAGF,iBAAS,QAAQ,WAAW,KAAK;AAAA,MACnC;AAAA,IACF,CAAC;AAED,gBAAY,MAAM;AAChB,UAAI,YAAY,WAAW,OAAO;AAChC,iBAAS,UAAU,WAAW,KAAK;AACnC,iBAAS,WAAA;AAAA,MACX;AAAA,IACF,CAAC;;0BAvECA,mBASM,OAAA;AAAA,iBARA;AAAA,QAAJ,KAAI;AAAA,QACH,OAAKC,eAAA;AAAA;UAAkCC,KAAAA;AAAAA,UAAsC,EAAA,cAAA,UAAA,qBAAyB,UAAA,MAAA;AAAA,QAAS;;QAMhHC,WAAQ,KAAA,QAAA,WAAA,CAAA,GAAA,QAAA,IAAA;AAAA,MAAA;;;;;"}