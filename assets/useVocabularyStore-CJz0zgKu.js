import{C as e,A as t}from"./vue-vendor-Bt65BSdi.js";const o=t([]);let a=1,r=!1;const n=t(!1),c=t([]),s=()=>{try{const e=localStorage.getItem("customTopics");if(e){const t=JSON.parse(e);Array.isArray(t)&&(c.value=t)}}catch(e){console.error("Error loading custom topics:",e),c.value=[]}},i=()=>{try{const e=localStorage.getItem("vocabularies"),t=localStorage.getItem("nextVocabId");if(e){const t=JSON.parse(e);Array.isArray(t)&&(o.value=t)}t&&(a=parseInt(t,10)||1),s(),r=!0,n.value=!0}catch(e){console.error("Error loading vocabularies from localStorage:",e),r=!0,n.value=!0}},l=()=>{try{localStorage.setItem("vocabularies",JSON.stringify(o.value)),localStorage.setItem("nextVocabId",a.toString()),localStorage.setItem("customTopics",JSON.stringify(c.value))}catch(e){console.error("Error saving data to localStorage:",e)}};function u(){const t=e(()=>o.value),u=e(()=>o.value.length),d=e(()=>{const e=["technology","business","travel","food","health","education","sports","entertainment","science","art","music","literature","politics","environment","fashion","finance"],t=c.value.map(e=>e.key),a=new Set(o.value.map(e=>e.category)),r=Array.from(a).filter(o=>!e.includes(o)&&!t.includes(o));return[...e,...t,...r].sort()}),v=e(()=>{const e={};return o.value.forEach(t=>{e[t.category]=(e[t.category]||0)+1}),e}),g=e(()=>{const e=new Set(o.value.map(e=>e.level));return Array.from(e).sort()});return{allVocabularies:t,totalCount:u,favoriteVocabularies:e(()=>o.value.filter(e=>e.favorite)),isStoreReady:n,getVocabularyById:e=>o.value.find(t=>t.id===Number(e)),getCategories:d,getLevels:g,getCategoryUsage:v,addVocabulary:e=>{const t={...e,id:a++,createdAt:e.createdAt||(new Date).toISOString()};return o.value.unshift(t),l(),t},updateVocabulary:(e,t)=>{const a=o.value.findIndex(t=>t.id===e);if(-1!==a){const e=o.value[a];return o.value[a]={...e,...t,synonyms:void 0!==t.synonyms?t.synonyms:e.synonyms,antonyms:void 0!==t.antonyms?t.antonyms:e.antonyms,updatedAt:(new Date).toISOString()},l(),!0}return!1},deleteVocabulary:e=>{const t=o.value.findIndex(t=>t.id===e);return-1!==t&&(o.value.splice(t,1),l(),!0)},clearAllVocabularies:()=>{try{return o.value=[],a=1,l(),console.log("All vocabularies cleared successfully"),!0}catch(e){return console.error("Error clearing all vocabularies:",e),!1}},importVocabularies:e=>{try{let t=0,r=0;return e.forEach(e=>{const n=o.value.findIndex(t=>t.word.toLowerCase()===e.word.toLowerCase());if(-1!==n){const t=o.value[n];o.value[n]={...t,...e,id:t.id,createdAt:t.createdAt,updatedAt:(new Date).toISOString()},r++}else{const r={...e,id:a++,createdAt:e.createdAt||(new Date).toISOString(),updatedAt:(new Date).toISOString()};o.value.unshift(r),t++}}),l(),console.log(`Import completed: ${t} new vocabularies added, ${r} existing vocabularies updated`),!0}catch(t){return console.error("Error importing vocabularies:",t),!1}},toggleFavorite:e=>{const t=o.value.findIndex(t=>t.id===e);return-1!==t&&(o.value[t]={...o.value[t],favorite:!o.value[t].favorite,updatedAt:(new Date).toISOString()},l(),!0)},filterVocabularies:t=>e(()=>o.value.filter(e=>{const o=!t.search||e.word.toLowerCase().includes(t.search.toLowerCase())||e.meaning.toLowerCase().includes(t.search.toLowerCase()),a=!t.category||e.category===t.category,r=!t.level||e.level===t.level;return o&&a&&r})),initializeStore:()=>(r||i(),n),saveToLocalStorage:l,customTopics:c,refreshCustomTopics:()=>{s()},addCustomTopic:e=>{c.value.find(t=>t.key===e.key)||(c.value.push(e),l())},updateCustomTopic:(e,t)=>{const o=c.value.findIndex(t=>t.key===e);-1!==o&&(c.value[o]=t,l())},deleteCustomTopic:e=>{const t=c.value.findIndex(t=>t.key===e);-1!==t&&(c.value.splice(t,1),l())}}}"undefined"!=typeof window&&(i(),function(){const e=["technology","business","travel","food","health","education","sports","entertainment","science","art","music","literature","politics","environment","fashion","finance"],t={technology:["Technology","Công nghệ"],business:["Business","Kinh doanh"],travel:["Travel","Du lịch"],food:["Food","Ẩm thực"],health:["Health","Sức khỏe"],education:["Education","Giáo dục"],sports:["Sports","Thể thao"],entertainment:["Entertainment","Giải trí"],science:["Science","Khoa học"],art:["Art","Nghệ thuật"],music:["Music","Âm nhạc"],literature:["Literature","Văn học"],politics:["Politics","Chính trị"],environment:["Environment","Môi trường"],fashion:["Fashion","Thời trang"],finance:["Finance","Tài chính"]};o.value.forEach(o=>{for(const a of e)if(o.category===a||t[a].includes(o.category)){o.category=a;break}}),l()}());export{u};
