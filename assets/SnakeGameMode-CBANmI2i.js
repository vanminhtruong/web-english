import{A as e,d as t,C as a,D as s,I as o,q as i,J as n,c as r,v as l,f as d,t as h,u as c,e as u,y as m,a as v,w as g,Y as x}from"./vue-vendor-Bt65BSdi.js";import{u as f}from"./ui-vendor-D-J_fEQ5.js";import{u as p}from"./voiceStore-o6lhlGgY.js";import{_ as y}from"./_plugin-vue_export-helper-BCo6x5W8.js";class b{snake=e({body:[{x:10,y:10}],direction:{x:0,y:0},currentWord:""});food=e(null);secondaryFood=e(null);score=e(0);gameOver=e(!1);gameRunning=e(!1);currentTargetWord=e("");wordsCompleted=e(0);gameSpeed=e(150);lastEatenFoodPos=e(null);lastEatenWord=e(null);doubleBaitMode=e(!1);wrongEatenCount=e(0);isLastWord=!1;words=[];vietnameseMode=!1;usedWords=new Set;audioContext=null;onMoveCallback;resetGame(){this.snake.value={body:[{x:10,y:10}],direction:{x:0,y:0},currentWord:""},this.food.value=null,this.secondaryFood.value=null,this.score.value=0,this.gameOver.value=!1,this.gameRunning.value=!1,this.currentTargetWord.value="",this.wordsCompleted.value=0,this.usedWords.clear(),this.lastEatenFoodPos.value=null,this.lastEatenWord.value=null,this.doubleBaitMode.value=!1,this.wrongEatenCount.value=0,this.isLastWord=!1}updateDirection(e){const t=this.snake.value.direction;e.x===-t.x&&e.y===-t.y||(this.snake.value.direction=e)}moveSnake(){if(!this.gameRunning.value||this.gameOver.value)return;const e=this.snake.value,t={...e.body[0]};if(t.x+=e.direction.x,t.y+=e.direction.y,t.x<0?t.x=29:t.x>=30&&(t.x=0),t.y<0?t.y=19:t.y>=20&&(t.y=0),this.checkCollision())return void this.setGameOver();e.body.unshift(t);const a=this.snake.value.body[0],s=this.food.value&&a.x===this.food.value.position.x&&a.y===this.food.value.position.y,o=this.secondaryFood.value&&a.x===this.secondaryFood.value.position.x&&a.y===this.secondaryFood.value.position.y;if(s){if(this.incrementScore(),this.wordsCompleted.value++,this.food.value&&(this.lastEatenFoodPos.value={...this.food.value.position},this.lastEatenWord.value=this.food.value.word),this.playEatFoodSound(),this.isLastWord)return void this.setGameOver();this.generateFood(this.words,this.vietnameseMode)}else o?(this.wrongEatenCount.value++,this.secondaryFood.value&&(this.lastEatenFoodPos.value={...this.secondaryFood.value.position},this.lastEatenWord.value=this.secondaryFood.value.word),e.body.pop(),this.generateFood(this.words,this.vietnameseMode)):e.body.pop();this.onMoveCallback&&this.onMoveCallback([...e.body.map(e=>({x:e.x,y:e.y}))],{x:e.direction.x,y:e.direction.y})}generateFood(e,t){if(this.words=e,this.vietnameseMode=t,0===e.length)return;const a=e.filter(e=>!this.usedWords.has(e.word));if(0===a.length)return void this.setGameOver();const s=a[Math.floor(Math.random()*a.length)];this.usedWords.add(s.word),this.currentTargetWord.value=s.word;0===e.filter(e=>!this.usedWords.has(e.word)).length?this.isLastWord=!0:this.isLastWord=!1;const o=(e=[])=>{let t;do{t={x:Math.floor(25*Math.random())+2,y:Math.floor(15*Math.random())+2}}while(this.snake.value.body.some(e=>e.x===t.x&&e.y===t.y)||e.some(e=>e.x===t.x&&e.y===t.y));return t},i=o();if(this.food.value={position:i,word:s.word,firstLetter:t&&s.meaning?s.meaning.charAt(0).toUpperCase():s.word.charAt(0).toUpperCase(),meaning:s.meaning},!this.doubleBaitMode.value)return void(this.secondaryFood.value=null);const n=e.filter(e=>e.word!==s.word);if(0===n.length)return void(this.secondaryFood.value=null);const r=n[Math.floor(Math.random()*n.length)],l=o([i]);this.secondaryFood.value={position:l,word:r.word,firstLetter:t&&r.meaning?r.meaning.charAt(0).toUpperCase():r.word.charAt(0).toUpperCase(),meaning:r.meaning}}checkCollision(){const e=this.snake.value.body[0];for(let t=1;t<this.snake.value.body.length;t++)if(e.x===this.snake.value.body[t].x&&e.y===this.snake.value.body[t].y)return!0;return!1}checkFoodCollision(){if(!this.food.value)return!1;const e=this.snake.value.body[0];return e.x===this.food.value.position.x&&e.y===this.food.value.position.y}incrementScore(){this.score.value+=10}setGameOver(){this.gameOver.value=!0,this.gameRunning.value=!1}setGameRunning(e){this.gameRunning.value=e}setDoubleBaitMode(e,t,a){this.doubleBaitMode.value=e,t&&"boolean"==typeof a?this.generateFood(t,a):this.gameRunning.value&&!this.gameOver.value&&this.generateFood(this.words,this.vietnameseMode)}setTimelineCallback(e){this.onMoveCallback=e}initializeAudioContext(){if(!this.audioContext)try{this.audioContext=new(window.AudioContext||window.webkitAudioContext)}catch(e){console.warn("Web Audio API not supported:",e)}}playEatFoodSound(){if(this.initializeAudioContext(),this.audioContext)try{const e=this.audioContext.currentTime,t=this.audioContext.createGain();t.connect(this.audioContext.destination);[261.63,329.63,392].forEach((a,s)=>{const o=this.audioContext.createOscillator(),i=this.audioContext.createGain();o.connect(i),i.connect(t),o.frequency.setValueAtTime(a,e),o.type="sine";const n=e+.08*s,r=n+.15;i.gain.setValueAtTime(0,n),i.gain.linearRampToValueAtTime(.3,n+.02),i.gain.exponentialRampToValueAtTime(.01,r),o.start(n),o.stop(r)})}catch(e){console.warn("Error playing eat food sound:",e)}}}class w{canvasWidth=e(600);canvasHeight=e(400);gridSize=e(20);canvas=null;ctx=null;particles=[];stains=[];rings=[];initialize(e){this.canvas=e,this.ctx=e.getContext("2d"),e.width=this.canvasWidth.value,e.height=this.canvasHeight.value;new ResizeObserver(()=>{this.handleResize()}).observe(e.parentElement||e)}drawFoodLabel(e,t){if(!this.ctx)return;const a=this.ctx,s=this.gridSize.value,o=e.position.x*s,i=e.position.y*s,n=(e.meaning||e.word||"").toString();if(!n)return;a.save();const r="primary"===t?"#065f46":"#7c2d12",l="primary"===t?"#10b981":"#f59e0b";a.font=`${Math.max(10,Math.floor(.6*s))}px sans-serif`;const d=a.measureText(n).width+12,h=Math.max(.7*s,16),c=o+s/2-d/2,u=i-h-6;a.beginPath(),a.moveTo(c+6,u),a.lineTo(c+d-6,u),a.quadraticCurveTo(c+d,u,c+d,u+6),a.lineTo(c+d,u+h-6),a.quadraticCurveTo(c+d,u+h,c+d-6,u+h),a.lineTo(c+6,u+h),a.quadraticCurveTo(c,u+h,c,u+h-6),a.lineTo(c,u+6),a.quadraticCurveTo(c,u,c+6,u),a.closePath(),a.fillStyle=r,a.fill(),a.strokeStyle=l,a.lineWidth=2,a.stroke(),a.fillStyle="#ffffff",a.textBaseline="middle",a.textAlign="center",a.fillText(n,c+d/2,u+h/2),a.restore()}handleResize(){if(!this.canvas)return;const e=this.canvas.parentElement;if(e){const t=e.getBoundingClientRect(),a=1.5;let s=Math.min(t.width-40,600),o=s/a;o>t.height-40&&(o=t.height-40,s=o*a),this.canvasWidth.value=s,this.canvasHeight.value=o,this.gridSize.value=s/30,this.canvas.width=s,this.canvas.height=o}}render(e){if(this.ctx){if(this.clearCanvas(),this.drawGrid(),this.updateAndDrawStains(),this.drawFood(e.food.value,"primary"),this.drawFood(e.secondaryFood?.value||null,"secondary"),e.doubleBaitMode?.value&&(e.food.value&&this.drawFoodLabel(e.food.value,"primary"),e.secondaryFood?.value&&this.drawFoodLabel(e.secondaryFood.value,"secondary")),this.drawSnake(e.snake.value),e.lastEatenFoodPos.value){const t=this.gridSize.value,a=e.lastEatenFoodPos.value.x*t+t/2,s=e.lastEatenFoodPos.value.y*t+t/2;this.spawnExplosion(a,s),this.spawnSplatStains(a,s),this.spawnShockRing(a,s),e.lastEatenFoodPos.value=null}this.updateAndDrawParticles(),this.updateAndDrawRings()}}clearCanvas(){this.ctx&&(this.ctx.fillStyle="#0a0a0a",this.ctx.fillRect(0,0,this.canvasWidth.value,this.canvasHeight.value))}drawGrid(){if(!this.ctx)return;this.ctx.strokeStyle="#0f0f0f",this.ctx.lineWidth=1;const e=this.gridSize.value;for(let t=0;t<=30;t++)this.ctx.beginPath(),this.ctx.moveTo(t*e,0),this.ctx.lineTo(t*e,this.canvasHeight.value),this.ctx.stroke();for(let t=0;t<=20;t++)this.ctx.beginPath(),this.ctx.moveTo(0,t*e),this.ctx.lineTo(this.canvasWidth.value,t*e),this.ctx.stroke()}drawSnake(e){if(!this.ctx)return;const t=this.gridSize.value;e.body.forEach((e,a)=>{this.ctx&&(this.ctx.fillStyle=0===a?"#10b981":"#059669",this.ctx.fillRect(e.x*t+1,e.y*t+1,t-2,t-2),this.ctx.strokeStyle="#047857",this.ctx.lineWidth=2,this.ctx.strokeRect(e.x*t+1,e.y*t+1,t-2,t-2))})}drawFood(e,t="primary"){if(!this.ctx||!e)return;const a=this.gridSize.value,s=e.position.x*a,o=e.position.y*a;this.ctx.fillStyle="secondary"===t?"#f59e0b":"#ef4444",this.ctx.beginPath(),this.ctx.arc(s+a/2,o+a/2,.35*a,0,2*Math.PI),this.ctx.fill(),this.ctx.fillStyle="rgba(255,255,255,0.8)",this.ctx.beginPath(),this.ctx.arc(s+a/2-3,o+a/2-3,.12*a,0,2*Math.PI),this.ctx.fill(),this.ctx.fillStyle="#111827",this.ctx.font=`${Math.floor(.6*a)}px Inter, system-ui, -apple-system, Segoe UI, Roboto`,this.ctx.textAlign="center",this.ctx.textBaseline="middle",this.ctx.fillText(e.firstLetter,s+a/2,o+a/2)}spawnExplosion(e,t){const a=["#ef4444","#dc2626","#f43f5e","#f59e0b"];for(let s=0;s<20;s++){const o=2*Math.PI*s/20,i=5+3*Math.random();this.particles.push({x:e,y:t,vx:Math.cos(o)*i,vy:Math.sin(o)*i,life:0,maxLife:6+Math.floor(5*Math.random()),radius:1.5+1.5*Math.random(),color:a[Math.floor(Math.random()*a.length)]})}this.particles.length>300&&this.particles.splice(0,this.particles.length-300)}updateAndDrawParticles(){if(!this.ctx)return;for(let e=this.particles.length-1;e>=0;e--){const t=this.particles[e];t.vx*=1,t.vy=1*t.vy+0,t.x+=t.vx,t.y+=t.vy,t.life++;const a=Math.max(0,1-t.life/t.maxLife);this.ctx.globalAlpha=a,this.ctx.fillStyle=t.color,this.ctx.beginPath(),this.ctx.arc(t.x,t.y,t.radius,0,2*Math.PI),this.ctx.fill(),this.ctx.globalAlpha=1,t.life>=t.maxLife&&this.particles.splice(e,1)}}spawnSplatStains(e,t){const a=["#b91c1c","#dc2626","#ef4444"],s=3+Math.floor(3*Math.random());for(let o=0;o<s;o++){const s=10*Math.random(),o=Math.random()*Math.PI*2,i=e+Math.cos(o)*s,n=t+Math.sin(o)*s;this.stains.push({x:i,y:n,radius:6+8*Math.random(),alpha:.6,decay:.06+.06*Math.random(),color:a[Math.floor(Math.random()*a.length)]})}this.stains.length>80&&this.stains.splice(0,this.stains.length-80)}updateAndDrawStains(){if(this.ctx)for(let e=this.stains.length-1;e>=0;e--){const t=this.stains[e];this.ctx.globalAlpha=Math.max(0,t.alpha),this.ctx.fillStyle=t.color,this.ctx.beginPath(),this.ctx.arc(t.x,t.y,t.radius,0,2*Math.PI),this.ctx.fill(),this.ctx.globalAlpha=1,t.alpha-=t.decay,t.alpha<=0&&this.stains.splice(e,1)}}spawnShockRing(e,t){this.rings.push({x:e,y:t,r:2,maxR:28,life:0,maxLife:10,color:"#ef4444"})}updateAndDrawRings(){if(this.ctx)for(let e=this.rings.length-1;e>=0;e--){const t=this.rings[e];t.life++;const a=t.life/t.maxLife;t.r=2+(t.maxR-2)*a;const s=Math.max(0,1-a);this.ctx.globalAlpha=s,this.ctx.strokeStyle=t.color,this.ctx.lineWidth=2,this.ctx.beginPath(),this.ctx.arc(t.x,t.y,t.r,0,2*Math.PI),this.ctx.stroke(),this.ctx.globalAlpha=1,t.life>=t.maxLife&&this.rings.splice(e,1)}}}class M{gameLoopId=e(null);lastTimestamp=0;accumulatorMs=0;startGameLoop(e,t){if(this.gameLoopId.value)return;this.lastTimestamp=performance.now(),this.accumulatorMs=0;const a=s=>{const o=s-this.lastTimestamp;for(this.lastTimestamp=s,this.accumulatorMs+=o;e.gameRunning.value&&!e.gameOver.value&&this.accumulatorMs>=e.gameSpeed.value;)e.moveSnake(),this.accumulatorMs-=e.gameSpeed.value;t.render(e),e.gameRunning.value&&!e.gameOver.value?this.gameLoopId.value=requestAnimationFrame(a):this.gameLoopId.value=null};this.gameLoopId.value=requestAnimationFrame(a)}stopGameLoop(){this.gameLoopId.value&&(cancelAnimationFrame(this.gameLoopId.value),this.gameLoopId.value=null)}}class k{stateManager;canvasRenderer;gameEngine;constructor(){this.stateManager=new b,this.canvasRenderer=new w,this.gameEngine=new M}initialize(e,t,a=!1){this.canvasRenderer.initialize(e),this.stateManager.resetGame(),this.stateManager.generateFood(t,a),this.canvasRenderer.render(this.stateManager)}startGame(){this.stateManager.gameRunning.value||(this.stateManager.setGameRunning(!0),this.stateManager.updateDirection({x:1,y:0}),this.gameEngine.startGameLoop(this.stateManager,this.canvasRenderer))}stopGame(){this.stateManager.setGameRunning(!1),this.gameEngine.stopGameLoop()}handleKeyPress(e){if(!this.stateManager.gameRunning.value||this.stateManager.gameOver.value)return;const t={ArrowUp:{x:0,y:-1},ArrowDown:{x:0,y:1},ArrowLeft:{x:-1,y:0},ArrowRight:{x:1,y:0},w:{x:0,y:-1},s:{x:0,y:1},a:{x:-1,y:0},d:{x:1,y:0}}[e.key];t&&(e.preventDefault(),this.stateManager.updateDirection(t))}updateVietnameseMode(e){this.stateManager.gameRunning.value&&this.stateManager.food.value}cleanup(){this.stopGame()}}const C={class:"snake-game h-full min-h-[600px] sm:min-h-[500px] md:min-h-0 flex flex-col"},S={class:"p-4 sm:p-6 md:p-8 bg-gradient-to-r from-green-600 to-emerald-600 dark:from-green-800 dark:to-emerald-800 text-white"},T={class:"flex justify-between items-center"},A={class:"text-lg sm:text-xl md:text-2xl font-bold"},F={class:"text-sm sm:text-base opacity-90"},G={class:"text-right"},R={class:"text-2xl sm:text-3xl font-bold"},E={class:"text-xs sm:text-sm opacity-90"},L={class:"flex-1 min-h-[450px] sm:min-h-[350px] md:min-h-0 relative bg-gradient-to-b from-gray-100 to-gray-200 dark:from-[#0a0a0a] dark:to-[#0f0f0f] overflow-hidden"},W={class:"text-center"},B={class:"text-sm sm:text-base font-bold text-gray-800 dark:text-white"},P={key:0,class:"text-xs sm:text-sm text-gray-700 dark:text-white/80"},D={class:"text-[11px] sm:text-xs text-gray-600 dark:text-white/70"},z={key:1,class:"absolute top-4 left-4 bg-white/90 dark:bg-[#0a0a0a]/90 rounded-lg p-3 backdrop-blur-sm"},I={class:"text-sm text-gray-700 dark:text-white"},O={class:"font-semibold mb-1"},j={class:"text-xs space-y-1"},H={class:"absolute top-4 right-4 bg-white/90 dark:bg-[#0a0a0a]/90 rounded-lg p-3 backdrop-blur-sm"},U={class:"text-center text-sm"},V={class:"text-xs text-gray-600 dark:text-white/70"},$={class:"text-lg font-bold text-green-600 dark:text-green-400"},_={key:2,class:"absolute inset-0 flex items-center justify-center"},q={class:"lg:hidden absolute bottom-3 left-0 right-0 flex items-center justify-center select-none","aria-hidden":"false"},K={class:"inline-flex flex-col items-center gap-2 bg-white/90 dark:bg-[#0a0a0a]/90 border border-gray-200 dark:border-[#0f0f0f] rounded-xl p-3 shadow-lg"},J=["aria-label"],N={class:"flex items-center gap-2"},X=["aria-label"],Y=["aria-label"],Q=["aria-label"],Z={key:0,class:"absolute inset-0 bg-black/70 backdrop-blur-sm flex items-center justify-center p-4"},ee={class:"bg-white dark:bg-[#0a0a0a] rounded-2xl p-6 sm:p-8 max-w-md w-full text-center shadow-2xl border border-gray-200 dark:border-[#0f0f0f]"},te={class:"text-xl sm:text-2xl font-bold mb-2 text-gray-800 dark:text-white"},ae={class:"text-gray-600 dark:text-white/70 mb-4"},se={class:"text-sm text-gray-500 dark:text-white/60 mb-6"},oe={class:"flex gap-3 justify-center"},ie=y(t({__name:"SnakeGameMode",props:{words:{},vietnameseMode:{type:Boolean},doubleBaitMode:{type:Boolean},recordTimeline:{type:Boolean}},emits:["game-complete","correct-food-eaten","wrong-food-eaten"],setup(t,{emit:y}){const b=t,{t:w}=f(),M=y,ie=new k,ne=e();a(()=>ie.canvasRenderer.canvasWidth.value),a(()=>ie.canvasRenderer.canvasHeight.value);const re=a(()=>ie.canvasRenderer.gridSize.value),le=a(()=>ie.stateManager.score.value),de=a(()=>ie.stateManager.wordsCompleted.value),he=a(()=>ie.stateManager.gameOver.value),ce=a(()=>ie.stateManager.gameRunning.value),ue=a(()=>ie.stateManager.currentTargetWord.value),me=a(()=>ie.stateManager.snake.value.body[0]),ve=e([]),ge=(e,t)=>{b.recordTimeline&&ve.value.push({body:[...e],direction:{...t}})};s(()=>b.recordTimeline,e=>{e?(ie.stateManager.setTimelineCallback(ge),ve.value=[]):(ie.stateManager.setTimelineCallback(void 0),ve.value=[])});const xe=a(()=>{if(!me.value||!ce.value)return{display:"none"};return{left:`${me.value.x*re.value+re.value/2}px`,top:`${me.value.y*re.value-40}px`,transform:"translateX(-50%)",zIndex:"10"}}),fe=a(()=>{const e=ue.value;if(!e)return"";const t=b.words.find(t=>t.word===e);return t?.pronunciation||""}),pe=a(()=>{const e=(fe.value||"").trim();if(!e)return"";const t=e.replace(/^\s*[\/\[\]()]+|[\/\[\]()]+\s*$/g,"");return t?`/${t}/`:""}),ye=e(0),be=s(()=>ie.stateManager.wordsCompleted.value,(e,t)=>{if("number"==typeof t&&e>t){const e=ie.stateManager.lastEatenWord?.value||"",t=ie.stateManager.lastEatenFoodPos?.value||{x:0,y:0},a=b.words.find(t=>t.word===e),s={word:e,meaningShort:a?.meaning||e,position:t,snakeLength:ie.stateManager.snake.value.body.length,gameScore:ie.stateManager.score.value,wordsCompleted:ie.stateManager.wordsCompleted.value,wrongEatenCount:ie.stateManager.wrongEatenCount?.value??0,snakeBody:[...ie.stateManager.snake.value.body],direction:{...ie.stateManager.snake.value.direction},timelineFrames:b.recordTimeline&&ve.value.length?[...ve.value.map(e=>({body:e.body.map(e=>({x:e.x,y:e.y})),direction:{x:e.direction.x,y:e.direction.y}}))]:void 0};if(console.log("[DEBUG] Snake correct food details:",s),console.log("[DEBUG] Snake body:",s.snakeBody),console.log("[DEBUG] Snake direction:",s.direction),M("correct-food-eaten",s),b.recordTimeline&&(ve.value=[]),e){const{playAudio:t}=p();t(e).catch(()=>{})}}ye.value=e}),we=e(0),Me=s(()=>ie.stateManager.wrongEatenCount?.value,(e,t)=>{if("number"==typeof e&&"number"==typeof t&&e>t){const t=ie.stateManager.lastEatenWord?.value||"",a=ie.stateManager.lastEatenFoodPos?.value||{x:0,y:0},s=b.words.find(e=>e.word===t),o={word:t,meaningShort:s?.meaning||t,position:a,snakeLength:ie.stateManager.snake.value.body.length,gameScore:ie.stateManager.score.value,wordsCompleted:ie.stateManager.wordsCompleted.value,wrongEatenCount:e,snakeBody:[...ie.stateManager.snake.value.body],direction:{...ie.stateManager.snake.value.direction},timelineFrames:b.recordTimeline&&ve.value.length?[...ve.value.map(e=>({body:e.body.map(e=>({x:e.x,y:e.y})),direction:{x:e.direction.x,y:e.direction.y}}))]:void 0};if(M("wrong-food-eaten",o),b.recordTimeline&&(ve.value=[]),t){const{playAudio:e}=p();e(t).catch(()=>{})}}"number"==typeof e&&(we.value=e)}),ke=s(()=>ie.stateManager.gameOver.value,e=>{e&&M("game-complete")});s(()=>b.vietnameseMode,e=>{ie.updateVietnameseMode(e??!1),ie.stateManager.gameRunning.value&&ie.stateManager.generateFood(b.words,e??!1)}),s(()=>b.doubleBaitMode,e=>{ie.stateManager.setDoubleBaitMode&&ie.stateManager.setDoubleBaitMode(!!e,b.words,b.vietnameseMode??!1)});const Ce=()=>{ie.startGame(),ne.value&&ne.value.focus()},Se=()=>{ie.stopGame(),ie.stateManager.resetGame(),ne.value&&(ie.initialize(ne.value,b.words,b.vietnameseMode),ie.stateManager.setDoubleBaitMode&&ie.stateManager.setDoubleBaitMode(!!b.doubleBaitMode,b.words,b.vietnameseMode??!1),b.recordTimeline?ie.stateManager.setTimelineCallback(ge):ie.stateManager.setTimelineCallback(void 0))},Te=e=>{ie.handleKeyPress(e)},Ae=(e,t)=>{if(he.value)return;!ce.value&&ie.startGame(),ie.stateManager.updateDirection({x:e,y:t})};return o(async()=>{await i(),ne.value&&(ie.initialize(ne.value,b.words,b.vietnameseMode),ie.stateManager.setDoubleBaitMode&&ie.stateManager.setDoubleBaitMode(!!b.doubleBaitMode,b.words,b.vietnameseMode??!1),b.recordTimeline?ie.stateManager.setTimelineCallback(ge):ie.stateManager.setTimelineCallback(void 0),document.addEventListener("keydown",Te))}),n(()=>{ke(),be(),Me(),document.removeEventListener("keydown",Te),ie.cleanup()}),(e,t)=>(l(),r("div",C,[d("div",S,[d("div",T,[d("div",null,[d("h2",A,h(c(w)("flashcard.snakeGame.title","Snake Hunt")),1),d("p",F,h(c(w)("flashcard.snakeGame.instruction","Guide the snake to catch vocabulary letters!")),1)]),d("div",G,[d("div",R,h(le.value),1),d("div",E,h(c(w)("flashcard.snakeGame.score","Score")),1)])])]),d("div",L,[d("canvas",{ref_key:"gameCanvas",ref:ne,class:"w-full h-full border-2 border-gray-300 dark:border-[#0f0f0f]",tabindex:"0",onKeydown:Te},null,544),ue.value&&ce.value&&!he.value?(l(),r("div",{key:0,class:"absolute bg-white dark:bg-[#0a0a0a] rounded-lg px-3 py-2 shadow-lg border-2 border-green-500 pointer-events-none",style:v(xe.value)},[d("div",W,[d("div",B,h(ue.value),1),pe.value?(l(),r("div",P,h(pe.value),1)):u("",!0),d("div",D,h(c(w)("flashcard.snakeGame.target","Target")),1)])],4)):u("",!0),ce.value||he.value?u("",!0):(l(),r("div",z,[d("div",I,[d("div",O,h(c(w)("flashcard.snakeGame.controls","Controls"))+":",1),d("div",j,[d("div",null,h(c(w)("flashcard.snakeGame.arrowKeys","Arrow Keys / WASD")),1),d("div",null,h(c(w)("flashcard.snakeGame.clickToStart","Click START to begin")),1)])])])),d("div",H,[d("div",U,[d("div",V,h(c(w)("flashcard.snakeGame.completed","Completed")),1),d("div",$,h(de.value),1)])]),ce.value||he.value?u("",!0):(l(),r("div",_,[d("button",{onClick:Ce,class:"px-8 py-4 bg-gradient-to-r from-green-500 to-emerald-500 hover:from-green-600 hover:to-emerald-600 text-white rounded-2xl font-bold text-lg transform hover:scale-105 transition-all duration-200 shadow-2xl"},h(c(w)("flashcard.snakeGame.start","START HUNT")),1)])),d("div",q,[d("div",K,[d("button",{type:"button","aria-label":c(w)("flashcard.snakeGame.up","Up"),class:"w-12 h-12 sm:w-14 sm:h-14 md:w-16 md:h-16 rounded-lg flex items-center justify-center bg-emerald-500 hover:bg-emerald-600 text-white shadow active:scale-95 transition",onClick:t[0]||(t[0]=e=>Ae(0,-1))},t[5]||(t[5]=[d("svg",{class:"w-6 h-6 sm:w-7 sm:h-7",viewBox:"0 0 20 20",fill:"currentColor"},[d("path",{"fill-rule":"evenodd",d:"M10 4a.75.75 0 01.53.22l5 5a.75.75 0 11-1.06 1.06L10.75 6.56V16a.75.75 0 01-1.5 0V6.56L5.53 10.28a.75.75 0 01-1.06-1.06l5-5A.75.75 0 0110 4z","clip-rule":"evenodd"})],-1)]),8,J),d("div",N,[d("button",{type:"button","aria-label":c(w)("flashcard.snakeGame.left","Left"),class:"w-12 h-12 sm:w-14 sm:h-14 md:w-16 md:h-16 rounded-lg flex items-center justify-center bg-emerald-500 hover:bg-emerald-600 text-white shadow active:scale-95 transition",onClick:t[1]||(t[1]=e=>Ae(-1,0))},t[6]||(t[6]=[d("svg",{class:"w-6 h-6 sm:w-7 sm:h-7",viewBox:"0 0 20 20",fill:"currentColor"},[d("path",{"fill-rule":"evenodd",d:"M4 10a.75.75 0 01.22-.53l5-5a.75.75 0 111.06 1.06L6.56 9.25H16a.75.75 0 010 1.5H6.56l3.72 3.72a.75.75 0 11-1.06 1.06l-5-5A.75.75 0 014 10z","clip-rule":"evenodd"})],-1)]),8,X),d("button",{type:"button","aria-label":c(w)("flashcard.snakeGame.down","Down"),class:"w-12 h-12 sm:w-14 sm:h-14 md:w-16 md:h-16 rounded-lg flex items-center justify-center bg-emerald-500 hover:bg-emerald-600 text-white shadow active:scale-95 transition",onClick:t[2]||(t[2]=e=>Ae(0,1))},t[7]||(t[7]=[d("svg",{class:"w-6 h-6 sm:w-7 sm:h-7",viewBox:"0 0 20 20",fill:"currentColor"},[d("path",{"fill-rule":"evenodd",d:"M10 16a.75.75 0 01-.53-.22l-5-5a.75.75 0 111.06-1.06l3.72 3.72V4a.75.75 0 011.5 0v9.44l3.72-3.72a.75.75 0 111.06 1.06l-5 5A.75.75 0 0110 16z","clip-rule":"evenodd"})],-1)]),8,Y),d("button",{type:"button","aria-label":c(w)("flashcard.snakeGame.right","Right"),class:"w-12 h-12 sm:w-14 sm:h-14 md:w-16 md:h-16 rounded-lg flex items-center justify-center bg-emerald-500 hover:bg-emerald-600 text-white shadow active:scale-95 transition",onClick:t[3]||(t[3]=e=>Ae(1,0))},t[8]||(t[8]=[d("svg",{class:"w-6 h-6 sm:w-7 sm:h-7",viewBox:"0 0 20 20",fill:"currentColor"},[d("path",{"fill-rule":"evenodd",d:"M16 10a.75.75 0 01-.22.53l-5 5a.75.75 0 11-1.06-1.06l3.72-3.72H4a.75.75 0 010-1.5h9.44L9.72 5.53a.75.75 0 111.06-1.06l5 5c.14.14.22.33.22.53z","clip-rule":"evenodd"})],-1)]),8,Q)])])]),m(x,{name:"modal",appear:""},{default:g(()=>[he.value?(l(),r("div",Z,[d("div",ee,[t[9]||(t[9]=d("div",{class:"w-16 h-16 sm:w-20 sm:h-20 mx-auto mb-4 bg-gradient-to-r from-green-400 to-emerald-500 rounded-full flex items-center justify-center animate-pulse"},[d("svg",{class:"w-8 h-8 sm:w-10 sm:h-10 text-white",fill:"currentColor",viewBox:"0 0 20 20"},[d("path",{"fill-rule":"evenodd",d:"M16.707 5.293a1 1 0 010 1.414l-8 8a1 1 0 01-1.414 0l-4-4a1 1 0 011.414-1.414L8 12.586l7.293-7.293a1 1 0 011.414 0z","clip-rule":"evenodd"})])],-1)),d("h3",te,h(c(w)("flashcard.snakeGame.gameComplete","Hunt Complete!")),1),d("p",ae,h(c(w)("flashcard.snakeGame.finalScore",{score:le.value},`Final Score: ${le.value}`)),1),d("p",se,h(c(w)("flashcard.snakeGame.wordsHunted",{count:de.value},`Words hunted: ${de.value}`)),1),d("div",oe,[d("button",{onClick:Se,class:"px-6 py-2 bg-gradient-to-r from-green-500 to-emerald-500 hover:from-green-600 hover:to-emerald-600 text-white rounded-lg font-medium transform hover:scale-105 transition-all duration-200"},h(c(w)("flashcard.snakeGame.playAgain","Hunt Again")),1),d("button",{onClick:t[4]||(t[4]=t=>e.$emit("game-complete")),class:"px-6 py-2 bg-gray-500 hover:bg-gray-600 dark:bg-[#0f0f0f] dark:hover:bg-[#1a1a1a] text-white rounded-lg font-medium transform hover:scale-105 transition-all duration-200"},h(c(w)("common.finish","Finish")),1)])])])):u("",!0)]),_:1})])]))}}),[["__scopeId","data-v-43ecfa73"]]);export{ie as default};
