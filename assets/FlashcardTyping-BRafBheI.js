const __vite__mapDeps=(i,m=__vite__mapDeps,d=(m.f||(m.f=["/web-english/assets/FireworkSoundEffect-DS0v3Px0.js","/web-english/assets/utils-vendor-DwIcHP6x.js","/web-english/assets/vue-vendor-Bt65BSdi.js","/web-english/assets/_plugin-vue_export-helper-BCo6x5W8.js","/web-english/assets/FireworkSoundEffect-CV0ieEWB.css"])))=>i.map(i=>d[i]);
import{_ as e}from"./index-DmJNupMF.js";import{d as t,A as r,D as a,I as s,c as n,v as l,f as d,y as o,t as i,u as c,e as g,W as p,F as u,j as y,n as x,g as m,N as w,i as b,q as f}from"./vue-vendor-Bt65BSdi.js";import{u as k}from"./ui-vendor-D-J_fEQ5.js";import{a as v}from"./topicUtils-CuplmVBM.js";const h={class:"h-full flex flex-col"},C={class:"text-center mb-6"},A={class:"px-4 py-2 bg-purple-100 dark:bg-gray-800 text-purple-800 dark:text-purple-300 text-sm font-medium rounded-full"},z={class:"text-center mb-8"},L={class:"text-2xl sm:text-3xl md:text-4xl font-bold text-gray-900 dark:text-white mb-4"},Q={key:0,class:"text-base sm:text-lg md:text-xl text-gray-600 dark:text-gray-300"},E={key:1,class:"text-base sm:text-lg md:text-xl text-gray-600 dark:text-gray-300"},_={class:"flex-1 flex flex-col justify-center"},j={key:0,class:"max-w-lg mx-auto w-full"},B={class:"relative"},T=["value","disabled","placeholder"],S={key:0,class:"absolute right-3 top-1/2 transform -translate-y-1/2"},D={key:0,class:"text-green-500"},F={key:1,class:"text-red-500"},I={key:0,class:"mt-4 text-center"},q={class:"text-gray-600 dark:text-gray-400 text-sm"},O={class:"text-lg sm:text-xl md:text-2xl font-bold text-green-600 dark:text-green-400"},K={key:1,class:"w-full px-2 sm:px-3 md:px-0"},M={class:"grid grid-cols-1 sm:grid-cols-2 gap-1.5 sm:gap-2 justify-items-stretch w-full"},N=["onClick","disabled"],W={class:"inline-flex items-center justify-center w-5 h-5 rounded-full text-xs font-semibold bg-gray-200 text-gray-700 dark:bg-white/10 dark:text-white/80 shrink-0"},P={class:"truncate overflow-hidden min-w-0"},R={key:0,class:"mt-3 sm:mt-4 text-center px-2"},U={key:0,class:"text-green-600 dark:text-green-400 font-medium text-sm sm:text-base"},V={key:1,class:"text-red-600 dark:text-red-400 font-medium text-sm sm:text-base break-words"},G={class:"font-bold"},H={class:"text-center mt-6"},J=["disabled"],X=t({__name:"FlashcardTyping",props:{currentCard:{},typingAnswer:{},typingAnswered:{type:Boolean},typingCorrect:{type:Boolean},typingQuizEnabled:{type:Boolean},typingQuizOptions:{},typingQuizSelected:{},typingQuizAnswered:{type:Boolean}},emits:["update:typingAnswer","check-answer","select-typing-quiz-answer"],setup(t,{emit:X}){const Y=w(()=>e(()=>import("./FireworkSoundEffect-DS0v3Px0.js"),__vite__mapDeps([0,1,2,3,4]),import.meta.url)),{t:Z}=k(),$=r(!1),ee=r(!1),te=r(!1),re=r(),ae=t,se=X,ne=e=>{const t=e.target,r=t.value.replace(/[ưừứửữự]/g,"w").replace(/[ƯỪỨỬỮỰ]/g,"W").normalize("NFD").replace(/[\u0300-\u036f]/g,"").replace(/đ/g,"d").replace(/Đ/g,"D");r!==t.value&&(t.value=r),se("update:typingAnswer",r)},le=()=>{ae.typingAnswered||(se("check-answer"),setTimeout(()=>{te.value=ae.typingAnswer.toLowerCase().trim()===ae.currentCard.word.toLowerCase(),$.value=!0,ee.value=!0},100))},de=()=>{$.value=!1,ee.value=!1};a(()=>ae.typingAnswered,e=>{e&&!$.value&&("boolean"==typeof ae.typingCorrect?te.value=ae.typingCorrect:te.value=ae.typingAnswer.toLowerCase().trim()===ae.currentCard.word.toLowerCase(),setTimeout(()=>{$.value=!0,ee.value=!0},50))});const oe=e=>ae.typingQuizSelected===e,ie=e=>e.trim().toLowerCase()===ae.currentCard.word.trim().toLowerCase(),ce=r(null),ge=()=>{ae.typingQuizEnabled||ae.typingAnswered||document.activeElement!==ce.value&&(async()=>{await f();try{ce.value?.focus({preventScroll:!0})}catch{ce.value?.focus()}})()},pe=()=>{ge()};return s(()=>{ge()}),a(()=>ae.typingQuizEnabled,e=>{e||ge()}),a(()=>ae.typingAnswered,e=>{e||ge()}),a(()=>ae.currentCard,()=>{ge()}),(e,t)=>{return l(),n("div",{class:"bg-white dark:bg-[#0a0a0a] rounded-xl shadow-2xl border border-gray-200 dark:border-gray-800 p-8 h-96 select-none",onCopy:t[0]||(t[0]=b(()=>{},["prevent"])),onCut:t[1]||(t[1]=b(()=>{},["prevent"])),onContextmenu:t[2]||(t[2]=b(()=>{},["prevent"]))},[d("div",h,[d("div",C,[d("span",A,i(c(v)(e.currentCard.category)),1)]),d("div",z,[d("h2",L,i((r=e.currentCard.meaning,r.split(" - ")[0].trim())),1),e.typingQuizEnabled?(l(),n("p",E,i(c(Z)("flashcard.typing.instructionQuiz","Choose the correct English word:")),1)):(l(),n("p",Q,i(c(Z)("flashcard.typing.instruction","Type the corresponding English word:")),1))]),d("div",_,[e.typingQuizEnabled?(l(),n("div",K,[d("div",M,[(l(!0),n(u,null,y(e.typingQuizOptions,(t,r)=>(l(),n("button",{key:r,onClick:e=>(e=>{ae.typingQuizAnswered||se("select-typing-quiz-answer",e)})(t),disabled:e.typingQuizAnswered,translate:"no",class:x(["notranslate px-3 py-1.5 sm:py-2 rounded-md border text-[13px] sm:text-sm transition-all duration-150 disabled:opacity-70 disabled:cursor-not-allowed text-left flex items-center gap-2 w-full min-w-0",[e.typingQuizAnswered?ie(t)?"bg-green-100 dark:bg-green-900 text-green-800 dark:text-green-300 border-green-300 dark:border-green-700":oe(t)?"bg-red-100 dark:bg-red-900 text-red-800 dark:text-red-300 border-red-300 dark:border-red-700":"bg-white dark:bg-gray-custom text-gray-900 dark:text-white border-gray-300 dark:border-gray-custom/60":"bg-white dark:bg-gray-custom text-gray-900 dark:text-white border-gray-300 dark:border-gray-custom/60 hover:shadow-sm hover:scale-[1.01] dark:hover:bg-white/5"]])},[d("span",W,i(String.fromCharCode(65+r)),1),d("span",P,i(t),1)],10,N))),128))]),e.typingAnswered?(l(),n("div",R,[e.typingCorrect?(l(),n("p",U,i(c(Z)("flashcard.typing.correct","✓ Correct!")),1)):(l(),n("p",V,[m(i(c(Z)("flashcard.typing.incorrect","✗ Correct answer:"))+" ",1),d("span",G,i(e.currentCard.word),1)]))])):g("",!0)])):(l(),n("div",j,[d("div",B,[d("input",{ref_key:"typingInput",ref:ce,value:e.typingAnswer,onInput:ne,onKeyup:p(le,["enter"]),type:"text",disabled:e.typingAnswered,class:"w-full p-3 text-center text-xl sm:text-2xl md:text-3xl border-2 border-gray-300 dark:border-gray-600 rounded-xl bg-white dark:bg-gray-800 text-gray-900 dark:text-white focus:outline-none focus:ring-4 focus:ring-purple-500/20 focus:border-purple-500 transition-all duration-200 disabled:bg-gray-100 dark:disabled:bg-gray-700 select-text",placeholder:c(Z)("flashcard.typing.placeholder","Type the word..."),inputmode:"text",autocomplete:"off",autocapitalize:"none",spellcheck:"false",onBlur:pe},null,40,T),e.typingAnswered?(l(),n("div",S,[e.typingAnswer.toLowerCase().trim()===e.currentCard.word.toLowerCase()?(l(),n("span",D,t[3]||(t[3]=[d("svg",{class:"w-8 h-8",fill:"currentColor",viewBox:"0 0 20 20"},[d("path",{"fill-rule":"evenodd",d:"M16.707 5.293a1 1 0 010 1.414l-8 8a1 1 0 01-1.414 0l-4-4a1 1 0 011.414-1.414L8 12.586l7.293-7.293a1 1 0 011.414 0z","clip-rule":"evenodd"})],-1)]))):(l(),n("span",F,t[4]||(t[4]=[d("svg",{class:"w-8 h-8",fill:"currentColor",viewBox:"0 0 20 20"},[d("path",{"fill-rule":"evenodd",d:"M4.293 4.293a1 1 0 011.414 0L10 8.586l4.293-4.293a1 1 0 111.414 1.414L11.414 10l4.293 4.293a1 1 0 01-1.414 1.414L10 11.414l-4.293 4.293a1 1 0 01-1.414-1.414L8.586 10 4.293 5.707a1 1 0 010-1.414z","clip-rule":"evenodd"})],-1)])))])):g("",!0)]),e.typingAnswered&&e.typingAnswer.toLowerCase().trim()!==e.currentCard.word.toLowerCase()?(l(),n("div",I,[d("p",q,i(c(Z)("flashcard.typing.correctAnswer","Correct answer:")),1),d("p",O,i(e.currentCard.word),1)])):g("",!0)]))]),d("div",H,[e.typingAnswered||e.typingQuizEnabled?g("",!0):(l(),n("button",{key:0,onClick:le,disabled:!e.typingAnswer.trim(),class:"bg-purple-500 hover:bg-purple-600 disabled:bg-gray-300 dark:disabled:bg-gray-700 text-white px-8 py-3 rounded-full font-medium transition-colors"},i(c(Z)("common.check","Check")),9,J))])]),o(c(Y),{ref_key:"fireworkEffect",ref:re,"trigger-firework":$.value,"trigger-sound":ee.value,"is-correct":te.value,onEffectComplete:de},null,8,["trigger-firework","trigger-sound","is-correct"])],32);var r}}});export{X as default};
