const __vite__mapDeps=(i,m=__vite__mapDeps,d=(m.f||(m.f=["/web-english/assets/VoiceSettingsModal-CIy0Zql6.js","/web-english/assets/vue-vendor-Bt65BSdi.js","/web-english/assets/ui-vendor-D-J_fEQ5.js","/web-english/assets/_plugin-vue_export-helper-BCo6x5W8.js","/web-english/assets/VoiceSettingsModal-CB3X2LQF.css"])))=>i.map(i=>d[i]);
import{_ as e}from"./index-DmJNupMF.js";import{d as t,A as l,C as a,I as o,J as s,D as n,c as r,v as i,f as d,b as c,e as u,t as v,u as g,n as m,i as p,a as x,F as f,j as w,a3 as y,N as h}from"./vue-vendor-Bt65BSdi.js";import{u as k}from"./ui-vendor-D-J_fEQ5.js";import{u as b}from"./voiceStore-o6lhlGgY.js";const C={class:"flex flex-col sm:flex-row sm:items-center space-y-2 sm:space-y-0 sm:space-x-3 md:space-x-4 lg:space-x-4"},V={class:"text-sm md:text-sm lg:text-base font-medium text-gray-700 dark:text-gray-300"},z={class:"flex items-center space-x-2"},M={class:"text-sm md:text-base lg:text-lg"},j={class:"truncate"},_={class:"overflow-y-auto max-h-60"},B=["onClick"],T={class:"flex items-center space-x-2 min-w-0 flex-1"},E={class:"text-sm md:text-base lg:text-lg flex-shrink-0"},L={class:"truncate flex-1"},S={class:"flex items-center space-x-1 flex-shrink-0"},A={key:0,class:"inline-block w-4 h-4 md:w-4 md:h-4 lg:w-5 lg:h-5 text-blue-600 dark:text-blue-400 flex-shrink-0",fill:"currentColor",viewBox:"0 0 20 20"},$=["onClick"],I={key:0,class:"absolute z-[9999] bottom-full left-1/2 transform -translate-x-1/2 mb-2 px-3 py-2 bg-gray-900 dark:bg-gray-700 text-white text-xs rounded-lg shadow-lg whitespace-nowrap"},F=["disabled"],R={key:0,class:"w-4 h-4 md:w-4 md:h-4 lg:w-5 lg:h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},H={key:1,class:"w-4 h-4 md:w-4 md:h-4 lg:w-5 lg:h-5 animate-spin",fill:"none",viewBox:"0 0 24 24"},W=t({__name:"VoiceSelector",props:{showVoiceInfo:{type:Boolean,default:!0}},setup(t){const W=h(()=>e(()=>import("./VoiceSettingsModal-CIy0Zql6.js"),__vite__mapDeps([0,1,2,3,4]),import.meta.url)),{t:D}=k(),{voiceSettings:J,currentVoiceType:O,setVoiceType:q,updateVoiceSettings:K,resetVoiceSettings:N,playAudio:P,getVoiceTypeOptions:G,getCurrentVoiceInfo:Q,loadVoices:U}=b(),X=l(!1),Y=l(!1),Z=l(!1),ee=l(null),te=l(null),le=l(null),ae=l(!1),oe=l(null),se=a(()=>G()),ne=a(()=>Q()),re=a(()=>se.value.find(e=>e.value===O.value)),ie=a(()=>{if(!Z.value||!ee.value)return{display:"none"};const e=ee.value.getBoundingClientRect(),t=window.innerWidth,l=e.width;let a=e.left;return a+l>t&&(a=t-l-8),a<8&&(a=8),{position:"fixed",top:`${e.bottom+4}px`,left:`${a}px`,width:`${e.width}px`,maxWidth:t-16+"px",zIndex:"9999"}}),de=e=>{var t;t=e.value,q(t),Z.value=!1},ce=async()=>{if(!X.value){X.value=!0;try{let e=D("voice.testText","Hello, this is a test of the selected voice.");"korean-female"!==O.value&&"korean-male"!==O.value||(e=D("voice.testTextKorean","안녕하세요! 이것은 음성 테스트입니다.")),console.log("Testing voice:",O.value,"with text:",e),await P(e)}catch(e){console.error("Error testing voice:",e)}finally{X.value=!1}}},ue=e=>{K(e.voiceType,e.settings),ae.value=!1},ve=e=>{N(e);const t=se.value.find(t=>t.value===e);t&&(oe.value=t)},ge=e=>{if(Z.value){const t=e.target;ee.value&&!ee.value.contains(t)&&te.value&&!te.value.contains(t)&&(Z.value=!1)}},me=()=>{if(Z.value&&ee.value){const e=ee.value.getBoundingClientRect(),t=te.value;t&&(t.style.top=`${e.bottom+4}px`,t.style.left=`${e.left}px`,t.style.minWidth=`${e.width}px`)}};let pe=null;const xe=()=>{Z.value&&(pe&&cancelAnimationFrame(pe),pe=requestAnimationFrame(me))},fe=()=>{Z.value&&(Z.value=!1)};return o(()=>{U(),document.addEventListener("click",ge),window.addEventListener("scroll",xe,!0),window.addEventListener("resize",fe)}),s(()=>{document.removeEventListener("click",ge),window.removeEventListener("scroll",xe,!0),window.removeEventListener("resize",fe),pe&&cancelAnimationFrame(pe)}),n(O,e=>{console.log("VoiceSelector: Voice type changed to:",e)},{immediate:!0}),(e,t)=>(i(),r("div",C,[d("span",V,v(g(D)("voice.selector.title","Voice")),1),d("div",{class:"relative w-full sm:w-auto",onClick:t[1]||(t[1]=p(()=>{},["stop"])),ref_key:"dropdownContainer",ref:le},[d("button",{onClick:t[0]||(t[0]=e=>Z.value=!Z.value),ref_key:"dropdownButton",ref:ee,class:"flex w-full min-w-[240px] sm:min-w-[260px] md:min-w-[280px] lg:min-w-[300px] items-center justify-between px-3 py-2 md:px-3 md:py-2 lg:px-4 lg:py-2.5 bg-white dark:bg-[#0f0f0f] border border-gray-300 dark:border-gray-700 rounded-lg text-sm md:text-sm lg:text-base font-medium text-gray-700 dark:text-gray-300 hover:bg-gray-50 dark:hover:bg-[#0a0a0a] transition-colors"},[d("div",z,[d("span",M,v(re.value?.icon),1),d("span",j,v(re.value?.label),1)]),(i(),r("svg",{class:m(["w-4 h-4 md:w-4 md:h-4 lg:w-5 lg:h-5 flex-shrink-0",{"rotate-180":Z.value}]),fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},t[5]||(t[5]=[d("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M19 9l-7 7-7-7"},null,-1)]),2))],512)],512),(i(),c(y,{to:"body"},[Z.value?(i(),r("div",{key:0,ref_key:"dropdownMenu",ref:te,style:x(ie.value),class:"bg-white dark:bg-[#0f0f0f] border border-gray-300 dark:border-gray-700 rounded-lg shadow-lg max-h-60 overflow-hidden z-[9998] min-w-[240px] sm:min-w-[260px] md:min-w-[280px] lg:min-w-[300px]"},[d("div",_,[(i(!0),r(f,null,w(se.value,e=>(i(),r("div",{key:e.value,onClick:t=>de(e),class:m(["flex items-center justify-between gap-2 px-3 py-2 md:px-3 md:py-2 lg:px-4 lg:py-2.5 text-left text-sm md:text-sm lg:text-base transition-colors cursor-pointer",g(O)===e.value?"bg-blue-50 dark:bg-[#2d3436] text-blue-600 dark:text-blue-400":"text-gray-700 dark:text-gray-300 hover:bg-gray-50 dark:hover:bg-gray-800"])},[d("div",T,[d("span",E,v(e.icon),1),d("span",L,v(e.label),1)]),d("div",S,[g(O)===e.value?(i(),r("svg",A,t[6]||(t[6]=[d("path",{"fill-rule":"evenodd",d:"M16.707 5.293a1 1 0 010 1.414l-8 8a1 1 0 01-1.414 0l-4-4a1 1 0 011.414-1.414L8 12.586l7.293-7.293a1 1 0 011.414 0z","clip-rule":"evenodd"},null,-1)]))):u("",!0),d("button",{onClick:p(t=>(e=>{oe.value=e,ae.value=!0,Z.value=!1})(e),["stop"]),class:"inline-block p-1 md:p-1 lg:p-1.5 rounded-full hover:bg-gray-200 dark:hover:bg-gray-500 flex-shrink-0"},t[7]||(t[7]=[d("svg",{class:"inline-block w-3 h-3 sm:w-4 sm:h-4 md:w-4 md:h-4 lg:w-4 lg:h-4 text-gray-500 dark:text-gray-400",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[d("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M10.325 4.317c.426-1.756 2.924-1.756 3.35 0a1.724 1.724 0 002.573 1.066c1.543-.94 3.31.826 2.37 2.37a1.724 1.724 0 001.065 2.572c1.756.426 1.756 2.924 0 3.35a1.724 1.724 0 00-1.066 2.573c.94 1.543-.826 3.31-2.37 2.37a1.724 1.724 0 00-2.572 1.065c-.426 1.756-2.924 1.756-3.35 0a1.724 1.724 0 00-2.573-1.066c-1.543.94-3.31-.826-2.37-2.37a1.724 1.724 0 00-1.065-2.572c-1.756-.426-1.756-2.924 0-3.35a1.724 1.724 0 001.066-2.573c-.94-1.543.826-3.31 2.37-2.37.996.608 2.296.07 2.572-1.065z"}),d("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M15 12a3 3 0 11-6 0 3 3 0 016 0z"})],-1)]),8,$)])],10,B))),128))])],4)):u("",!0)])),e.showVoiceInfo&&ne.value?(i(),r("div",{key:0,class:"relative",onMouseenter:t[2]||(t[2]=e=>Y.value=!0),onMouseleave:t[3]||(t[3]=e=>Y.value=!1)},[t[9]||(t[9]=d("button",{class:"p-2 text-gray-500 dark:text-gray-400 hover:text-gray-700 dark:hover:text-gray-200 transition-colors"},[d("svg",{class:"w-4 h-4",fill:"currentColor",viewBox:"0 0 20 20"},[d("path",{"fill-rule":"evenodd",d:"M18 10a8 8 0 11-16 0 8 8 0 0116 0zm-7-4a1 1 0 11-2 0 1 1 0 012 0zM9 9a1 1 0 000 2v3a1 1 0 001 1h1a1 1 0 100-2v-3a1 1 0 00-1-1H9z","clip-rule":"evenodd"})])],-1)),Y.value?(i(),r("div",I,[d("div",null,v(g(D)("voice.info.name"))+": "+v(ne.value.name),1),d("div",null,v(g(D)("voice.info.language"))+": "+v(ne.value.lang),1),d("div",null,v(g(D)("voice.info.gender"))+": "+v(g(D)(`voice.gender.${ne.value.gender}`)),1),t[8]||(t[8]=d("div",{class:"absolute top-full left-1/2 transform -translate-x-1/2 border-4 border-transparent border-t-gray-900 dark:border-t-gray-700"},null,-1))])):u("",!0)],32)):u("",!0),d("button",{onClick:ce,disabled:X.value,class:"flex items-center space-x-1 px-3 py-2 md:px-3 md:py-2 lg:px-4 lg:py-2.5 text-sm md:text-sm lg:text-base bg-blue-500 hover:bg-blue-600 disabled:bg-gray-400 text-white rounded-lg transition-colors w-full sm:w-auto"},[X.value?(i(),r("svg",H,t[11]||(t[11]=[d("circle",{class:"opacity-25",cx:"12",cy:"12",r:"10",stroke:"currentColor","stroke-width":"4"},null,-1),d("path",{class:"opacity-75",fill:"currentColor",d:"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"},null,-1)]))):(i(),r("svg",R,t[10]||(t[10]=[d("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M15.536 8.464a5 5 0 010 7.072m2.828-9.9a9 9 0 010 14.142M9 9a3 3 0 000 6v-6z"},null,-1)]))),d("span",null,v(X.value?g(D)("voice.testing","Testing..."):g(D)("voice.test","Test Voice")),1)],8,F),(i(),c(y,{to:"body"},[ae.value&&oe.value?(i(),c(g(W),{key:0,show:ae.value,"voice-type":oe.value.value,"voice-name":oe.value.label,"initial-settings":g(J)[oe.value.value],onClose:t[4]||(t[4]=e=>ae.value=!1),onSave:ue,onReset:ve},null,8,["show","voice-type","voice-name","initial-settings"])):u("",!0)]))]))}});export{W as default};
