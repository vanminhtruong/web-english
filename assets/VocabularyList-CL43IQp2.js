const __vite__mapDeps=(i,m=__vite__mapDeps,d=(m.f||(m.f=["/web-english/assets/VocabularyCard-D9IQQGJI.js","/web-english/assets/vue-vendor-Bt65BSdi.js","/web-english/assets/ui-vendor-D-J_fEQ5.js","/web-english/assets/dateUtils-N7QR9R2r.js","/web-english/assets/topicUtils-CuplmVBM.js","/web-english/assets/_plugin-vue_export-helper-BCo6x5W8.js","/web-english/assets/VocabularyCard-DvdEBeV2.css","/web-english/assets/MoveModal-CbFU7qyx.css","/web-english/assets/DateGroupAccordion-DN_qPWXB.js","/web-english/assets/index-DmJNupMF.js","/web-english/assets/index-Dhc0zPkL.css","/web-english/assets/import-helper-Bho6F3X4.js","/web-english/assets/useFlashcardHistory--VfpBBh-.js","/web-english/assets/DateGroupAccordion-q8sFO764.css"])))=>i.map(i=>d[i]);
import{_ as e}from"./index-DmJNupMF.js";import{u as a,a as t}from"./ui-vendor-D-J_fEQ5.js";import{l as r}from"./import-helper-Bho6F3X4.js";import{c as o}from"./dateUtils-N7QR9R2r.js";import{a as d}from"./topicUtils-CuplmVBM.js";import{d as l,A as s,I as n,C as i,c as u,v as g,f as c,e as b,t as m,u as v,F as p,j as y,g as x,b as h,N as f,n as k,q as w}from"./vue-vendor-Bt65BSdi.js";const P={class:"px-3 py-3 sm:px-4 sm:py-4 md:px-6 md:py-4 border-b border-gray-200 dark:border-gray-700"},C={class:"flex items-center justify-between"},$={class:"text-base sm:text-lg font-semibold bg-gradient-to-r from-blue-600 to-purple-600 dark:from-blue-400 dark:to-purple-400 bg-clip-text text-transparent"},I=["aria-label"],M={class:"text-sm font-semibold mb-2"},D={key:0,class:"text-sm text-gray-600 dark:text-white/70"},N={key:1,class:"max-h-64 overflow-y-auto space-y-2 pr-1"},E={class:"text-xs font-medium text-gray-700 mb-1 dark:text-white/80"},G={class:"font-semibold"},T={class:"text-xs pl-0 space-y-0.5"},A=["onClick"],j={class:"min-w-0 pr-2"},S={class:"font-medium"},z={class:"truncate"},_={class:"text-gray-500 whitespace-nowrap"},W={key:0},V={key:0,class:"bg-white dark:bg-[#0a0a0a] px-4 py-3 border-t border-gray-200 dark:border-gray-700 sm:px-6"},B={class:"flex items-center justify-between"},L={class:"flex-1 flex justify-between sm:hidden"},O=["disabled"],F=["disabled"],U={class:"hidden sm:flex-1 sm:flex sm:items-center sm:justify-between"},R={class:"text-sm text-gray-700 dark:text-gray-300"},q={class:"relative z-0 inline-flex rounded-md shadow-sm -space-x-px"},J=["disabled"],K={class:"sr-only"},H=["onClick","disabled"],Q=["disabled"],X={class:"sr-only"},Y={key:1,class:"divide-y divide-gray-200 dark:divide-gray-700"},Z={key:2,class:"bg-white dark:bg-[#0a0a0a] px-4 py-3 border-t border-gray-200 dark:border-gray-700 sm:px-6"},ee={class:"flex items-center justify-between"},ae={class:"flex-1 flex justify-between sm:hidden"},te=["disabled"],re=["disabled"],oe={class:"hidden sm:flex-1 sm:flex sm:items-center sm:justify-between"},de={class:"text-sm text-gray-700 dark:text-gray-300"},le={class:"relative z-0 inline-flex rounded-md shadow-sm -space-x-px"},se=["disabled"],ne={class:"sr-only"},ie=["onClick"],ue=["disabled"],ge={class:"sr-only"},ce="vocabulary-accordion-state",be=l({__name:"VocabularyList",props:{paginatedWords:{},currentPage:{},totalPages:{},totalCount:{},startIndex:{},endIndex:{},visiblePages:{},useGrouping:{type:Boolean},allWords:{},dateGroupPages:{},itemsPerPageGrouped:{},hoverToExpandEnabled:{type:Boolean},globalMoveMode:{type:Boolean},recentlyAddedCategory:{}},emits:["play-audio","edit-word","delete-word","toggle-favorite","view-details","previous-page","next-page","go-to-page","date-group-previous","date-group-next","date-group-go-to-page","accordion-toggle","open-note-dialog","open-add-vocabulary-dialog","open-grammar-manager","move-vocabulary","batch-move-category"],setup(l,{emit:be}){const{t:me,locale:ve}=a(),pe=t(),ye=s(!1);let xe=null;const he=()=>{xe&&(clearTimeout(xe),xe=null),ye.value=!0},fe=()=>{xe=setTimeout(()=>{ye.value=!1,xe=null},120)},ke=f(r(()=>e(()=>import("./VocabularyCard-D9IQQGJI.js"),__vite__mapDeps([0,1,2,3,4,5,6,7]),import.meta.url))),we=f(r(()=>e(()=>import("./DateGroupAccordion-DN_qPWXB.js"),__vite__mapDeps([8,9,1,2,10,11,4,3,12,5,13]),import.meta.url))),Pe=s({});n(()=>{Pe.value=(()=>{try{const e=localStorage.getItem(ce);return e?JSON.parse(e):{}}catch(e){return console.warn("Failed to load accordion state from localStorage:",e),{}}})()});const Ce=l,$e=i(()=>{const e=Ce.useGrouping?Ce.allWords||[]:Ce.paginatedWords||[];if(!Array.isArray(e)||0===e.length)return[];const a=e=>{if(!e)return"Unknown";const a=new Date(e);return isNaN(a.getTime())?"Unknown":a.toISOString().slice(0,10)},t=new Map;for(const o of e){if((o.image??"").trim())continue;const e=a(o.createdAt),r=o.category||"uncategorized",l=o.categoryName||d(r,me,ve,o);t.has(e)||t.set(e,new Map);const s=t.get(e),n=s.get(r)||{name:l,count:0};n.count+=1,!n.name&&l&&(n.name=l),s.set(r,n)}const r=[];for(const[o,d]of t.entries()){const e=Array.from(d.entries()).map(([e,a])=>({key:e,name:a.name,count:a.count}));r.push({date:o,categories:e})}return r.sort((e,a)=>"Unknown"===e.date?1:"Unknown"===a.date?-1:new Date(a.date).getTime()-new Date(e.date).getTime()),r}),Ie=s(1),Me=i(()=>{if(!Ce.useGrouping)return[];const e=Ce.allWords||Ce.paginatedWords;let a=o(e,ve.value,me);return Ce.recentlyAddedCategory&&(a=a.map(e=>{if(!e.topics)return e;const a=e.topics.findIndex(e=>e.topic===Ce.recentlyAddedCategory);if(a>-1){const t=[...e.topics],[r]=t.splice(a,1);return t.unshift(r),{...e,topics:t}}return e})),Ce.dateGroupPages&&Ce.itemsPerPageGrouped?a.map(e=>{const a=Ce.dateGroupPages[e.date]||1,t=Ce.itemsPerPageGrouped,r=e.topics?e.topics.length:0,o=(a-1)*t,d=o+t;return{...e,topics:e.topics?e.topics.slice(o,d):[],currentPage:a,totalPages:Math.ceil(r/t),topicsTotal:r,totalItems:e.vocabularies.length}}):a}),De=i(()=>{if(!Ce.useGrouping)return[];const e=Me.value,a=7*(Ie.value-1),t=a+7;return e.slice(a,t)}),Ne=i(()=>{const e=Me.value.length,a=Math.ceil(e/7),t=7*(Ie.value-1)+1,r=Math.min(t+7-1,e);return{totalGroups:e,totalPages:a,currentPage:Ie.value,startIndex:t,endIndex:r,hasNext:Ie.value<a,hasPrevious:Ie.value>1}}),Ee=()=>{Ne.value.hasNext&&Ie.value++},Ge=()=>{Ne.value.hasPrevious&&Ie.value--},Te=i(()=>{const e=Ne.value.totalPages,a=Ie.value;if(e<=0)return[];const t=[];let r=Math.max(1,a-Math.floor(2.5)),o=Math.min(e,r+5-1);r=Math.max(1,o-5+1);for(let d=r;d<=o;d++)t.push(d);return t}),Ae=(e,a)=>{Pe.value[e]=a,(e=>{try{localStorage.setItem(ce,JSON.stringify(e))}catch(a){console.warn("Failed to save accordion state to localStorage:",a)}})(Pe.value),console.log(`Accordion for ${e} toggled to:`,a)},je=(e,a,t)=>{pe.success(me("vocabulary.notes.saveSuccess","Notes saved successfully"),{timeout:2e3});"true"===localStorage.getItem("vocabulary-auto-save-enabled")&&pe.info(me("vocabulary.notes.autoSaveNotice","Notes will be included in auto-save"),{timeout:3e3}),console.log(`Note saved for ${e} with ${t.length} marked words`)},Se=()=>{Ce.hoverToExpandEnabled&&window.dispatchEvent(new CustomEvent("vocabulary-list-mouse-leave"))},ze=()=>{Ce.hoverToExpandEnabled&&window.dispatchEvent(new CustomEvent("vocabulary-list-mouse-enter"))},_e=be,We=e=>{const a=Me.value.find(a=>a.vocabularies.some(a=>a.id===e.word.id))?.date;_e("move-vocabulary",{...e,sourceDate:a})},Ve=e=>{const a=Me.value.filter(a=>a.vocabularies.some(a=>a.category===e.topic)&&a.date!==e.currentDate).map(a=>({date:a.date,count:a.vocabularies.filter(a=>a.category===e.topic).length})).filter(e=>e.count>0).sort((e,a)=>new Date(a.date).getTime()-new Date(e.date).getTime());w(()=>{const t=new CustomEvent("available-dates-response",{detail:{topic:e.topic,currentDate:e.currentDate,availableDates:a}});window.dispatchEvent(t)})},Be=e=>{const a=Me.value.findIndex(a=>a.date===e.date);if(-1===a)return;const t=Math.floor(a/7)+1,r=()=>{const a=new CustomEvent("open-date-topic",{detail:{date:e.date,topic:e.topic}});window.dispatchEvent(a)};if(Ie.value!==t){try{sessionStorage.setItem("open-date-topic-pending",JSON.stringify({date:e.date,topic:e.topic}))}catch{}Ie.value=t,w(()=>{requestAnimationFrame(()=>{setTimeout(()=>{r()},50)})})}else w(()=>{r()})};return(e,a)=>(g(),u("div",{class:"bg-white dark:bg-[#0a0a0a] shadow rounded-lg overflow-hidden border border-gray-200 dark:border-gray-700",onMouseleave:Se,onMouseenter:ze},[c("div",P,[c("div",C,[c("h3",$,m(v(me)("vocabulary.vocabularyList","Vocabulary List"))+" ("+m(e.totalCount)+") ",1),c("div",{class:"relative ml-2 select-none","aria-hidden":"false",onMouseenter:he,onMouseleave:fe},[c("button",{type:"button",class:"inline-flex items-center justify-center w-6 h-6 sm:w-7 sm:h-7 rounded-full border border-blue-200 text-blue-600 bg-blue-50 hover:bg-blue-100 dark:text-blue-300 dark:bg-dark-bg-soft dark:border-dark-bg-mute dark:hover:bg-dark-bg-mute transition","aria-label":v(me)("vocabulary.imageInfo.aria","Show dates/categories missing images")},a[20]||(a[20]=[c("svg",{viewBox:"0 0 24 24",fill:"currentColor",class:"w-4 h-4 sm:w-5 sm:h-5"},[c("path",{d:"M12 2C6.48 2 2 6.48 2 12s4.48 10 10 10 10-4.48 10-10S17.52 2 12 2zm.75 15h-1.5v-6h1.5v6zm0-8h-1.5V7h1.5v2z"})],-1)]),8,I),ye.value?(g(),u("div",{key:0,class:"transition-opacity duration-150 absolute right-0 mt-2 w-72 sm:w-80 rounded-lg shadow-xl ring-1 ring-black/5 bg-white text-gray-800 p-3 z-30 border border-gray-200 dark:bg-[#0a0a0a] dark:text-white dark:border dark:border-dark-bg-mute",onMouseenter:he,onMouseleave:fe},[a[21]||(a[21]=c("div",{class:"absolute -top-[2px] right-7 w-4 h-[4px] bg-white dark:bg-[#0a0a0a] pointer-events-none z-10","aria-hidden":"true"},null,-1)),a[22]||(a[22]=c("div",{class:"absolute -top-1.5 right-[29.5px] w-3 h-3 rotate-45 bg-white pointer-events-none z-20 dark:bg-[#0a0a0a] border-t border-l border-gray-200 dark:border-[#0f0f0f]","aria-hidden":"true"},null,-1)),c("div",M,m(v(me)("vocabulary.imageInfo.title","Missing images by date")),1),0===$e.value.length?(g(),u("div",D,m(v(me)("vocabulary.imageInfo.none","All categories have images for the current list")),1)):(g(),u("div",N,[(g(!0),u(p,null,y($e.value,e=>(g(),u("div",{key:e.date,class:"border border-gray-200 rounded-md p-2 dark:border-dark-bg-mute"},[c("div",E,[x(m(v(me)("vocabulary.imageInfo.date","Date"))+": ",1),c("span",G,m(e.date),1)]),c("ul",T,[(g(!0),u(p,null,y(e.categories,a=>(g(),u("li",{key:a.key,class:"flex items-center justify-between rounded px-2 py-1 cursor-pointer hover:bg-gray-custom dark:hover:bg-gray-custom",onClick:t=>{return r=e.date,o=a.key,void Be({date:r,topic:o});var r,o}},[c("div",j,[c("span",S,m(v(me)("vocabulary.imageInfo.category","Category"))+":",1),c("span",z,m(a.name),1)]),c("span",_,m(v(me)("vocabulary.imageInfo.missingCount",{count:a.count})||`${a.count} without image`),1)],8,A))),128))])]))),128))]))],32)):b("",!0)],32)])]),e.useGrouping&&Me.value.length>0?(g(),u("div",W,[(g(!0),u(p,null,y(De.value,t=>(g(),h(v(we),{key:t.date,group:t,"default-expanded":!1,"accordion-state":Pe.value,"hover-to-expand-enabled":e.hoverToExpandEnabled,"global-move-mode":e.globalMoveMode,onPlayAudio:a[0]||(a[0]=a=>e.$emit("play-audio",a)),onEditWord:a[1]||(a[1]=a=>e.$emit("edit-word",a)),onDeleteWord:a[2]||(a[2]=a=>e.$emit("delete-word",a)),onToggleFavorite:a[3]||(a[3]=a=>e.$emit("toggle-favorite",a)),onViewDetails:a[4]||(a[4]=a=>e.$emit("view-details",a)),onDateGroupPrevious:a[5]||(a[5]=a=>e.$emit("date-group-previous",a)),onDateGroupNext:a[6]||(a[6]=a=>e.$emit("date-group-next",a)),onAccordionToggle:Ae,onNoteSaved:je,onOpenNoteDialog:a[7]||(a[7]=a=>e.$emit("open-note-dialog",a.date,a.words)),onOpenAddVocabularyDialog:a[8]||(a[8]=a=>e.$emit("open-add-vocabulary-dialog",a)),onOpenGrammarManager:a[9]||(a[9]=a=>e.$emit("open-grammar-manager",a)),onMoveVocabulary:We,onRequestAvailableDates:Ve,onNavigateToDateTopic:Be,onBatchMoveCategory:a[10]||(a[10]=a=>e.$emit("batch-move-category",a))},null,8,["group","accordion-state","hover-to-expand-enabled","global-move-mode"]))),128)),Ne.value.totalPages>1?(g(),u("div",V,[c("div",B,[c("div",L,[c("button",{onClick:Ge,disabled:!Ne.value.hasPrevious,class:"relative inline-flex items-center px-4 py-2 border border-gray-300 dark:border-gray-600 text-sm font-medium rounded-md text-gray-700 dark:text-gray-300 bg-white dark:bg-[#0a0a0a] hover:bg-gray-50 dark:hover:bg-gray-600 disabled:opacity-50 disabled:cursor-not-allowed"},m(v(me)("common.previous","Previous")),9,O),c("button",{onClick:Ee,disabled:!Ne.value.hasNext,class:"ml-3 relative inline-flex items-center px-4 py-2 border border-gray-300 dark:border-gray-600 text-sm font-medium rounded-md text-gray-700 dark:text-gray-300 bg-white dark:bg-[#0a0a0a] hover:bg-gray-50 dark:hover:bg-gray-600 disabled:opacity-50 disabled:cursor-not-allowed"},m(v(me)("common.next","Next")),9,F)]),c("div",U,[c("div",null,[c("p",R,m(v(me)("vocabulary.showingDateGroups",{start:Ne.value.startIndex,end:Ne.value.endIndex,total:Ne.value.totalGroups},`Showing ${Ne.value.startIndex} to ${Ne.value.endIndex} of ${Ne.value.totalGroups} date groups`)),1)]),c("div",null,[c("nav",q,[c("button",{onClick:Ge,disabled:!Ne.value.hasPrevious,class:"relative inline-flex items-center px-2 py-2 rounded-l-md border border-gray-300 dark:border-gray-600 bg-white dark:bg-[#0a0a0a] text-sm font-medium text-gray-500 dark:text-gray-300 hover:bg-gray-50 dark:hover:bg-gray-600 disabled:opacity-50 disabled:cursor-not-allowed"},[c("span",K,m(v(me)("common.previous","Previous")),1),a[23]||(a[23]=c("svg",{class:"h-5 w-5",fill:"currentColor",viewBox:"0 0 20 20"},[c("path",{"fill-rule":"evenodd",d:"M12.707 5.293a1 1 0 010 1.414L9.414 10l3.293 3.293a1 1 0 01-1.414 1.414l-4-4a1 1 0 010-1.414l4-4a1 1 0 011.414 0z","clip-rule":"evenodd"})],-1))],8,J),(g(!0),u(p,null,y(Te.value,e=>(g(),u("button",{key:e,onClick:a=>e>0?(e=>{e>=1&&e<=Ne.value.totalPages&&(Ie.value=e)})(e):null,disabled:-1===e,class:k([e===Ne.value.currentPage?"z-10 bg-blue-50 dark:bg-blue-900 border-blue-500 dark:border-blue-400 text-blue-600 dark:text-blue-300":-1===e?"bg-white dark:bg-[#0a0a0a] border-gray-300 dark:border-gray-600 text-gray-500 dark:text-gray-400 cursor-default":"bg-white dark:bg-[#0a0a0a] border-gray-300 dark:border-gray-600 text-gray-500 dark:text-gray-300 hover:bg-gray-50 dark:hover:bg-gray-600","relative inline-flex items-center px-4 py-2 border text-sm font-medium"])},m(-1===e?"...":e),11,H))),128)),c("button",{onClick:Ee,disabled:!Ne.value.hasNext,class:"relative inline-flex items-center px-2 py-2 rounded-r-md border border-gray-300 dark:border-gray-600 bg-white dark:bg-[#0a0a0a] text-sm font-medium text-gray-500 dark:text-gray-300 hover:bg-gray-50 dark:hover:bg-gray-600 disabled:opacity-50 disabled:cursor-not-allowed"},[c("span",X,m(v(me)("common.next","Next")),1),a[24]||(a[24]=c("svg",{class:"h-5 w-5",fill:"currentColor",viewBox:"0 0 20 20"},[c("path",{"fill-rule":"evenodd",d:"M7.293 14.707a1 1 0 010-1.414L10.586 10 7.293 6.707a1 1 0 011.414-1.414l4 4a1 1 0 010 1.414l-4 4a1 1 0 01-1.414 0z","clip-rule":"evenodd"})],-1))],8,Q)])])])])])):b("",!0)])):(g(),u("div",Y,[(g(!0),u(p,null,y(e.paginatedWords,t=>(g(),h(v(ke),{key:t.id,word:t,onPlayAudio:a[11]||(a[11]=a=>e.$emit("play-audio",a)),onEditWord:a[12]||(a[12]=a=>e.$emit("edit-word",a)),onDeleteWord:a[13]||(a[13]=a=>e.$emit("delete-word",a)),onToggleFavorite:a[14]||(a[14]=a=>e.$emit("toggle-favorite",a)),onViewDetails:a[15]||(a[15]=a=>e.$emit("view-details",a))},null,8,["word"]))),128))])),e.useGrouping?b("",!0):(g(),u("div",Z,[c("div",ee,[c("div",ae,[c("button",{onClick:a[16]||(a[16]=a=>e.$emit("previous-page")),disabled:1===e.currentPage,class:"relative inline-flex items-center px-4 py-2 border border-gray-300 dark:border-gray-600 text-sm font-medium rounded-md text-gray-700 dark:text-gray-300 bg-white dark:bg-[#0a0a0a] hover:bg-gray-50 dark:hover:bg-gray-600"},m(v(me)("common.previous","Previous")),9,te),c("button",{onClick:a[17]||(a[17]=a=>e.$emit("next-page")),disabled:e.currentPage===e.totalPages,class:"ml-3 relative inline-flex items-center px-4 py-2 border border-gray-300 dark:border-gray-600 text-sm font-medium rounded-md text-gray-700 dark:text-gray-300 bg-white dark:bg-[#0a0a0a] hover:bg-gray-50 dark:hover:bg-gray-600"},m(v(me)("common.next","Next")),9,re)]),c("div",oe,[c("div",null,[c("p",de,m(v(me)("vocabulary.showingResults",{start:e.startIndex,end:e.endIndex,total:e.totalCount},`Showing ${e.startIndex} to ${e.endIndex} of ${e.totalCount} results`)),1)]),c("div",null,[c("nav",le,[c("button",{onClick:a[18]||(a[18]=a=>e.$emit("previous-page")),disabled:1===e.currentPage,class:"relative inline-flex items-center px-2 py-2 rounded-l-md border border-gray-300 dark:border-gray-600 bg-white dark:bg-[#0a0a0a] text-sm font-medium text-gray-500 dark:text-gray-300 hover:bg-gray-50 dark:hover:bg-gray-600 disabled:opacity-50 disabled:cursor-not-allowed"},[c("span",ne,m(v(me)("common.previous","Previous")),1),a[25]||(a[25]=c("svg",{class:"h-5 w-5",fill:"currentColor",viewBox:"0 0 20 20"},[c("path",{"fill-rule":"evenodd",d:"M12.707 5.293a1 1 0 010 1.414L9.414 10l3.293 3.293a1 1 0 01-1.414 1.414l-4-4a1 1 0 010-1.414l4-4a1 1 0 011.414 0z","clip-rule":"evenodd"})],-1))],8,se),(g(!0),u(p,null,y(e.visiblePages,a=>(g(),u("button",{key:a,onClick:t=>e.$emit("go-to-page",a),class:k([a===e.currentPage?"bg-blue-50 dark:bg-blue-900 border-blue-500 dark:border-blue-400 text-blue-600 dark:text-blue-300":"bg-white dark:bg-[#0a0a0a] border-gray-300 dark:border-gray-600 text-gray-500 dark:text-gray-300 hover:bg-gray-50 dark:hover:bg-gray-600","relative inline-flex items-center px-4 py-2 border text-sm font-medium"])},m(a),11,ie))),128)),c("button",{onClick:a[19]||(a[19]=a=>e.$emit("next-page")),disabled:e.currentPage===e.totalPages,class:"relative inline-flex items-center px-2 py-2 rounded-r-md border border-gray-300 dark:border-gray-600 bg-white dark:bg-[#0a0a0a] text-sm font-medium text-gray-500 dark:text-gray-300 hover:bg-gray-50 dark:hover:bg-gray-600 disabled:opacity-50 disabled:cursor-not-allowed"},[c("span",ge,m(v(me)("common.next","Next")),1),a[26]||(a[26]=c("svg",{class:"h-5 w-5",fill:"currentColor",viewBox:"0 0 20 20"},[c("path",{"fill-rule":"evenodd",d:"M7.293 14.707a1 1 0 010-1.414L10.586 10 7.293 6.707a1 1 0 011.414-1.414l4 4a1 1 0 010 1.414l4 4a1 1 0 01-1.414 0z","clip-rule":"evenodd"})],-1))],8,ue)])])])])]))],32))}});export{be as default};
