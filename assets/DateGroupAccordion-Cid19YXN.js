const __vite__mapDeps=(i,m=__vite__mapDeps,d=(m.f||(m.f=["assets/VocabularyCard-BOfNu0yp.js","assets/vendor-DMqe9Z5T.js","assets/index-BE8-4tPx.js","assets/vendor-toast-C02QcIAu.js","assets/vendor-toast-jG2HNJHr.css","assets/index-CW204AHq.css","assets/VocabularyCard-BJpZ1tLY.css","assets/VocabularyNoteButton-BMRnaJSL.js","assets/GrammarManagerButton-tfhF128L.js"])))=>i.map(i=>d[i]);
import { f as getDateKey, g as getTopicName, l as loadComponentSafely, _ as __vitePreload, a as _export_sfc } from "./index-BE8-4tPx.js";
import { d as defineComponent, H as useI18n, B as computed, A as ref, K as watch, I as onMounted, q as nextTick, L as onUnmounted, c as createElementBlock, v as openBlock, f as createBaseVNode, y as createVNode, e as createCommentVNode, n as normalizeClass, t as toDisplayString, i as withModifiers, C as withDirectives, N as vModelCheckbox, S as vModelText, u as unref, Z as withKeys, g as createTextVNode, D as defineAsyncComponent, F as Fragment, w as withCtx, j as renderList, M as Transition, b as createBlock } from "./vendor-DMqe9Z5T.js";
import "./vendor-toast-C02QcIAu.js";
const _hoisted_1 = { class: "mb-3 xs:mb-4 sm:mb-6" };
const _hoisted_2 = { class: "sticky top-0 bg-gray-50 dark:bg-[#0f0f0f] px-2 xs:px-3 sm:px-4 md:px-6 py-2 xs:py-2.5 sm:py-3 border-b border-gray-200 dark:border-gray-700 z-10" };
const _hoisted_3 = { class: "sm:block md:hidden" };
const _hoisted_4 = { class: "flex items-center space-x-1 flex-1" };
const _hoisted_5 = { class: "p-0.5 rounded-md" };
const _hoisted_6 = { class: "text-xs sm:text-sm md:text-base lg:text-lg xl:text-base 2xl:text-lg font-semibold text-gray-700 dark:text-gray-300 flex items-center space-x-1" };
const _hoisted_7 = { class: "text-xs xs:text-xs sm:text-sm md:text-sm lg:text-base xl:text-sm 2xl:text-base text-gray-500 dark:text-gray-400" };
const _hoisted_8 = { class: "relative inline-flex items-center cursor-pointer" };
const _hoisted_9 = ["disabled"];
const _hoisted_10 = { class: "text-xs sm:text-sm md:text-base lg:text-lg xl:text-base 2xl:text-lg text-gray-500 dark:text-gray-400" };
const _hoisted_11 = ["disabled"];
const _hoisted_12 = {
  key: 0,
  class: "flex items-center justify-center mb-3"
};
const _hoisted_13 = { class: "flex items-center space-x-1 w-full max-w-[280px]" };
const _hoisted_14 = ["placeholder"];
const _hoisted_15 = ["aria-label"];
const _hoisted_16 = ["aria-label"];
const _hoisted_17 = { key: 1 };
const _hoisted_18 = {
  key: 0,
  class: "flex items-center justify-center mb-1.5"
};
const _hoisted_19 = { class: "flex items-center space-x-1 px-2.5 py-1 bg-orange-50 dark:bg-orange-900/50 rounded-lg border border-orange-200 dark:border-orange-700 max-w-[180px]" };
const _hoisted_20 = { class: "relative flex-1 min-w-0" };
const _hoisted_21 = {
  key: 0,
  class: "absolute z-[9999] bottom-full left-1/2 transform -translate-x-1/2 mb-2 px-3 py-2 bg-gray-900 dark:bg-gray-700 text-white text-xs rounded-lg shadow-lg whitespace-nowrap"
};
const _hoisted_22 = ["aria-label"];
const _hoisted_23 = { class: "grid grid-cols-2 gap-2 max-w-[280px] sm:max-w-[320px] mx-auto" };
const _hoisted_24 = ["aria-label"];
const _hoisted_25 = { class: "text-center leading-tight" };
const _hoisted_26 = {
  key: 1,
  class: "flex"
};
const _hoisted_27 = ["aria-label"];
const _hoisted_28 = { class: "text-center leading-tight" };
const _hoisted_29 = {
  key: 3,
  class: "flex"
};
const _hoisted_30 = { class: "hidden md:block" };
const _hoisted_31 = { class: "flex items-center space-x-2" };
const _hoisted_32 = { class: "p-1 rounded-md" };
const _hoisted_33 = { class: "text-xs xs:text-sm sm:text-sm md:text-base lg:text-base xl:text-sm 2xl:text-base font-semibold text-gray-700 dark:text-gray-300 flex items-center space-x-1 xs:space-x-1.5 sm:space-x-2" };
const _hoisted_34 = { class: "text-xs xs:text-xs sm:text-sm md:text-sm lg:text-base xl:text-sm 2xl:text-base text-gray-500 dark:text-gray-400" };
const _hoisted_35 = { class: "relative inline-flex items-center cursor-pointer" };
const _hoisted_36 = { class: "hidden lg:flex items-center space-x-2" };
const _hoisted_37 = ["disabled"];
const _hoisted_38 = { class: "text-xs sm:text-sm md:text-base lg:text-lg xl:text-sm 2xl:text-base text-gray-500 dark:text-gray-400" };
const _hoisted_39 = ["disabled"];
const _hoisted_40 = { class: "relative inline-flex items-center cursor-pointer" };
const _hoisted_41 = { class: "text-xs sm:text-sm md:text-base lg:text-lg xl:text-sm 2xl:text-base text-gray-600 dark:text-gray-300" };
const _hoisted_42 = ["disabled"];
const _hoisted_43 = { class: "text-xs sm:text-sm md:text-base text-gray-500 dark:text-gray-400" };
const _hoisted_44 = ["disabled"];
const _hoisted_45 = {
  key: 0,
  class: "flex items-center space-x-2"
};
const _hoisted_46 = {
  key: 0,
  class: "flex items-center space-x-1 xs:space-x-1.5 sm:space-x-1.5 md:space-x-2 px-2 xs:px-2.5 sm:px-3 md:px-4 py-0.5 xs:py-1 sm:py-1 md:py-1.5 bg-orange-50 dark:bg-orange-900/50 rounded-full border border-orange-200 dark:border-orange-700"
};
const _hoisted_47 = { class: "relative" };
const _hoisted_48 = {
  key: 0,
  class: "absolute z-[9999] bottom-full left-1/2 transform -translate-x-1/2 mb-2 px-3 py-2 bg-gray-900 dark:bg-gray-700 text-white text-xs rounded-lg shadow-lg whitespace-nowrap"
};
const _hoisted_49 = ["aria-label"];
const _hoisted_50 = ["aria-label"];
const _hoisted_51 = { class: "whitespace-nowrap" };
const _hoisted_52 = ["aria-label"];
const _hoisted_53 = {
  key: 1,
  class: "flex items-center space-x-1 xs:space-x-1.5 sm:space-x-2 w-full max-w-[150px] xs:max-w-[200px] sm:max-w-xs"
};
const _hoisted_54 = ["placeholder"];
const _hoisted_55 = ["aria-label"];
const _hoisted_56 = ["aria-label"];
const _hoisted_57 = { class: "hidden lg:block" };
const _hoisted_58 = { class: "flex-1 flex justify-center mx-1 xs:mx-2 sm:mx-4 min-w-0" };
const _hoisted_59 = {
  key: 0,
  class: "flex items-center space-x-1.5 xs:space-x-1.5 sm:space-x-2 flex-nowrap"
};
const _hoisted_60 = {
  key: 0,
  class: "flex items-center space-x-1 md:space-x-1.5 px-2 xs:px-2.5 sm:px-3 md:px-4 py-0.5 xs:py-1 sm:py-1 md:py-1.5 lg:py-1.5 xl:py-1.5 2xl:py-1.5 bg-orange-50 dark:bg-orange-900/50 rounded-full border border-orange-200 dark:border-orange-700 flex-shrink-0"
};
const _hoisted_61 = { class: "relative" };
const _hoisted_62 = {
  key: 0,
  class: "absolute z-[9999] bottom-full left-1/2 transform -translate-x-1/2 mb-2 px-3 py-2 bg-gray-900 dark:bg-gray-700 text-white text-xs rounded-lg shadow-lg whitespace-nowrap"
};
const _hoisted_63 = ["aria-label"];
const _hoisted_64 = ["aria-label"];
const _hoisted_65 = ["aria-label"];
const _hoisted_66 = ["placeholder"];
const _hoisted_67 = ["aria-label"];
const _hoisted_68 = ["aria-label"];
const _hoisted_69 = {
  key: 0,
  class: "accordion-content"
};
const _hoisted_70 = {
  key: 0,
  class: "divide-y divide-gray-200 dark:divide-gray-700"
};
const _hoisted_71 = ["onMouseenter", "onMouseleave"];
const _hoisted_72 = { class: "bg-gray-50 dark:bg-gray-custom border-b border-gray-200 dark:border-gray-700" };
const _hoisted_73 = ["id", "onClick"];
const _hoisted_74 = { class: "flex items-center space-x-2" };
const _hoisted_75 = { class: "flex items-center space-x-1" };
const _hoisted_76 = { class: "text-sm font-medium text-gray-600 dark:text-gray-400" };
const _hoisted_77 = { class: "text-xs text-gray-500" };
const _hoisted_78 = ["onMouseenter"];
const _hoisted_79 = ["aria-label"];
const _hoisted_80 = { class: "text-xs font-semibold mb-2" };
const _hoisted_81 = {
  key: 0,
  class: "text-xs text-gray-600 dark:text-white/70"
};
const _hoisted_82 = ["onClick"];
const _hoisted_83 = { class: "text-gray-500 dark:text-white/60" };
const _hoisted_84 = ["onClick", "title"];
const _hoisted_85 = { class: "flex items-center justify-between text-xs" };
const _hoisted_86 = { class: "flex-1 flex justify-between sm:hidden" };
const _hoisted_87 = ["onClick", "disabled"];
const _hoisted_88 = ["onClick", "disabled"];
const _hoisted_89 = { class: "hidden sm:flex-1 sm:flex sm:items-center sm:justify-between" };
const _hoisted_90 = { class: "text-xs text-gray-700 dark:text-gray-300" };
const _hoisted_91 = { class: "relative z-0 inline-flex rounded-md shadow-sm -space-x-px" };
const _hoisted_92 = ["onClick", "disabled"];
const _hoisted_93 = { class: "sr-only" };
const _hoisted_94 = ["onClick", "disabled"];
const _hoisted_95 = ["onClick", "disabled"];
const _hoisted_96 = { class: "sr-only" };
const _hoisted_97 = {
  key: 0,
  class: "topic-accordion-content py-2"
};
const _hoisted_98 = { class: "divide-y divide-gray-200 dark:divide-gray-700" };
const _hoisted_99 = {
  key: 1,
  class: "divide-y divide-gray-200 dark:divide-gray-700"
};
const SHOW_ACTION_BUTTONS_KEY = "vocabulary-show-action-buttons-by-date";
const itemsPerCategoryPage = 5;
const TOPIC_PAGINATION_STORAGE_KEY = "vocabulary-topic-pagination-state";
const TOPICS_STORAGE_KEY = "vocabulary-group-topics";
const PENDING_OPEN_KEY = "open-date-topic-pending";
const _sfc_main = /* @__PURE__ */ defineComponent({
  __name: "DateGroupAccordion",
  props: {
    group: {},
    defaultExpanded: { type: Boolean, default: false },
    accordionState: { default: () => ({}) },
    hoverToExpandEnabled: { type: Boolean, default: false },
    globalMoveMode: { type: Boolean, default: false }
  },
  emits: ["play-audio", "edit-word", "delete-word", "toggle-favorite", "view-details", "date-group-previous", "date-group-next", "accordion-toggle", "note-saved", "open-note-dialog", "open-add-vocabulary-dialog", "open-grammar-manager", "move-vocabulary", "request-available-dates", "navigate-to-date-topic", "batch-move-category"],
  setup(__props, { emit: __emit }) {
    const { t, locale } = useI18n();
    const VocabularyCard = defineAsyncComponent(
      loadComponentSafely(() => __vitePreload(() => import("./VocabularyCard-BOfNu0yp.js"), true ? __vite__mapDeps([0,1,2,3,4,5,6]) : void 0))
    );
    const VocabularyNoteButton = defineAsyncComponent(
      loadComponentSafely(() => __vitePreload(() => import("./VocabularyNoteButton-BMRnaJSL.js"), true ? __vite__mapDeps([7,1]) : void 0))
    );
    const GrammarManagerButton = defineAsyncComponent(() => loadComponentSafely(() => __vitePreload(() => import("./GrammarManagerButton-tfhF128L.js"), true ? __vite__mapDeps([8,1]) : void 0))());
    const props = __props;
    const totalVocabularyCount = computed(() => {
      if (props.group.totalItems && props.group.totalItems > 0) {
        return props.group.totalItems;
      }
      if (props.group.topics && props.group.topics.length > 0) {
        return props.group.topics.reduce((total, topicGroup) => {
          return total + (topicGroup.vocabularies?.length || 0);
        }, 0);
      } else {
        return props.group.vocabularies?.length || 0;
      }
    });
    const isTodayGroup = computed(() => {
      const today = /* @__PURE__ */ new Date();
      const todayKey = getDateKey(today.toISOString());
      return props.group.date === todayKey;
    });
    const isTopicTruncated = computed(() => {
      if (!groupTopic.value) {
        return false;
      }
      if (topicSpanMobile.value) {
        return topicSpanMobile.value.scrollWidth > topicSpanMobile.value.clientWidth;
      }
      if (topicSpanDesktop.value) {
        return topicSpanDesktop.value.scrollWidth > topicSpanDesktop.value.clientWidth;
      }
      return false;
    });
    const isExpanded = ref(false);
    ref(false);
    ref(null);
    const accordionContent = ref();
    const accordionMaxHeight = ref(0);
    const showActionButtons = ref(true);
    const loadActionButtonsState = () => {
      try {
        const saved = localStorage.getItem(SHOW_ACTION_BUTTONS_KEY);
        if (saved !== null) {
          const allStates = JSON.parse(saved);
          if (typeof allStates === "object" && allStates[props.group.date] !== void 0) {
            showActionButtons.value = allStates[props.group.date];
          }
        }
      } catch (error) {
        console.warn("Failed to load action buttons state from localStorage:", error);
        showActionButtons.value = true;
      }
    };
    const saveActionButtonsState = () => {
      try {
        const saved = localStorage.getItem(SHOW_ACTION_BUTTONS_KEY);
        let allStates = {};
        if (saved !== null) {
          allStates = JSON.parse(saved);
        }
        allStates[props.group.date] = showActionButtons.value;
        localStorage.setItem(SHOW_ACTION_BUTTONS_KEY, JSON.stringify(allStates));
      } catch (error) {
        console.warn("Failed to save action buttons state to localStorage:", error);
      }
    };
    watch(showActionButtons, () => {
      saveActionButtonsState();
    });
    const expandedTopics = ref({});
    const topicPaginationState = ref({});
    const loadTopicPaginationState = () => {
      try {
        const stored = localStorage.getItem(TOPIC_PAGINATION_STORAGE_KEY);
        return stored ? JSON.parse(stored) : {};
      } catch (error) {
        console.warn("Failed to load topic pagination state from localStorage:", error);
        return {};
      }
    };
    const saveTopicPaginationState = (state) => {
      try {
        localStorage.setItem(TOPIC_PAGINATION_STORAGE_KEY, JSON.stringify(state));
      } catch (error) {
        console.warn("Failed to save topic pagination state to localStorage:", error);
      }
    };
    const toggleTopicAccordion = (topic) => {
      expandedTopics.value[topic] = !expandedTopics.value[topic];
      if (!topicPaginationState.value[topic]) {
        topicPaginationState.value[topic] = { currentPage: 1 };
      }
    };
    const isTopicExpanded = (topic) => {
      return expandedTopics.value[topic] || false;
    };
    const getTopicCurrentPage = (topic) => {
      return topicPaginationState.value[topic]?.currentPage || 1;
    };
    const setTopicCurrentPage = (topic, page) => {
      if (!topicPaginationState.value[topic]) {
        topicPaginationState.value[topic] = { currentPage: 1 };
      }
      topicPaginationState.value[topic].currentPage = page;
      saveTopicPaginationState(topicPaginationState.value);
    };
    const getPaginatedTopicVocabularies = (topicGroup) => {
      const currentPage = getTopicCurrentPage(topicGroup.topic);
      const totalItems = topicGroup.vocabularies.length;
      const startIndex = (currentPage - 1) * itemsPerCategoryPage;
      const endIndex = startIndex + itemsPerCategoryPage;
      return {
        vocabularies: topicGroup.vocabularies.slice(startIndex, endIndex),
        currentPage,
        totalPages: Math.ceil(totalItems / itemsPerCategoryPage),
        totalItems,
        startIndex: startIndex + 1,
        endIndex: Math.min(endIndex, totalItems),
        hasNext: currentPage < Math.ceil(totalItems / itemsPerCategoryPage),
        hasPrevious: currentPage > 1
      };
    };
    const goToTopicPage = (topic, page) => {
      const totalItems = props.group.topics?.find((t2) => t2.topic === topic)?.vocabularies.length || 0;
      const totalPages = Math.ceil(totalItems / itemsPerCategoryPage);
      if (page >= 1 && page <= totalPages) {
        setTopicCurrentPage(topic, page);
      }
    };
    const nextTopicPage = (topic) => {
      const currentPage = getTopicCurrentPage(topic);
      const totalItems = props.group.topics?.find((t2) => t2.topic === topic)?.vocabularies.length || 0;
      const totalPages = Math.ceil(totalItems / itemsPerCategoryPage);
      if (currentPage < totalPages) {
        setTopicCurrentPage(topic, currentPage + 1);
      }
    };
    const previousTopicPage = (topic) => {
      const currentPage = getTopicCurrentPage(topic);
      if (currentPage > 1) {
        setTopicCurrentPage(topic, currentPage - 1);
      }
    };
    const getVisibleTopicPages = (currentPage, totalPages) => {
      if (totalPages <= 7) {
        return Array.from({ length: totalPages }, (_, i) => i + 1);
      }
      if (currentPage <= 4) {
        return [1, 2, 3, 4, 5, -1, totalPages];
      }
      if (currentPage >= totalPages - 3) {
        return [1, -1, totalPages - 4, totalPages - 3, totalPages - 2, totalPages - 1, totalPages];
      }
      return [1, -1, currentPage - 1, currentPage, currentPage + 1, -1, totalPages];
    };
    const hoverTimeouts = ref({});
    const handleTopicHover = (topic, isHovering) => {
      if (props.hoverToExpandEnabled) {
        if (hoverTimeouts.value[topic]) {
          clearTimeout(hoverTimeouts.value[topic]);
          delete hoverTimeouts.value[topic];
        }
        if (isHovering) {
          expandedTopics.value[topic] = true;
        } else {
          hoverTimeouts.value[topic] = setTimeout(() => {
            if (!isModalOpen()) {
              expandedTopics.value[topic] = false;
            }
            delete hoverTimeouts.value[topic];
          }, 200);
        }
      }
    };
    const isMouseOutsideVocabulary = ref(false);
    const handleVocabularyListMouseLeave = () => {
      if (props.hoverToExpandEnabled) {
        isMouseOutsideVocabulary.value = true;
        if (!isModalOpen()) {
          closeAllTopics();
        }
      }
    };
    const handleVocabularyListMouseEnter = () => {
      if (props.hoverToExpandEnabled) {
        isMouseOutsideVocabulary.value = false;
      }
    };
    const closeAllTopics = () => {
      Object.keys(expandedTopics.value).forEach((topic) => {
        expandedTopics.value[topic] = false;
      });
      Object.keys(hoverTimeouts.value).forEach((topic) => {
        if (hoverTimeouts.value[topic]) {
          clearTimeout(hoverTimeouts.value[topic]);
          delete hoverTimeouts.value[topic];
        }
      });
    };
    const isModalOpen = () => {
      const modalSelectors = [
        '[role="dialog"]',
        ".modal",
        ".dialog",
        '[data-headlessui-state="open"]',
        // HeadlessUI modals
        ".fixed.inset-0"
        // Common modal backdrop pattern
      ];
      return modalSelectors.some((selector) => {
        const elements = document.querySelectorAll(selector);
        return Array.from(elements).some((el) => {
          const style = window.getComputedStyle(el);
          return style.display !== "none" && style.visibility !== "hidden";
        });
      });
    };
    const showTopicInput = ref(false);
    const topicInputValue = ref("");
    const topicInput = ref();
    const groupTopic = ref("");
    const showTopicTooltip = ref(false);
    const topicSpanMobile = ref();
    const topicSpanDesktop = ref();
    const getStoredTopics = () => {
      try {
        const stored = localStorage.getItem(TOPICS_STORAGE_KEY);
        return stored ? JSON.parse(stored) : {};
      } catch (error) {
        console.warn("Failed to load group topics from localStorage:", error);
        return {};
      }
    };
    const setStoredTopics = (topics) => {
      try {
        localStorage.setItem(TOPICS_STORAGE_KEY, JSON.stringify(topics));
      } catch (error) {
        console.warn("Failed to save group topics to localStorage:", error);
      }
    };
    const editTopic = () => {
      topicInputValue.value = groupTopic.value;
      showTopicInput.value = true;
      nextTick(() => {
        topicInput.value?.focus();
      });
    };
    const saveTopic = () => {
      const trimmedTopic = topicInputValue.value.trim();
      groupTopic.value = trimmedTopic;
      const storedTopics = getStoredTopics();
      if (trimmedTopic) {
        storedTopics[props.group.date] = trimmedTopic;
      } else {
        delete storedTopics[props.group.date];
      }
      setStoredTopics(storedTopics);
      showTopicInput.value = false;
      topicInputValue.value = "";
    };
    const cancelTopicInput = () => {
      showTopicInput.value = false;
      topicInputValue.value = "";
    };
    const handleMoveVocabulary = (data) => {
      emit("move-vocabulary", data);
    };
    const formatDateForDisplay = (dateStr) => {
      const date = new Date(dateStr);
      return date.toLocaleDateString(locale.value, {
        year: "numeric",
        month: "short",
        day: "numeric"
      });
    };
    const calculateHeight = async () => {
      if (!accordionContent.value) return;
      const innerElement = accordionContent.value.querySelector(".accordion-inner");
      if (innerElement) {
        const clone = innerElement.cloneNode(true);
        clone.style.visibility = "hidden";
        clone.style.position = "absolute";
        clone.style.height = "auto";
        clone.style.maxHeight = "none";
        clone.style.overflow = "visible";
        document.body.appendChild(clone);
        await nextTick();
        accordionMaxHeight.value = clone.scrollHeight + 24;
        document.body.removeChild(clone);
      }
    };
    const modalWatchInterval = ref(null);
    const startModalWatcher = () => {
      if (modalWatchInterval.value) return;
      modalWatchInterval.value = setInterval(() => {
        if (props.hoverToExpandEnabled && isMouseOutsideVocabulary.value && !isModalOpen()) {
          closeAllTopics();
        }
      }, 300);
    };
    const stopModalWatcher = () => {
      if (modalWatchInterval.value) {
        clearInterval(modalWatchInterval.value);
        modalWatchInterval.value = null;
      }
    };
    const toggleAccordion = () => {
      isExpanded.value = !isExpanded.value;
      emit("accordion-toggle", props.group.date, isExpanded.value);
    };
    const openAddVocabularyDialog = () => {
      emit("open-add-vocabulary-dialog", props.group.date);
    };
    const openGrammarManager = (date) => {
      emit("open-grammar-manager", date);
    };
    const handleBatchMoveCategory = (topicGroup) => {
      emit("batch-move-category", {
        topic: topicGroup.topic,
        words: topicGroup.vocabularies,
        sourceDate: props.group.date
      });
    };
    const availableDatesByTopic = ref({});
    const infoHoverTopic = ref(null);
    const handleInfoMouseEnter = (topic) => {
      infoHoverTopic.value = topic;
      emit("request-available-dates", { topic, currentDate: props.group.date });
    };
    const handleInfoMouseLeave = () => {
      setTimeout(() => {
        if (!isHoveringTooltip.value) {
          infoHoverTopic.value = null;
        }
      }, 120);
    };
    const handleAvailableDatesResponse = (e) => {
      const detail = e.detail;
      if (!detail) return;
      if (detail.currentDate !== props.group.date) return;
      availableDatesByTopic.value[detail.topic] = detail.availableDates || [];
    };
    const handleNavigateClick = (targetDate, topic) => {
      console.log("ðŸŽ¯ Tooltip navigation:", { targetDate, topic, currentDate: props.group.date });
      infoHoverTopic.value = null;
      if (targetDate === props.group.date) {
        console.log("ðŸ“ Same date navigation - expanding locally");
        isExpanded.value = true;
        expandedTopics.value[topic] = true;
        nextTick(() => {
          const el = document.getElementById(`date-group-${props.group.date}-topic-${topic}`);
          if (el && typeof el.scrollIntoView === "function") {
            el.scrollIntoView({ behavior: "smooth", block: "center" });
          }
        });
      } else {
        console.log("ðŸš€ Cross-date navigation - emitting to parent");
        emit("navigate-to-date-topic", { date: targetDate, topic });
      }
    };
    const handleOpenDateTopic = (e) => {
      const detail = e.detail;
      console.log("ðŸ“¨ Received open-date-topic event:", { detail, currentDate: props.group.date });
      if (!detail) {
        console.log("âŒ No detail in event");
        return;
      }
      if (detail.date !== props.group.date) {
        console.log("â­ï¸ Event not for this date group");
        return;
      }
      console.log("âœ… Opening accordion for cross-date navigation:", detail.topic);
      isExpanded.value = true;
      expandedTopics.value[detail.topic] = true;
      emit("accordion-toggle", props.group.date, true);
      if (props.accordionState) {
        props.accordionState[props.group.date] = true;
      }
      nextTick(() => {
        setTimeout(() => {
          const el = document.getElementById(`date-group-${props.group.date}-topic-${detail.topic}`);
          if (el && typeof el.scrollIntoView === "function") {
            console.log("ðŸŽ¯ Scrolling to topic element");
            el.scrollIntoView({ behavior: "smooth", block: "center" });
          } else {
            console.log("âŒ Topic element not found:", `date-group-${props.group.date}-topic-${detail.topic}`);
          }
          try {
            sessionStorage.removeItem(PENDING_OPEN_KEY);
          } catch {
          }
        }, 100);
      });
    };
    const isHoveringTooltip = ref(false);
    const handleTooltipMouseEnter = () => {
      isHoveringTooltip.value = true;
    };
    const handleTooltipMouseLeave = () => {
      isHoveringTooltip.value = false;
      infoHoverTopic.value = null;
    };
    onMounted(async () => {
      loadActionButtonsState();
      topicPaginationState.value = loadTopicPaginationState();
      if (props.accordionState && typeof props.accordionState[props.group.date] === "boolean") {
        isExpanded.value = props.accordionState[props.group.date];
      }
      const storedTopics = getStoredTopics();
      if (storedTopics[props.group.date]) {
        groupTopic.value = storedTopics[props.group.date];
      }
      window.addEventListener("vocabulary-list-mouse-leave", handleVocabularyListMouseLeave);
      window.addEventListener("vocabulary-list-mouse-enter", handleVocabularyListMouseEnter);
      startModalWatcher();
      await nextTick();
      await calculateHeight();
      try {
        const raw = sessionStorage.getItem(PENDING_OPEN_KEY);
        if (raw) {
          const pending = JSON.parse(raw);
          if (pending && pending.date === props.group.date) {
            console.log("ðŸ§­ Applying pending open on mount:", pending);
            isExpanded.value = true;
            expandedTopics.value[pending.topic] = true;
            emit("accordion-toggle", props.group.date, true);
            if (props.accordionState) {
              props.accordionState[props.group.date] = true;
            }
            nextTick(() => {
              setTimeout(() => {
                const el = document.getElementById(`date-group-${props.group.date}-topic-${pending.topic}`);
                if (el && typeof el.scrollIntoView === "function") {
                  el.scrollIntoView({ behavior: "smooth", block: "center" });
                }
              }, 100);
            });
            sessionStorage.removeItem(PENDING_OPEN_KEY);
          }
        }
      } catch (err) {
        console.warn("Failed to apply pending open-date-topic on mount:", err);
      }
      window.addEventListener("available-dates-response", handleAvailableDatesResponse);
      window.addEventListener("open-date-topic", handleOpenDateTopic);
    });
    onUnmounted(() => {
      window.removeEventListener("vocabulary-list-mouse-leave", handleVocabularyListMouseLeave);
      window.removeEventListener("vocabulary-list-mouse-enter", handleVocabularyListMouseEnter);
      stopModalWatcher();
      Object.keys(hoverTimeouts.value).forEach((topic) => {
        if (hoverTimeouts.value[topic]) {
          clearTimeout(hoverTimeouts.value[topic]);
        }
      });
      window.removeEventListener("available-dates-response", handleAvailableDatesResponse);
      window.removeEventListener("open-date-topic", handleOpenDateTopic);
    });
    const emit = __emit;
    return (_ctx, _cache) => {
      return openBlock(), createElementBlock("div", null, [
        createBaseVNode("div", _hoisted_1, [
          createBaseVNode("div", _hoisted_2, [
            createBaseVNode("div", _hoisted_3, [
              createBaseVNode("div", {
                onClick: toggleAccordion,
                class: "flex items-center justify-between mb-2 cursor-pointer py-1 -mx-1 px-1 rounded hover:bg-gray-50 dark:hover:bg-gray-custom transition-colors"
              }, [
                createBaseVNode("div", _hoisted_4, [
                  createBaseVNode("div", _hoisted_5, [
                    (openBlock(), createElementBlock("svg", {
                      class: normalizeClass(["w-2.5 h-2.5 text-gray-500 dark:text-gray-400 transition-transform duration-200", { "transform rotate-90": isExpanded.value }]),
                      fill: "currentColor",
                      viewBox: "0 0 20 20"
                    }, _cache[48] || (_cache[48] = [
                      createBaseVNode("path", {
                        "fill-rule": "evenodd",
                        d: "M7.293 14.707a1 1 0 010-1.414L10.586 10 7.293 6.707a1 1 0 011.414-1.414l4 4a1 1 0 010 1.414l-4 4a1 1 0 01-1.414 0z",
                        "clip-rule": "evenodd"
                      }, null, -1)
                    ]), 2))
                  ]),
                  createBaseVNode("h4", _hoisted_6, [
                    _cache[49] || (_cache[49] = createBaseVNode("svg", {
                      class: "w-2.5 h-2.5",
                      fill: "currentColor",
                      viewBox: "0 0 20 20"
                    }, [
                      createBaseVNode("path", {
                        "fill-rule": "evenodd",
                        d: "M6 2a1 1 0 00-1 1v1H4a2 2 0 00-2 2v10a2 2 0 002 2h12a2 2 0 002-2V6a2 2 0 00-2-2h-1V3a1 1 0 10-2 0v1H7V3a1 1 0 00-1-1zm0 5a1 1 0 000 2h8a1 1 0 100-2H6z",
                        "clip-rule": "evenodd"
                      })
                    ], -1)),
                    createBaseVNode("span", null, toDisplayString(_ctx.group.displayDate), 1),
                    createBaseVNode("span", _hoisted_7, " (" + toDisplayString(totalVocabularyCount.value) + ") ", 1)
                  ])
                ]),
                createBaseVNode("div", {
                  class: "flex items-center space-x-1",
                  onClick: _cache[1] || (_cache[1] = withModifiers(() => {
                  }, ["stop"]))
                }, [
                  createBaseVNode("label", _hoisted_8, [
                    withDirectives(createBaseVNode("input", {
                      type: "checkbox",
                      "onUpdate:modelValue": _cache[0] || (_cache[0] = ($event) => showActionButtons.value = $event),
                      class: "sr-only peer"
                    }, null, 512), [
                      [vModelCheckbox, showActionButtons.value]
                    ]),
                    _cache[50] || (_cache[50] = createBaseVNode("div", { class: "w-9 h-5 sm:w-11 sm:h-6 bg-gray-200 peer-focus:outline-none peer-focus:ring-1 peer-focus:ring-blue-300 dark:peer-focus:ring-blue-800 rounded-full peer dark:bg-gray-700 peer-checked:after:translate-x-full peer-checked:after:border-white after:content-[''] after:absolute after:top-[2px] after:left-[2px] after:bg-white after:border-gray-300 after:border after:rounded-full after:h-4 after:w-4 sm:after:h-5 sm:after:w-5 after:transition-all dark:border-gray-600 peer-checked:bg-blue-600" }, null, -1))
                  ])
                ]),
                isExpanded.value && _ctx.group.totalPages && _ctx.group.totalPages > 1 ? (openBlock(), createElementBlock("div", {
                  key: 0,
                  class: "flex items-center space-x-1",
                  onClick: _cache[4] || (_cache[4] = withModifiers(() => {
                  }, ["stop"]))
                }, [
                  createBaseVNode("button", {
                    onClick: _cache[2] || (_cache[2] = ($event) => _ctx.$emit("date-group-previous", _ctx.group.date)),
                    disabled: (_ctx.group.currentPage || 1) === 1,
                    class: "px-1.5 py-0.5 xs:px-2 xs:py-1 sm:px-3 sm:py-1 md:px-4 md:py-1.5 xl:px-4 xl:py-1.5 2xl:px-5 2xl:py-2 text-xs xs:text-xs sm:text-sm md:text-sm lg:text-base xl:text-base 2xl:text-lg border border-gray-300 dark:border-gray-600 rounded bg-white dark:bg-[#0a0a0a] text-gray-700 dark:text-gray-300 hover:bg-gray-50 dark:hover:bg-gray-600 disabled:opacity-50 disabled:cursor-not-allowed"
                  }, " â€¹ ", 8, _hoisted_9),
                  createBaseVNode("span", _hoisted_10, toDisplayString(_ctx.group.currentPage || 1) + "/" + toDisplayString(_ctx.group.totalPages), 1),
                  createBaseVNode("button", {
                    onClick: _cache[3] || (_cache[3] = ($event) => _ctx.$emit("date-group-next", _ctx.group.date)),
                    disabled: (_ctx.group.currentPage || 1) === _ctx.group.totalPages,
                    class: "px-1.5 py-0.5 xs:px-2 xs:py-1 sm:px-3 sm:py-1 md:px-4 md:py-1.5 xl:px-4 xl:py-1.5 2xl:px-5 2xl:py-2 text-xs xs:text-xs sm:text-sm md:text-sm lg:text-base xl:text-base 2xl:text-lg border border-gray-300 dark:border-gray-600 rounded bg-white dark:bg-[#0a0a0a] text-gray-700 dark:text-gray-300 hover:bg-gray-50 dark:hover:bg-gray-600 disabled:opacity-50 disabled:cursor-not-allowed"
                  }, " â€º ", 8, _hoisted_11)
                ])) : createCommentVNode("", true)
              ]),
              createBaseVNode("div", {
                class: "w-full",
                onClick: _cache[10] || (_cache[10] = withModifiers(() => {
                }, ["stop"]))
              }, [
                showTopicInput.value ? (openBlock(), createElementBlock("div", _hoisted_12, [
                  createBaseVNode("div", _hoisted_13, [
                    withDirectives(createBaseVNode("input", {
                      ref_key: "topicInput",
                      ref: topicInput,
                      "onUpdate:modelValue": _cache[5] || (_cache[5] = ($event) => topicInputValue.value = $event),
                      onKeyup: [
                        withKeys(saveTopic, ["enter"]),
                        withKeys(cancelTopicInput, ["escape"])
                      ],
                      type: "text",
                      placeholder: unref(t)("vocabulary.accordion.topicPlaceholder"),
                      class: "flex-1 px-3 py-2 text-xs border border-orange-300 dark:border-orange-600 rounded-md bg-white dark:bg-[#0a0a0a] text-gray-900 dark:text-gray-100 focus:outline-none focus:ring-2 focus:ring-orange-500 focus:border-transparent"
                    }, null, 40, _hoisted_14), [
                      [vModelText, topicInputValue.value]
                    ]),
                    createBaseVNode("button", {
                      onClick: saveTopic,
                      class: "px-2 py-2 text-xs bg-orange-600 hover:bg-orange-700 text-white rounded-md focus:outline-none focus:ring-2 focus:ring-orange-500 transition-colors",
                      "aria-label": unref(t)("vocabulary.accordion.saveTopic")
                    }, _cache[51] || (_cache[51] = [
                      createBaseVNode("svg", {
                        class: "w-3 h-3",
                        fill: "currentColor",
                        viewBox: "0 0 20 20"
                      }, [
                        createBaseVNode("path", {
                          "fill-rule": "evenodd",
                          d: "M16.707 5.293a1 1 0 010 1.414l-8 8a1 1 0 01-1.414 0l-4-4a1 1 0 011.414-1.414L8 12.586l7.293-7.293a1 1 0 011.414 0z",
                          "clip-rule": "evenodd"
                        })
                      ], -1)
                    ]), 8, _hoisted_15),
                    createBaseVNode("button", {
                      onClick: cancelTopicInput,
                      class: "px-2 py-2 text-xs bg-gray-500 hover:bg-gray-600 text-white rounded-md focus:outline-none focus:ring-2 focus:ring-gray-500 transition-colors dark:bg-blue-700 dark:hover:bg-blue-600 dark:focus:ring-blue-500",
                      "aria-label": unref(t)("vocabulary.accordion.cancelTopic")
                    }, _cache[52] || (_cache[52] = [
                      createBaseVNode("svg", {
                        class: "w-3 h-3",
                        fill: "currentColor",
                        viewBox: "0 0 20 20"
                      }, [
                        createBaseVNode("path", {
                          "fill-rule": "evenodd",
                          d: "M4.293 4.293a1 1 0 011.414 0L10 8.586l4.293-4.293a1 1 0 111.414 1.414L11.414 10l4.293 4.293a1 1 0 01-1.414 1.414L10 11.414l-4.293 4.293a1 1 0 01-1.414-1.414L8.586 10 4.293 5.707a1 1 0 010-1.414z",
                          "clip-rule": "evenodd"
                        })
                      ], -1)
                    ]), 8, _hoisted_16)
                  ])
                ])) : (openBlock(), createElementBlock("div", _hoisted_17, [
                  groupTopic.value ? (openBlock(), createElementBlock("div", _hoisted_18, [
                    createBaseVNode("div", _hoisted_19, [
                      _cache[55] || (_cache[55] = createBaseVNode("svg", {
                        class: "w-3 h-3 text-orange-600 dark:text-orange-400 flex-shrink-0",
                        fill: "currentColor",
                        viewBox: "0 0 20 20"
                      }, [
                        createBaseVNode("path", {
                          "fill-rule": "evenodd",
                          d: "M18 10a8 8 0 11-16 0 8 8 0 0116 0zm-7-4a1 1 0 11-2 0 1 1 0 012 0zM9 9a1 1 0 000 2v3a1 1 0 001 1h1a1 1 0 100-2v-3a1 1 0 00-1-1H9z",
                          "clip-rule": "evenodd"
                        })
                      ], -1)),
                      createBaseVNode("div", _hoisted_20, [
                        createBaseVNode("span", {
                          ref_key: "topicSpanMobile",
                          ref: topicSpanMobile,
                          class: "text-xs font-medium text-orange-700 dark:text-orange-300 truncate block cursor-default",
                          onMouseenter: _cache[6] || (_cache[6] = ($event) => showTopicTooltip.value = true),
                          onMouseleave: _cache[7] || (_cache[7] = ($event) => showTopicTooltip.value = false)
                        }, toDisplayString(groupTopic.value), 545),
                        showTopicTooltip.value && isTopicTruncated.value ? (openBlock(), createElementBlock("div", _hoisted_21, [
                          createTextVNode(toDisplayString(groupTopic.value) + " ", 1),
                          _cache[53] || (_cache[53] = createBaseVNode("div", { class: "absolute top-full left-1/2 transform -translate-x-1/2 border-4 border-transparent border-t-gray-900 dark:border-t-gray-700" }, null, -1))
                        ])) : createCommentVNode("", true)
                      ]),
                      createBaseVNode("button", {
                        onClick: withModifiers(editTopic, ["stop"]),
                        class: "text-orange-600 dark:text-orange-400 hover:text-orange-700 dark:hover:text-orange-300 focus:outline-none flex-shrink-0 p-0.5 rounded hover:bg-orange-100 dark:hover:bg-orange-800/50 transition-colors",
                        "aria-label": unref(t)("vocabulary.accordion.editTopic")
                      }, _cache[54] || (_cache[54] = [
                        createBaseVNode("svg", {
                          class: "w-3 h-3",
                          fill: "currentColor",
                          viewBox: "0 0 20 20"
                        }, [
                          createBaseVNode("path", { d: "M13.586 3.586a2 2 0 112.828 2.828l-.793.793-2.828-2.828.793-.793zM11.379 5.793L3 14.172V17h2.828l8.38-8.379-2.83-2.828z" })
                        ], -1)
                      ]), 8, _hoisted_22)
                    ])
                  ])) : createCommentVNode("", true),
                  createBaseVNode("div", _hoisted_23, [
                    !groupTopic.value ? (openBlock(), createElementBlock("button", {
                      key: 0,
                      onClick: _cache[8] || (_cache[8] = withModifiers(($event) => showTopicInput.value = true, ["stop"])),
                      class: "flex flex-col items-center justify-center p-2 sm:p-3 text-xs sm:text-sm font-medium text-orange-600 dark:text-orange-400 hover:text-orange-700 dark:hover:text-orange-300 hover:bg-orange-50 dark:hover:bg-orange-900/50 rounded-md border border-dashed border-orange-300 dark:border-orange-600 hover:border-orange-400 dark:hover:border-orange-500 transition-all duration-200 focus:outline-none focus:ring-1 focus:ring-orange-500 min-h-[56px] sm:min-h-[64px] hover:scale-[1.02]",
                      "aria-label": unref(t)("vocabulary.accordion.addTopic", "Add Topic")
                    }, [
                      _cache[56] || (_cache[56] = createBaseVNode("svg", {
                        class: "w-3.5 h-3.5 sm:w-4 sm:h-4 mb-0.5",
                        fill: "currentColor",
                        viewBox: "0 0 20 20"
                      }, [
                        createBaseVNode("path", {
                          "fill-rule": "evenodd",
                          d: "M10 3a1 1 0 011 1v5h5a1 1 0 110 2h-5v5a1 1 0 11-2 0v-5H4a1 1 0 110-2h5V4a1 1 0 011-1z",
                          "clip-rule": "evenodd"
                        })
                      ], -1)),
                      createBaseVNode("span", _hoisted_25, toDisplayString(unref(t)("vocabulary.accordion.addTopic", "Add Topic")), 1)
                    ], 8, _hoisted_24)) : createCommentVNode("", true),
                    showActionButtons.value ? (openBlock(), createElementBlock("div", _hoisted_26, [
                      createVNode(unref(VocabularyNoteButton), {
                        date: _ctx.group.date,
                        "is-today": isTodayGroup.value,
                        class: normalizeClass("w-full flex flex-col items-center justify-center p-2 sm:p-3 text-xs sm:text-sm font-medium min-h-[56px] sm:min-h-[64px] hover:scale-[1.02] transition-all duration-200 rounded-md"),
                        onOpenNoteDialog: _cache[9] || (_cache[9] = () => emit("open-note-dialog", { date: _ctx.group.date, words: _ctx.group.vocabularies }))
                      }, null, 8, ["date", "is-today"])
                    ])) : createCommentVNode("", true),
                    showActionButtons.value ? (openBlock(), createElementBlock("button", {
                      key: 2,
                      onClick: withModifiers(openAddVocabularyDialog, ["stop"]),
                      class: "flex flex-col items-center justify-center p-2 sm:p-3 text-xs sm:text-sm font-medium text-blue-600 dark:text-blue-400 hover:text-blue-800 dark:hover:text-blue-200 hover:bg-blue-50 dark:hover:bg-blue-900/50 rounded-md border border-dashed border-blue-300 dark:border-blue-600 hover:border-blue-400 dark:hover:border-blue-500 transition-all duration-200 focus:outline-none focus:ring-1 focus:ring-blue-500 min-h-[56px] sm:min-h-[64px] hover:scale-[1.02]",
                      "aria-label": unref(t)("vocabulary.addWord", "Add Word")
                    }, [
                      _cache[57] || (_cache[57] = createBaseVNode("svg", {
                        class: "w-3.5 h-3.5 sm:w-4 sm:h-4 mb-0.5",
                        fill: "currentColor",
                        viewBox: "0 0 20 20"
                      }, [
                        createBaseVNode("path", {
                          "fill-rule": "evenodd",
                          d: "M10 3a1 1 0 011 1v5h5a1 1 0 110 2h-5v5a1 1 0 11-2 0v-5H4a1 1 0 110-2h5V4a1 1 0 011-1z",
                          "clip-rule": "evenodd"
                        })
                      ], -1)),
                      createBaseVNode("span", _hoisted_28, toDisplayString(unref(t)("vocabulary.addWord", "Add Word")), 1)
                    ], 8, _hoisted_27)) : createCommentVNode("", true),
                    showActionButtons.value ? (openBlock(), createElementBlock("div", _hoisted_29, [
                      createVNode(unref(GrammarManagerButton), {
                        date: _ctx.group.date,
                        class: normalizeClass("w-full flex flex-col items-center justify-center p-2 sm:p-3 text-xs sm:text-sm font-medium min-h-[56px] sm:min-h-[64px] hover:scale-[1.02] transition-all duration-200 rounded-md"),
                        onOpenGrammarManager: openGrammarManager
                      }, null, 8, ["date"])
                    ])) : createCommentVNode("", true)
                  ])
                ]))
              ])
            ]),
            createBaseVNode("div", _hoisted_30, [
              createBaseVNode("div", {
                onClick: toggleAccordion,
                class: "flex items-center justify-between cursor-pointer py-1 -mx-1 px-1 rounded hover:bg-gray-50 dark:hover:bg-gray-custom transition-colors"
              }, [
                createBaseVNode("div", _hoisted_31, [
                  createBaseVNode("div", _hoisted_32, [
                    (openBlock(), createElementBlock("svg", {
                      class: normalizeClass(["w-3 xs:w-3.5 sm:w-4 h-3 xs:h-3.5 sm:h-4 text-gray-500 dark:text-gray-400 transition-transform duration-200", { "transform rotate-90": isExpanded.value }]),
                      fill: "currentColor",
                      viewBox: "0 0 20 20"
                    }, _cache[58] || (_cache[58] = [
                      createBaseVNode("path", {
                        "fill-rule": "evenodd",
                        d: "M7.293 14.707a1 1 0 010-1.414L10.586 10 7.293 6.707a1 1 0 011.414-1.414l4 4a1 1 0 010 1.414l-4 4a1 1 0 01-1.414 0z",
                        "clip-rule": "evenodd"
                      }, null, -1)
                    ]), 2))
                  ]),
                  createBaseVNode("h4", _hoisted_33, [
                    _cache[59] || (_cache[59] = createBaseVNode("svg", {
                      class: "w-3 md:w-4 lg:w-4 xl:w-5 xl:h-5 2xl:w-6 2xl:h-6 h-3 md:h-4 lg:h-4",
                      fill: "currentColor",
                      viewBox: "0 0 20 20"
                    }, [
                      createBaseVNode("path", {
                        "fill-rule": "evenodd",
                        d: "M6 2a1 1 0 00-1 1v1H4a2 2 0 00-2 2v10a2 2 0 002 2h12a2 2 0 002-2V6a2 2 0 00-2-2h-1V3a1 1 0 10-2 0v1H7V3a1 1 0 00-1-1zm0 5a1 1 0 000 2h8a1 1 0 100-2H6z",
                        "clip-rule": "evenodd"
                      })
                    ], -1)),
                    createBaseVNode("span", null, toDisplayString(_ctx.group.displayDate), 1),
                    createBaseVNode("span", _hoisted_34, " (" + toDisplayString(totalVocabularyCount.value) + " " + toDisplayString(unref(t)("vocabulary.words", "words")) + ") ", 1)
                  ])
                ]),
                createBaseVNode("div", {
                  class: "lg:hidden flex items-center space-x-2",
                  onClick: _cache[12] || (_cache[12] = withModifiers(() => {
                  }, ["stop"]))
                }, [
                  createBaseVNode("label", _hoisted_35, [
                    withDirectives(createBaseVNode("input", {
                      type: "checkbox",
                      "onUpdate:modelValue": _cache[11] || (_cache[11] = ($event) => showActionButtons.value = $event),
                      class: "sr-only peer"
                    }, null, 512), [
                      [vModelCheckbox, showActionButtons.value]
                    ]),
                    _cache[60] || (_cache[60] = createBaseVNode("div", { class: "w-7 h-4 bg-gray-200 peer-focus:outline-none peer-focus:ring-1 peer-focus:ring-blue-300 dark:peer-focus:ring-blue-800 rounded-full peer dark:bg-gray-700 peer-checked:after:translate-x-full peer-checked:after:border-white after:content-[''] after:absolute after:top-[2px] after:left-[2px] after:bg-white after:border-gray-300 after:border after:rounded-full after:h-3 after:w-3 after:transition-all dark:border-gray-600 peer-checked:bg-blue-600" }, null, -1))
                  ])
                ]),
                createBaseVNode("div", _hoisted_36, [
                  isExpanded.value && _ctx.group.totalPages && _ctx.group.totalPages > 1 ? (openBlock(), createElementBlock("div", {
                    key: 0,
                    class: "flex items-center space-x-2",
                    onClick: _cache[15] || (_cache[15] = withModifiers(() => {
                    }, ["stop"]))
                  }, [
                    createBaseVNode("button", {
                      onClick: _cache[13] || (_cache[13] = ($event) => _ctx.$emit("date-group-previous", _ctx.group.date)),
                      disabled: (_ctx.group.currentPage || 1) === 1,
                      class: "px-2 md:px-2 py-1 md:py-1.5 xl:py-1.5 2xl:py-1.5 xl:px-3 xl:py-1.5 2xl:px-4 2xl:py-2 text-xs xs:text-xs sm:text-sm md:text-sm lg:text-base xl:text-sm 2xl:text-base border border-gray-300 dark:border-gray-600 rounded bg-white dark:bg-[#0a0a0a] text-gray-700 dark:text-gray-300 hover:bg-gray-50 dark:hover:bg-gray-600 disabled:opacity-50 disabled:cursor-not-allowed"
                    }, toDisplayString(unref(t)("common.previous")), 9, _hoisted_37),
                    createBaseVNode("span", _hoisted_38, toDisplayString(_ctx.group.currentPage || 1) + " / " + toDisplayString(_ctx.group.totalPages), 1),
                    createBaseVNode("button", {
                      onClick: _cache[14] || (_cache[14] = ($event) => _ctx.$emit("date-group-next", _ctx.group.date)),
                      disabled: (_ctx.group.currentPage || 1) === _ctx.group.totalPages,
                      class: "px-2 md:px-2 py-1 md:py-1.5 xl:py-1.5 2xl:py-1.5 xl:px-3 xl:py-1.5 2xl:px-4 2xl:py-2 text-xs xs:text-xs sm:text-sm md:text-sm lg:text-base xl:text-sm 2xl:text-base border border-gray-300 dark:border-gray-600 rounded bg-white dark:bg-[#0a0a0a] text-gray-700 dark:text-gray-300 hover:bg-gray-50 dark:hover:bg-gray-600 disabled:opacity-50 disabled:cursor-not-allowed"
                    }, toDisplayString(unref(t)("common.next")), 9, _hoisted_39)
                  ])) : createCommentVNode("", true),
                  createBaseVNode("div", {
                    class: "flex items-center space-x-2",
                    onClick: _cache[17] || (_cache[17] = withModifiers(() => {
                    }, ["stop"]))
                  }, [
                    createBaseVNode("label", _hoisted_40, [
                      withDirectives(createBaseVNode("input", {
                        type: "checkbox",
                        "onUpdate:modelValue": _cache[16] || (_cache[16] = ($event) => showActionButtons.value = $event),
                        class: "sr-only peer"
                      }, null, 512), [
                        [vModelCheckbox, showActionButtons.value]
                      ]),
                      _cache[61] || (_cache[61] = createBaseVNode("div", { class: "w-9 h-5 sm:w-11 sm:h-6 bg-gray-200 peer-focus:outline-none peer-focus:ring-2 peer-focus:ring-blue-300 dark:peer-focus:ring-blue-800 rounded-full peer dark:bg-gray-700 peer-checked:after:translate-x-full peer-checked:after:border-white after:content-[''] after:absolute after:top-[2px] after:left-[2px] after:bg-white after:border-gray-300 after:border after:rounded-full after:h-4 after:w-4 sm:after:h-5 sm:after:w-5 after:transition-all dark:border-gray-600 peer-checked:bg-blue-600" }, null, -1))
                    ]),
                    createBaseVNode("span", _hoisted_41, toDisplayString(unref(t)("common.actions", "Actions")), 1)
                  ])
                ])
              ]),
              isExpanded.value && _ctx.group.totalPages && _ctx.group.totalPages > 1 ? (openBlock(), createElementBlock("div", {
                key: 0,
                class: "lg:hidden flex items-center justify-center space-x-1 mt-2",
                onClick: _cache[20] || (_cache[20] = withModifiers(() => {
                }, ["stop"]))
              }, [
                createBaseVNode("button", {
                  onClick: _cache[18] || (_cache[18] = ($event) => _ctx.$emit("date-group-previous", _ctx.group.date)),
                  disabled: (_ctx.group.currentPage || 1) === 1,
                  class: "px-1.5 py-0.5 xs:px-2 xs:py-1 sm:px-3 sm:py-1 md:px-4 md:py-1.5 text-xs xs:text-xs sm:text-sm md:text-sm border border-gray-300 dark:border-gray-600 rounded bg-white dark:bg-[#0a0a0a] text-gray-700 dark:text-gray-300 hover:bg-gray-50 dark:hover:bg-gray-600 disabled:opacity-50 disabled:cursor-not-allowed"
                }, " â€¹ ", 8, _hoisted_42),
                createBaseVNode("span", _hoisted_43, toDisplayString(_ctx.group.currentPage || 1) + "/" + toDisplayString(_ctx.group.totalPages), 1),
                createBaseVNode("button", {
                  onClick: _cache[19] || (_cache[19] = ($event) => _ctx.$emit("date-group-next", _ctx.group.date)),
                  disabled: (_ctx.group.currentPage || 1) === _ctx.group.totalPages,
                  class: "px-1.5 py-0.5 xs:px-2 xs:py-1 sm:px-3 sm:py-1 md:px-4 md:py-1.5 text-xs xs:text-xs sm:text-sm md:text-sm border border-gray-300 dark:border-gray-600 rounded bg-white dark:bg-[#0a0a0a] text-gray-700 dark:text-gray-300 hover:bg-gray-50 dark:hover:bg-gray-600 disabled:opacity-50 disabled:cursor-not-allowed"
                }, " â€º ", 8, _hoisted_44)
              ])) : createCommentVNode("", true),
              createBaseVNode("div", {
                class: "lg:hidden flex items-center justify-center space-x-2 mt-2",
                onClick: _cache[26] || (_cache[26] = withModifiers(() => {
                }, ["stop"]))
              }, [
                !showTopicInput.value ? (openBlock(), createElementBlock("div", _hoisted_45, [
                  groupTopic.value ? (openBlock(), createElementBlock("div", _hoisted_46, [
                    _cache[64] || (_cache[64] = createBaseVNode("svg", {
                      class: "w-2.5 xs:w-3 sm:w-3 md:w-4 h-2.5 xs:h-3 sm:h-3 md:h-4 text-orange-600 dark:text-orange-400",
                      fill: "currentColor",
                      viewBox: "0 0 20 20"
                    }, [
                      createBaseVNode("path", {
                        "fill-rule": "evenodd",
                        d: "M18 10a8 8 0 11-16 0 8 8 0 0116 0zm-7-4a1 1 0 11-2 0 1 1 0 012 0zM9 9a1 1 0 000 2v3a1 1 0 001 1h1a1 1 0 100-2v-3a1 1 0 00-1-1H9z",
                        "clip-rule": "evenodd"
                      })
                    ], -1)),
                    createBaseVNode("div", _hoisted_47, [
                      createBaseVNode("span", {
                        ref: "topicSpanTablet",
                        class: "font-medium text-orange-700 dark:text-orange-300 truncate max-w-[80px] sm:max-w-none block cursor-default text-xs xs:text-xs sm:text-sm md:text-sm",
                        onMouseenter: _cache[21] || (_cache[21] = ($event) => showTopicTooltip.value = true),
                        onMouseleave: _cache[22] || (_cache[22] = ($event) => showTopicTooltip.value = false)
                      }, toDisplayString(groupTopic.value), 545),
                      showTopicTooltip.value && isTopicTruncated.value ? (openBlock(), createElementBlock("div", _hoisted_48, [
                        createTextVNode(toDisplayString(groupTopic.value) + " ", 1),
                        _cache[62] || (_cache[62] = createBaseVNode("div", { class: "absolute top-full left-1/2 transform -translate-x-1/2 border-4 border-transparent border-t-gray-900 dark:border-t-gray-700" }, null, -1))
                      ])) : createCommentVNode("", true)
                    ]),
                    createBaseVNode("button", {
                      onClick: withModifiers(editTopic, ["stop"]),
                      class: "text-orange-600 dark:text-orange-400 hover:text-orange-800 dark:hover:text-orange-200 focus:outline-none flex-shrink-0",
                      "aria-label": unref(t)("vocabulary.accordion.editTopic")
                    }, _cache[63] || (_cache[63] = [
                      createBaseVNode("svg", {
                        class: "w-2.5 xs:w-3 sm:w-3 md:w-4 h-2.5 xs:h-3 sm:h-3 md:h-4",
                        fill: "currentColor",
                        viewBox: "0 0 20 20"
                      }, [
                        createBaseVNode("path", { d: "M13.586 3.586a2 2 0 112.828 2.828l-.793.793-2.828-2.828.793-.793zM11.379 5.793L3 14.172V17h2.828l8.38-8.379-2.83-2.828z" })
                      ], -1)
                    ]), 8, _hoisted_49)
                  ])) : (openBlock(), createElementBlock("button", {
                    key: 1,
                    onClick: _cache[23] || (_cache[23] = withModifiers(($event) => showTopicInput.value = true, ["stop"])),
                    class: "flex items-center space-x-0.5 xs:space-x-1 sm:space-x-1 md:space-x-1.5 px-2 xs:px-2.5 sm:px-3 md:px-4 py-0.5 xs:py-1 sm:py-1 md:py-1.5 text-xs xs:text-xs sm:text-sm md:text-sm bg-orange-50 hover:bg-orange-100 dark:bg-orange-900/20 dark:hover:bg-orange-800/30 text-orange-600 dark:text-orange-400 rounded-full border border-orange-200 dark:border-orange-800 cursor-pointer transition-colors duration-150",
                    "aria-label": unref(t)("vocabulary.accordion.addTopic", "Add Topic")
                  }, [
                    _cache[65] || (_cache[65] = createBaseVNode("svg", {
                      class: "w-3 md:w-4 h-3 md:h-4",
                      fill: "currentColor",
                      viewBox: "0 0 20 20"
                    }, [
                      createBaseVNode("path", {
                        "fill-rule": "evenodd",
                        d: "M10 3a1 1 0 011 1v5h5a1 1 0 110 2h-5v5a1 1 0 11-2 0v-5H4a1 1 0 110-2h5V4a1 1 0 011-1z",
                        "clip-rule": "evenodd"
                      })
                    ], -1)),
                    createBaseVNode("span", _hoisted_51, toDisplayString(unref(t)("vocabulary.accordion.addTopic", "Add Topic")), 1)
                  ], 8, _hoisted_50)),
                  showActionButtons.value ? (openBlock(), createElementBlock(Fragment, { key: 2 }, [
                    createVNode(unref(VocabularyNoteButton), {
                      date: _ctx.group.date,
                      "is-today": isTodayGroup.value,
                      onOpenNoteDialog: _cache[24] || (_cache[24] = () => emit("open-note-dialog", { date: _ctx.group.date, words: _ctx.group.vocabularies }))
                    }, null, 8, ["date", "is-today"]),
                    createBaseVNode("button", {
                      onClick: openAddVocabularyDialog,
                      class: "flex items-center space-x-1 md:space-x-1.5 px-2 xs:px-2.5 sm:px-3 md:px-4 py-0.5 xs:py-1 sm:py-1 md:py-1.5 text-xs md:text-sm font-medium text-blue-600 dark:text-blue-400 hover:text-blue-800 dark:hover:text-blue-200 hover:bg-blue-50 dark:hover:bg-blue-900/50 rounded-full border border-dashed border-blue-300 dark:border-blue-600 hover:border-blue-400 dark:hover:border-blue-500 transition-colors focus:outline-none focus:ring-2 focus:ring-blue-500",
                      "aria-label": unref(t)("vocabulary.addWord", "Add Word")
                    }, [
                      _cache[66] || (_cache[66] = createBaseVNode("svg", {
                        class: "w-3 md:w-4 h-3 md:h-4",
                        fill: "currentColor",
                        viewBox: "0 0 20 20"
                      }, [
                        createBaseVNode("path", {
                          "fill-rule": "evenodd",
                          d: "M10 3a1 1 0 011 1v5h5a1 1 0 110 2h-5v5a1 1 0 11-2 0v-5H4a1 1 0 110-2h5V4a1 1 0 011-1z",
                          "clip-rule": "evenodd"
                        })
                      ], -1)),
                      createBaseVNode("span", null, toDisplayString(unref(t)("vocabulary.addWord", "Add Word")), 1)
                    ], 8, _hoisted_52),
                    createVNode(unref(GrammarManagerButton), {
                      date: _ctx.group.date,
                      onOpenGrammarManager: openGrammarManager
                    }, null, 8, ["date"])
                  ], 64)) : createCommentVNode("", true)
                ])) : (openBlock(), createElementBlock("div", _hoisted_53, [
                  withDirectives(createBaseVNode("input", {
                    ref: "topicInputTablet",
                    "onUpdate:modelValue": _cache[25] || (_cache[25] = ($event) => topicInputValue.value = $event),
                    onKeyup: [
                      withKeys(saveTopic, ["enter"]),
                      withKeys(cancelTopicInput, ["escape"])
                    ],
                    type: "text",
                    placeholder: unref(t)("vocabulary.accordion.topicPlaceholder"),
                    class: "flex-1 px-2 xs:px-2 sm:px-2 md:px-2 py-0.5 xs:py-1 sm:py-1 md:py-1.5 xl:py-1.5 2xl:py-1.5 text-xs border border-orange-300 dark:border-orange-600 rounded-md bg-white dark:bg-[#0a0a0a] text-gray-900 dark:text-gray-100 focus:outline-none focus:ring-2 focus:ring-orange-500 focus:border-transparent"
                  }, null, 40, _hoisted_54), [
                    [vModelText, topicInputValue.value]
                  ]),
                  createBaseVNode("button", {
                    onClick: saveTopic,
                    class: "px-1.5 xs:px-2 sm:px-2 md:px-2 py-0.5 xs:py-1 sm:py-1 md:py-1.5 xl:py-1.5 2xl:py-1.5 text-xs bg-orange-600 hover:bg-orange-700 text-white rounded-md focus:outline-none focus:ring-2 focus:ring-orange-500 transition-colors",
                    "aria-label": unref(t)("vocabulary.accordion.saveTopic")
                  }, _cache[67] || (_cache[67] = [
                    createBaseVNode("svg", {
                      class: "w-3 h-3",
                      fill: "currentColor",
                      viewBox: "0 0 20 20"
                    }, [
                      createBaseVNode("path", {
                        "fill-rule": "evenodd",
                        d: "M16.707 5.293a1 1 0 010 1.414l-8 8a1 1 0 01-1.414 0l-4-4a1 1 0 011.414-1.414L8 12.586l7.293-7.293a1 1 0 011.414 0z",
                        "clip-rule": "evenodd"
                      })
                    ], -1)
                  ]), 8, _hoisted_55),
                  createBaseVNode("button", {
                    onClick: cancelTopicInput,
                    class: "px-1.5 xs:px-2 sm:px-2 md:px-2 py-0.5 xs:py-1 sm:py-1 md:py-1.5 xl:py-1.5 2xl:py-1.5 text-xs bg-gray-500 hover:bg-gray-600 text-white rounded-md focus:outline-none focus:ring-2 focus:ring-gray-500 transition-colors",
                    "aria-label": unref(t)("vocabulary.accordion.cancelTopic")
                  }, _cache[68] || (_cache[68] = [
                    createBaseVNode("svg", {
                      class: "w-3 h-3",
                      fill: "currentColor",
                      viewBox: "0 0 20 20"
                    }, [
                      createBaseVNode("path", {
                        "fill-rule": "evenodd",
                        d: "M4.293 4.293a1 1 0 011.414 0L10 8.586l4.293-4.293a1 1 0 111.414 1.414L11.414 10l4.293 4.293a1 1 0 01-1.414 1.414L10 11.414l-4.293 4.293a1 1 0 01-1.414-1.414L8.586 10 4.293 5.707a1 1 0 010-1.414z",
                        "clip-rule": "evenodd"
                      })
                    ], -1)
                  ]), 8, _hoisted_56)
                ]))
              ])
            ]),
            createBaseVNode("div", _hoisted_57, [
              createBaseVNode("div", {
                onClick: toggleAccordion,
                class: "flex items-center justify-between flex-wrap gap-1 cursor-pointer py-1 -mx-1 px-1 rounded hover:bg-gray-50 dark:hover:bg-gray-custom transition-colors"
              }, [
                createBaseVNode("div", _hoisted_58, [
                  !showTopicInput.value ? (openBlock(), createElementBlock("div", _hoisted_59, [
                    groupTopic.value ? (openBlock(), createElementBlock("div", _hoisted_60, [
                      _cache[71] || (_cache[71] = createBaseVNode("svg", {
                        class: "w-3 md:w-4 lg:w-4 xl:w-5 xl:h-5 2xl:w-6 2xl:h-6 h-3 md:h-4 lg:h-4 text-orange-600 dark:text-orange-400",
                        fill: "currentColor",
                        viewBox: "0 0 20 20"
                      }, [
                        createBaseVNode("path", {
                          "fill-rule": "evenodd",
                          d: "M18 10a8 8 0 11-16 0 8 8 0 0116 0zm-7-4a1 1 0 11-2 0 1 1 0 012 0zM9 9a1 1 0 000 2v3a1 1 0 001 1h1a1 1 0 100-2v-3a1 1 0 00-1-1H9z",
                          "clip-rule": "evenodd"
                        })
                      ], -1)),
                      createBaseVNode("div", _hoisted_61, [
                        createBaseVNode("span", {
                          ref_key: "topicSpanDesktop",
                          ref: topicSpanDesktop,
                          class: "text-xs md:text-sm lg:text-base xl:text-sm 2xl:text-base font-medium text-orange-700 dark:text-orange-300 truncate max-w-[80px] sm:max-w-none block cursor-default",
                          onMouseenter: _cache[27] || (_cache[27] = ($event) => showTopicTooltip.value = true),
                          onMouseleave: _cache[28] || (_cache[28] = ($event) => showTopicTooltip.value = false)
                        }, toDisplayString(groupTopic.value), 545),
                        showTopicTooltip.value && isTopicTruncated.value ? (openBlock(), createElementBlock("div", _hoisted_62, [
                          createTextVNode(toDisplayString(groupTopic.value) + " ", 1),
                          _cache[69] || (_cache[69] = createBaseVNode("div", { class: "absolute top-full left-1/2 transform -translate-x-1/2 border-4 border-transparent border-t-gray-900 dark:border-t-gray-700" }, null, -1))
                        ])) : createCommentVNode("", true)
                      ]),
                      createBaseVNode("button", {
                        onClick: withModifiers(editTopic, ["stop"]),
                        class: "text-orange-600 dark:text-orange-400 hover:text-orange-800 dark:hover:text-orange-200 focus:outline-none flex-shrink-0",
                        "aria-label": unref(t)("vocabulary.accordion.editTopic")
                      }, _cache[70] || (_cache[70] = [
                        createBaseVNode("svg", {
                          class: "w-3 md:w-4 lg:w-4 xl:w-5 xl:h-5 2xl:w-6 2xl:h-6 h-3 md:h-4 lg:h-4",
                          fill: "currentColor",
                          viewBox: "0 0 20 20"
                        }, [
                          createBaseVNode("path", { d: "M13.586 3.586a2 2 0 112.828 2.828l-.793.793-2.828-2.828.793-.793zM11.379 5.793L3 14.172V17h2.828l8.38-8.379-2.83-2.828z" })
                        ], -1)
                      ]), 8, _hoisted_63)
                    ])) : (openBlock(), createElementBlock("button", {
                      key: 1,
                      onClick: _cache[29] || (_cache[29] = withModifiers(($event) => showTopicInput.value = true, ["stop"])),
                      class: "flex items-center space-x-1 md:space-x-1.5 px-2 xs:px-2.5 sm:px-3 md:px-4 py-0.5 xs:py-1 sm:py-1 md:py-1.5 text-xs md:text-sm lg:text-base xl:text-sm 2xl:text-base font-medium bg-orange-50 hover:bg-orange-100 dark:bg-orange-900/20 dark:hover:bg-orange-800/30 text-orange-600 dark:text-orange-400 rounded-full border border-dashed border-orange-200 dark:border-orange-800 hover:border-orange-400 dark:hover:border-orange-500 transition-colors focus:outline-none focus:ring-2 focus:ring-orange-500",
                      "aria-label": unref(t)("vocabulary.accordion.addTopic", "Add Topic")
                    }, [
                      _cache[72] || (_cache[72] = createBaseVNode("svg", {
                        class: "w-3 md:w-4 lg:w-4 xl:w-5 xl:h-5 2xl:w-6 2xl:h-6 h-3 md:h-4 lg:h-4",
                        fill: "currentColor",
                        viewBox: "0 0 20 20"
                      }, [
                        createBaseVNode("path", {
                          "fill-rule": "evenodd",
                          d: "M10 3a1 1 0 011 1v5h5a1 1 0 110 2h-5v5a1 1 0 11-2 0v-5H4a1 1 0 110-2h5V4a1 1 0 011-1z",
                          "clip-rule": "evenodd"
                        })
                      ], -1)),
                      createBaseVNode("span", null, toDisplayString(unref(t)("vocabulary.accordion.addTopic", "Add Topic")), 1)
                    ], 8, _hoisted_64)),
                    showActionButtons.value ? (openBlock(), createElementBlock(Fragment, { key: 2 }, [
                      createBaseVNode("div", {
                        class: "flex-shrink-0",
                        onClick: _cache[31] || (_cache[31] = withModifiers(() => {
                        }, ["stop"]))
                      }, [
                        createVNode(unref(VocabularyNoteButton), {
                          date: _ctx.group.date,
                          "is-today": isTodayGroup.value,
                          onOpenNoteDialog: _cache[30] || (_cache[30] = () => emit("open-note-dialog", { date: _ctx.group.date, words: _ctx.group.vocabularies }))
                        }, null, 8, ["date", "is-today"])
                      ]),
                      createBaseVNode("div", {
                        class: "flex-shrink-0",
                        onClick: _cache[32] || (_cache[32] = withModifiers(() => {
                        }, ["stop"]))
                      }, [
                        createBaseVNode("button", {
                          onClick: openAddVocabularyDialog,
                          class: "flex items-center space-x-1 md:space-x-1.5 px-2 xs:px-2.5 sm:px-3 md:px-4 py-0.5 xs:py-1 sm:py-1 md:py-1.5 text-xs md:text-sm lg:text-base xl:text-sm 2xl:text-base font-medium text-blue-600 dark:text-blue-400 hover:text-blue-800 dark:hover:text-blue-200 hover:bg-blue-50 dark:hover:bg-blue-900/50 rounded-full border border-dashed border-blue-300 dark:border-blue-600 hover:border-blue-400 dark:hover:border-blue-500 transition-colors focus:outline-none focus:ring-2 focus:ring-blue-500",
                          "aria-label": unref(t)("vocabulary.addWord", "Add Word")
                        }, [
                          _cache[73] || (_cache[73] = createBaseVNode("svg", {
                            class: "w-3 md:w-4 lg:w-4 xl:w-5 xl:h-5 2xl:w-6 2xl:h-6 h-3 md:h-4 lg:h-4",
                            fill: "currentColor",
                            viewBox: "0 0 20 20"
                          }, [
                            createBaseVNode("path", {
                              "fill-rule": "evenodd",
                              d: "M10 3a1 1 0 011 1v5h5a1 1 0 110 2h-5v5a1 1 0 11-2 0v-5H4a1 1 0 110-2h5V4a1 1 0 011-1z",
                              "clip-rule": "evenodd"
                            })
                          ], -1)),
                          createBaseVNode("span", null, toDisplayString(unref(t)("vocabulary.addWord", "Add Word")), 1)
                        ], 8, _hoisted_65)
                      ]),
                      createBaseVNode("div", {
                        class: "flex-shrink-0",
                        onClick: _cache[33] || (_cache[33] = withModifiers(() => {
                        }, ["stop"]))
                      }, [
                        createVNode(unref(GrammarManagerButton), {
                          date: _ctx.group.date,
                          onOpenGrammarManager: openGrammarManager
                        }, null, 8, ["date"])
                      ])
                    ], 64)) : createCommentVNode("", true)
                  ])) : (openBlock(), createElementBlock("div", {
                    key: 1,
                    class: "flex items-center space-x-1 xs:space-x-1.5 sm:space-x-2 w-full max-w-[150px] xs:max-w-[200px] sm:max-w-xs",
                    onClick: _cache[35] || (_cache[35] = withModifiers(() => {
                    }, ["stop"]))
                  }, [
                    withDirectives(createBaseVNode("input", {
                      ref_key: "topicInput",
                      ref: topicInput,
                      "onUpdate:modelValue": _cache[34] || (_cache[34] = ($event) => topicInputValue.value = $event),
                      onKeyup: [
                        withKeys(saveTopic, ["enter"]),
                        withKeys(cancelTopicInput, ["escape"])
                      ],
                      type: "text",
                      placeholder: unref(t)("vocabulary.accordion.topicPlaceholder"),
                      class: "flex-1 px-2 xs:px-2 sm:px-2 md:px-2 py-0.5 xs:py-1 sm:py-1 md:py-1.5 xl:py-1.5 2xl:py-1.5 text-xs border border-orange-300 dark:border-orange-600 rounded-md bg-white dark:bg-[#0a0a0a] text-gray-900 dark:text-gray-100 focus:outline-none focus:ring-2 focus:ring-orange-500 focus:border-transparent"
                    }, null, 40, _hoisted_66), [
                      [vModelText, topicInputValue.value]
                    ]),
                    createBaseVNode("button", {
                      onClick: saveTopic,
                      class: "px-1.5 xs:px-2 sm:px-2 md:px-2 py-0.5 xs:py-1 sm:py-1 md:py-1.5 xl:py-1.5 2xl:py-1.5 text-xs bg-orange-600 hover:bg-orange-700 text-white rounded-md focus:outline-none focus:ring-2 focus:ring-orange-500 transition-colors",
                      "aria-label": unref(t)("vocabulary.accordion.saveTopic")
                    }, _cache[74] || (_cache[74] = [
                      createBaseVNode("svg", {
                        class: "w-3 h-3",
                        fill: "currentColor",
                        viewBox: "0 0 20 20"
                      }, [
                        createBaseVNode("path", {
                          "fill-rule": "evenodd",
                          d: "M16.707 5.293a1 1 0 010 1.414l-8 8a1 1 0 01-1.414 0l-4-4a1 1 0 011.414-1.414L8 12.586l7.293-7.293a1 1 0 011.414 0z",
                          "clip-rule": "evenodd"
                        })
                      ], -1)
                    ]), 8, _hoisted_67),
                    createBaseVNode("button", {
                      onClick: cancelTopicInput,
                      class: "px-1.5 xs:px-2 sm:px-2 md:px-2 py-0.5 xs:py-1 sm:py-1 md:py-1.5 xl:py-1.5 2xl:py-1.5 text-xs bg-gray-500 hover:bg-gray-600 text-white rounded-md focus:outline-none focus:ring-2 focus:ring-gray-500 transition-colors",
                      "aria-label": unref(t)("vocabulary.accordion.cancelTopic")
                    }, _cache[75] || (_cache[75] = [
                      createBaseVNode("svg", {
                        class: "w-3 h-3",
                        fill: "currentColor",
                        viewBox: "0 0 20 20"
                      }, [
                        createBaseVNode("path", {
                          "fill-rule": "evenodd",
                          d: "M4.293 4.293a1 1 0 011.414 0L10 8.586l4.293-4.293a1 1 0 111.414 1.414L11.414 10l4.293 4.293a1 1 0 01-1.414 1.414L10 11.414l-4.293 4.293a1 1 0 01-1.414-1.414L8.586 10 4.293 5.707a1 1 0 010-1.414z",
                          "clip-rule": "evenodd"
                        })
                      ], -1)
                    ]), 8, _hoisted_68)
                  ]))
                ])
              ])
            ])
          ]),
          createVNode(Transition, { name: "accordion" }, {
            default: withCtx(() => [
              isExpanded.value ? (openBlock(), createElementBlock("div", _hoisted_69, [
                _ctx.group.topics && _ctx.group.topics.length > 0 ? (openBlock(), createElementBlock("div", _hoisted_70, [
                  (openBlock(true), createElementBlock(Fragment, null, renderList(_ctx.group.topics, (topicGroup) => {
                    return openBlock(), createElementBlock("div", {
                      key: topicGroup.topic,
                      class: "topic-group",
                      onMouseenter: ($event) => _ctx.hoverToExpandEnabled ? handleTopicHover(topicGroup.topic, true) : null,
                      onMouseleave: ($event) => _ctx.hoverToExpandEnabled ? handleTopicHover(topicGroup.topic, false) : null
                    }, [
                      createBaseVNode("div", _hoisted_72, [
                        createBaseVNode("div", {
                          id: `date-group-${_ctx.group.date}-topic-${topicGroup.topic}`,
                          class: "flex items-center justify-between px-6 py-3 cursor-pointer hover:bg-gray-100 dark:hover:bg-gray-custom/50",
                          onClick: ($event) => toggleTopicAccordion(topicGroup.topic)
                        }, [
                          createBaseVNode("div", _hoisted_74, [
                            (openBlock(), createElementBlock("svg", {
                              class: normalizeClass(["w-4 h-4 text-gray-400 dark:text-gray-500 transition-transform duration-200", { "transform rotate-90": isTopicExpanded(topicGroup.topic) }]),
                              fill: "currentColor",
                              viewBox: "0 0 20 20"
                            }, _cache[76] || (_cache[76] = [
                              createBaseVNode("path", {
                                "fill-rule": "evenodd",
                                d: "M7.293 14.707a1 1 0 010-1.414L10.586 10 7.293 6.707a1 1 0 011.414-1.414l4 4a1 1 0 010 1.414l-4 4a1 1 0 01-1.414 0z",
                                "clip-rule": "evenodd"
                              }, null, -1)
                            ]), 2)),
                            createBaseVNode("div", _hoisted_75, [
                              createBaseVNode("h5", _hoisted_76, [
                                createTextVNode(toDisplayString(unref(getTopicName)(topicGroup.topic)) + " ", 1),
                                createBaseVNode("span", _hoisted_77, "(" + toDisplayString(topicGroup.vocabularies.length) + ")", 1)
                              ]),
                              createBaseVNode("div", {
                                class: "relative",
                                onMouseenter: withModifiers(($event) => handleInfoMouseEnter(topicGroup.topic), ["stop"]),
                                onMouseleave: handleInfoMouseLeave,
                                onClick: _cache[36] || (_cache[36] = withModifiers(() => {
                                }, ["stop"]))
                              }, [
                                createBaseVNode("button", {
                                  type: "button",
                                  class: "p-1 text-blue-600 dark:text-blue-400 hover:bg-blue-50 dark:hover:bg-blue-900/20 rounded-md",
                                  "aria-label": unref(t)("vocabulary.sameTopicDatesAria", "Show dates with same topic")
                                }, _cache[77] || (_cache[77] = [
                                  createBaseVNode("svg", {
                                    viewBox: "0 0 24 24",
                                    fill: "currentColor",
                                    class: "w-4 h-4"
                                  }, [
                                    createBaseVNode("path", { d: "M12 2C6.48 2 2 6.48 2 12s4.48 10 10 10 10-4.48 10-10S17.52 2 12 2zm.75 15h-1.5v-6h1.5v6zm0-8h-1.5V7h1.5v2z" })
                                  ], -1)
                                ]), 8, _hoisted_79),
                                infoHoverTopic.value === topicGroup.topic ? (openBlock(), createElementBlock("div", {
                                  key: 0,
                                  class: "absolute left-full top-1/2 -translate-y-1/2 ml-3 w-64 rounded-lg shadow-xl ring-1 ring-black/5 bg-white text-gray-800 p-3 z-30 border border-gray-200 dark:bg-[#0a0a0a] dark:text-white dark:border dark:border-[#0f0f0f]",
                                  onMouseenter: handleTooltipMouseEnter,
                                  onMouseleave: handleTooltipMouseLeave
                                }, [
                                  _cache[78] || (_cache[78] = createBaseVNode("div", {
                                    class: "absolute -left-1.5 top-1/2 -translate-y-1/2 w-3 h-3 rotate-45 bg-white dark:bg-[#0a0a0a]",
                                    "aria-hidden": "true"
                                  }, null, -1)),
                                  createBaseVNode("div", _hoisted_80, toDisplayString(unref(t)("vocabulary.sameTopicDatesTitle", "Dates with same topic")), 1),
                                  !availableDatesByTopic.value[topicGroup.topic] || availableDatesByTopic.value[topicGroup.topic].length === 0 ? (openBlock(), createElementBlock("div", _hoisted_81, toDisplayString(unref(t)("vocabulary.sameTopicDatesEmpty", "No other dates found for this topic")), 1)) : (openBlock(), createElementBlock("ul", {
                                    key: 1,
                                    class: normalizeClass(["text-xs space-y-1 pr-1 overflow-y-auto", { "max-h-24": (availableDatesByTopic.value[topicGroup.topic]?.length || 0) >= 4 }])
                                  }, [
                                    (openBlock(true), createElementBlock(Fragment, null, renderList(availableDatesByTopic.value[topicGroup.topic], (d) => {
                                      return openBlock(), createElementBlock("li", {
                                        key: d.date,
                                        class: "flex items-center justify-between hover:bg-white dark:hover:bg-[#0f0f0f] rounded px-2 py-1 cursor-pointer",
                                        onClick: ($event) => handleNavigateClick(d.date, topicGroup.topic)
                                      }, [
                                        createBaseVNode("span", null, toDisplayString(formatDateForDisplay(d.date)), 1),
                                        createBaseVNode("span", _hoisted_83, "(" + toDisplayString(d.count) + ")", 1)
                                      ], 8, _hoisted_82);
                                    }), 128))
                                  ], 2))
                                ], 32)) : createCommentVNode("", true)
                              ], 40, _hoisted_78)
                            ])
                          ]),
                          _ctx.globalMoveMode && topicGroup.vocabularies.length > 0 ? (openBlock(), createElementBlock("button", {
                            key: 0,
                            onClick: withModifiers(($event) => handleBatchMoveCategory(topicGroup), ["stop"]),
                            class: "ml-auto mr-2 p-1.5 text-purple-600 dark:text-purple-400 hover:bg-purple-50 dark:hover:bg-purple-900/20 rounded-md transition-colors",
                            title: unref(t)("vocabulary.moveCategoryToAnotherDay", "Move all words in this category to another day")
                          }, _cache[79] || (_cache[79] = [
                            createBaseVNode("svg", {
                              class: "w-4 h-4",
                              fill: "none",
                              stroke: "currentColor",
                              viewBox: "0 0 24 24"
                            }, [
                              createBaseVNode("path", {
                                "stroke-linecap": "round",
                                "stroke-linejoin": "round",
                                "stroke-width": "2",
                                d: "M7 16V4m0 0L3 8m4-4l4 4m6 0v12m0 0l4-4m-4 4l-4-4"
                              })
                            ], -1)
                          ]), 8, _hoisted_84)) : createCommentVNode("", true)
                        ], 8, _hoisted_73),
                        isTopicExpanded(topicGroup.topic) && getPaginatedTopicVocabularies(topicGroup).totalPages > 1 ? (openBlock(), createElementBlock("div", {
                          key: 0,
                          class: "px-6 pb-3",
                          onClick: _cache[37] || (_cache[37] = withModifiers(() => {
                          }, ["stop"]))
                        }, [
                          createBaseVNode("div", _hoisted_85, [
                            createBaseVNode("div", _hoisted_86, [
                              createBaseVNode("button", {
                                onClick: ($event) => previousTopicPage(topicGroup.topic),
                                disabled: !getPaginatedTopicVocabularies(topicGroup).hasPrevious,
                                class: "relative inline-flex items-center px-2 md:px-2 py-1 md:py-1.5 xl:py-1.5 2xl:py-1.5 border border-gray-300 dark:border-gray-600 text-xs font-medium rounded text-gray-700 dark:text-gray-300 bg-white dark:bg-[#0a0a0a] hover:bg-gray-50 dark:hover:bg-gray-600 disabled:opacity-50 disabled:cursor-not-allowed"
                              }, toDisplayString(unref(t)("common.previous")), 9, _hoisted_87),
                              createBaseVNode("button", {
                                onClick: ($event) => nextTopicPage(topicGroup.topic),
                                disabled: !getPaginatedTopicVocabularies(topicGroup).hasNext,
                                class: "ml-2 relative inline-flex items-center px-2 md:px-2 py-1 md:py-1.5 xl:py-1.5 2xl:py-1.5 border border-gray-300 dark:border-gray-600 text-xs font-medium rounded text-gray-700 dark:text-gray-300 bg-white dark:bg-[#0a0a0a] hover:bg-gray-50 dark:hover:bg-gray-600 disabled:opacity-50 disabled:cursor-not-allowed"
                              }, toDisplayString(unref(t)("common.next")), 9, _hoisted_88)
                            ]),
                            createBaseVNode("div", _hoisted_89, [
                              createBaseVNode("div", null, [
                                createBaseVNode("p", _hoisted_90, toDisplayString(unref(t)("vocabulary.showingCategoryItems", {
                                  start: getPaginatedTopicVocabularies(topicGroup).startIndex,
                                  end: getPaginatedTopicVocabularies(topicGroup).endIndex,
                                  total: getPaginatedTopicVocabularies(topicGroup).totalItems
                                }, `Showing ${getPaginatedTopicVocabularies(topicGroup).startIndex} to ${getPaginatedTopicVocabularies(topicGroup).endIndex} of ${getPaginatedTopicVocabularies(topicGroup).totalItems} items`)), 1)
                              ]),
                              createBaseVNode("div", null, [
                                createBaseVNode("nav", _hoisted_91, [
                                  createBaseVNode("button", {
                                    onClick: ($event) => previousTopicPage(topicGroup.topic),
                                    disabled: !getPaginatedTopicVocabularies(topicGroup).hasPrevious,
                                    class: "relative inline-flex items-center px-1.5 md:px-1.5 py-1 md:py-1.5 xl:py-1.5 2xl:py-1.5 rounded-l-md border border-gray-300 dark:border-gray-600 bg-white dark:bg-[#0a0a0a] text-xs font-medium text-gray-500 dark:text-gray-300 hover:bg-gray-50 dark:hover:bg-gray-600 disabled:opacity-50 disabled:cursor-not-allowed"
                                  }, [
                                    createBaseVNode("span", _hoisted_93, toDisplayString(unref(t)("common.previous")), 1),
                                    _cache[80] || (_cache[80] = createBaseVNode("svg", {
                                      class: "h-3 w-3",
                                      fill: "currentColor",
                                      viewBox: "0 0 20 20"
                                    }, [
                                      createBaseVNode("path", {
                                        "fill-rule": "evenodd",
                                        d: "M12.707 5.293a1 1 0 010 1.414L9.414 10l3.293 3.293a1 1 0 01-1.414 1.414l-4-4a1 1 0 010-1.414l4-4a1 1 0 011.414 0z",
                                        "clip-rule": "evenodd"
                                      })
                                    ], -1))
                                  ], 8, _hoisted_92),
                                  (openBlock(true), createElementBlock(Fragment, null, renderList(getVisibleTopicPages(getPaginatedTopicVocabularies(topicGroup).currentPage, getPaginatedTopicVocabularies(topicGroup).totalPages), (page) => {
                                    return openBlock(), createElementBlock("button", {
                                      key: `${topicGroup.topic}-${page}`,
                                      onClick: ($event) => page > 0 ? goToTopicPage(topicGroup.topic, page) : null,
                                      disabled: page === -1,
                                      class: normalizeClass([
                                        page === getPaginatedTopicVocabularies(topicGroup).currentPage ? "z-10 bg-blue-50 dark:bg-blue-900 border-blue-500 dark:border-blue-400 text-blue-600 dark:text-blue-300" : page === -1 ? "bg-white dark:bg-[#0a0a0a] border-gray-300 dark:border-gray-600 text-gray-500 dark:text-gray-400 cursor-default" : "bg-white dark:bg-[#0a0a0a] border-gray-300 dark:border-gray-600 text-gray-500 dark:text-gray-300 hover:bg-gray-50 dark:hover:bg-gray-600",
                                        "relative inline-flex items-center px-2 md:px-2 py-1 md:py-1.5 xl:py-1.5 2xl:py-1.5 border text-xs font-medium"
                                      ])
                                    }, toDisplayString(page === -1 ? "..." : page), 11, _hoisted_94);
                                  }), 128)),
                                  createBaseVNode("button", {
                                    onClick: ($event) => nextTopicPage(topicGroup.topic),
                                    disabled: !getPaginatedTopicVocabularies(topicGroup).hasNext,
                                    class: "relative inline-flex items-center px-1.5 md:px-1.5 py-1 md:py-1.5 xl:py-1.5 2xl:py-1.5 rounded-r-md border border-gray-300 dark:border-gray-600 bg-white dark:bg-[#0a0a0a] text-xs font-medium text-gray-500 dark:text-gray-300 hover:bg-gray-50 dark:hover:bg-gray-600 disabled:opacity-50 disabled:cursor-not-allowed"
                                  }, [
                                    createBaseVNode("span", _hoisted_96, toDisplayString(unref(t)("common.next")), 1),
                                    _cache[81] || (_cache[81] = createBaseVNode("svg", {
                                      class: "h-3 w-3",
                                      fill: "currentColor",
                                      viewBox: "0 0 20 20"
                                    }, [
                                      createBaseVNode("path", {
                                        "fill-rule": "evenodd",
                                        d: "M7.293 14.707a1 1 0 010-1.414L10.586 10 7.293 6.707a1 1 0 011.414-1.414l4 4a1 1 0 010 1.414l-4 4a1 1 0 01-1.414 0z",
                                        "clip-rule": "evenodd"
                                      })
                                    ], -1))
                                  ], 8, _hoisted_95)
                                ])
                              ])
                            ])
                          ])
                        ])) : createCommentVNode("", true)
                      ]),
                      createVNode(Transition, { name: "topic-accordion" }, {
                        default: withCtx(() => [
                          isTopicExpanded(topicGroup.topic) ? (openBlock(), createElementBlock("div", _hoisted_97, [
                            createBaseVNode("div", _hoisted_98, [
                              (openBlock(true), createElementBlock(Fragment, null, renderList(getPaginatedTopicVocabularies(topicGroup).vocabularies, (word) => {
                                return openBlock(), createBlock(unref(VocabularyCard), {
                                  key: word.id,
                                  word,
                                  "move-mode": _ctx.globalMoveMode,
                                  onPlayAudio: _cache[38] || (_cache[38] = ($event) => _ctx.$emit("play-audio", $event)),
                                  onEditWord: _cache[39] || (_cache[39] = ($event) => _ctx.$emit("edit-word", $event)),
                                  onDeleteWord: _cache[40] || (_cache[40] = ($event) => _ctx.$emit("delete-word", $event)),
                                  onToggleFavorite: _cache[41] || (_cache[41] = ($event) => _ctx.$emit("toggle-favorite", $event)),
                                  onViewDetails: _cache[42] || (_cache[42] = ($event) => _ctx.$emit("view-details", $event)),
                                  onMoveVocabulary: handleMoveVocabulary
                                }, null, 8, ["word", "move-mode"]);
                              }), 128))
                            ])
                          ])) : createCommentVNode("", true)
                        ]),
                        _: 2
                      }, 1024)
                    ], 40, _hoisted_71);
                  }), 128))
                ])) : (openBlock(), createElementBlock("div", _hoisted_99, [
                  (openBlock(true), createElementBlock(Fragment, null, renderList(_ctx.group.vocabularies, (word) => {
                    return openBlock(), createBlock(unref(VocabularyCard), {
                      key: word.id,
                      word,
                      "move-mode": _ctx.globalMoveMode,
                      onPlayAudio: _cache[43] || (_cache[43] = ($event) => _ctx.$emit("play-audio", $event)),
                      onEditWord: _cache[44] || (_cache[44] = ($event) => _ctx.$emit("edit-word", $event)),
                      onDeleteWord: _cache[45] || (_cache[45] = ($event) => _ctx.$emit("delete-word", $event)),
                      onToggleFavorite: _cache[46] || (_cache[46] = ($event) => _ctx.$emit("toggle-favorite", $event)),
                      onViewDetails: _cache[47] || (_cache[47] = ($event) => _ctx.$emit("view-details", $event)),
                      onMoveVocabulary: handleMoveVocabulary
                    }, null, 8, ["word", "move-mode"]);
                  }), 128))
                ]))
              ])) : createCommentVNode("", true)
            ]),
            _: 1
          })
        ])
      ]);
    };
  }
});
const DateGroupAccordion = /* @__PURE__ */ _export_sfc(_sfc_main, [["__scopeId", "data-v-2a056e75"]]);
export {
  DateGroupAccordion as default
};
//# sourceMappingURL=DateGroupAccordion-Cid19YXN.js.map
