const __vite__mapDeps=(i,m=__vite__mapDeps,d=(m.f||(m.f=["/web-english/assets/FireworkSoundEffect-DS0v3Px0.js","/web-english/assets/utils-vendor-DwIcHP6x.js","/web-english/assets/vue-vendor-Bt65BSdi.js","/web-english/assets/_plugin-vue_export-helper-BCo6x5W8.js","/web-english/assets/FireworkSoundEffect-CV0ieEWB.css"])))=>i.map(i=>d[i]);
import{_ as e}from"./index-DmJNupMF.js";import{d as t,A as r,D as a,c as l,v as s,f as d,y as o,t as n,u as x,F as m,e as c,j as u,M as i,O as p,i as b,n as g,N as h,q as f}from"./vue-vendor-Bt65BSdi.js";import{a as v}from"./topicUtils-CuplmVBM.js";import{u as w}from"./ui-vendor-D-J_fEQ5.js";import{u as y}from"./voiceStore-o6lhlGgY.js";import{_ as k}from"./_plugin-vue_export-helper-BCo6x5W8.js";const C={class:"perspective-1000"},S={class:"flashcard-face flashcard-front absolute inset-0 bg-white dark:bg-[#0a0a0a] rounded-xl shadow-2xl border border-gray-200 dark:border-gray-800 flex items-center justify-center p-4 sm:p-6 md:p-8"},_={class:"text-center"},j={class:"mb-3 sm:mb-4 md:mb-5"},E={class:"px-2 py-1 sm:px-3 sm:py-1 md:px-4 md:py-2 xl:px-3 xl:py-1 2xl:px-3 2xl:py-1 bg-blue-100 dark:bg-gray-800 text-blue-800 dark:text-blue-300 text-xs sm:text-sm md:text-base xl:text-sm 2xl:text-sm font-medium rounded-full"},W={class:"text-xl sm:text-2xl md:text-3xl font-bold text-gray-900 dark:text-white mb-3 sm:mb-4 md:mb-5"},M={class:"text-sm sm:text-base md:text-lg text-gray-600 dark:text-gray-300 mb-4 sm:mb-5 md:mb-6"},I={class:"text-xs sm:text-sm md:text-base text-gray-500 dark:text-gray-400"},O={class:"text-base sm:text-lg md:text-xl xl:text-lg 2xl:text-xl font-bold text-gray-900 dark:text-white mb-2 sm:mb-3 md:mb-4 xl:mb-3 2xl:mb-3"},L={class:"text-sm sm:text-base md:text-lg xl:text-base 2xl:text-lg text-gray-600 dark:text-gray-300 mb-4 sm:mb-5 md:mb-6 xl:mb-4 2xl:mb-5"},T={class:"mb-4 sm:mb-5 md:mb-6 xl:mb-4 2xl:mb-5"},$={class:"flex flex-wrap justify-center items-center gap-1 sm:gap-2 xl:gap-1.5 2xl:gap-2 mb-2 sm:mb-3 md:mb-4 xl:mb-3 2xl:mb-3 min-h-[3rem] xl:min-h-[2.5rem] 2xl:min-h-[3rem] max-w-full px-2 sm:px-0"},A=["onClick"],D={key:0,class:"text-center max-w-full px-2"},B={key:0,class:"text-green-600 dark:text-green-400"},F={class:"font-semibold text-sm sm:text-base mb-2"},z={class:"bg-green-50 dark:bg-[#0f0f0f] border border-green-200 dark:border-dark-bg-mute rounded-lg p-3 sm:p-4"},U={class:"text-green-700 dark:text-green-400 font-medium text-sm sm:text-base"},H={key:0,class:"text-green-600 dark:text-green-500 text-xs sm:text-sm mt-1 opacity-80"},N={key:1,class:"text-red-600 dark:text-red-400"},V={class:"font-semibold text-sm sm:text-base mb-2"},q={class:"bg-red-50 dark:bg-[#0f0f0f] border border-red-200 dark:border-dark-bg-mute rounded-lg p-3 sm:p-4"},J={class:"text-red-700 dark:text-red-400 font-bold text-base sm:text-lg mb-1"},K={class:"text-red-600 dark:text-red-500 text-sm sm:text-base"},P={key:0,class:"text-red-500 dark:text-red-600 text-xs sm:text-sm mt-1 opacity-80"},R={class:"flex justify-center flex-wrap gap-2 sm:gap-3 md:gap-4 xl:gap-2 2xl:gap-2.5 mb-4 sm:mb-5 md:mb-6 xl:mb-4 2xl:mb-4 px-2 sm:px-4 md:px-6 xl:px-4 2xl:px-6 max-w-full"},G=["onClick","disabled"],Q={class:"flex flex-wrap justify-center gap-1.5 xs:gap-2 sm:gap-3 md:gap-4 xl:gap-2 2xl:gap-3 px-2 sm:px-4 xl:px-2 2xl:px-4 max-w-full"},X=["disabled","title"],Y={class:"hidden xs:hidden sm:inline"},Z=["disabled"],ee=["disabled"],te={class:"flashcard-face flashcard-back absolute inset-0 bg-gradient-to-br from-green-400 to-green-600 dark:from-green-700 dark:to-green-900 rounded-xl shadow-2xl border border-gray-200 dark:border-gray-800 flex items-center justify-center p-4 sm:p-6 md:p-8"},re={class:"text-center text-white"},ae={class:"text-base sm:text-lg md:text-xl font-bold mb-3 sm:mb-4 md:mb-5"},le={key:0,class:"text-sm sm:text-base md:text-lg mb-3 sm:mb-4 md:mb-5"},se={key:1,class:"text-xs sm:text-sm md:text-base mb-3 sm:mb-4 md:mb-5 leading-relaxed"},de={class:"text-xs sm:text-sm md:text-base opacity-75"},oe=k(t({__name:"FlashcardCard",props:{currentCard:{},isFlipped:{type:Boolean},scrambleWordsEnabled:{type:Boolean},currentIndex:{},totalCards:{}},emits:["flip-card","next-card","show-results","scramble-answer"],setup(t,{emit:k}){const{t:oe}=w(),ne=t,xe=k,me=h(()=>e(()=>import("./FireworkSoundEffect-DS0v3Px0.js"),__vite__mapDeps([0,1,2,3,4]),import.meta.url)),ce=r(!1),ue=r(!1),ie=r(!1),pe=r(),be=()=>{ce.value=!1,ue.value=!1},{playAudio:ge}=y();let he=null;const fe=()=>{he&&(clearTimeout(he),he=null)},ve=r(!1),we=()=>{"undefined"!=typeof window&&(ve.value=window.innerWidth<768)};"undefined"!=typeof window&&(we(),window.addEventListener("resize",we));const ye=r([]),ke=r([]),Ce=r(!1),Se=r(!1),_e=r([]),je=e=>{const t=[...e],r=Math.max(3,Math.floor(e.length/2)+1);for(let a=0;a<r;a++){const e=(Date.now()+1e3*a+1e4*Math.random())%1;for(let l=t.length-1;l>0;l--){const s=(Math.random()+Date.now()%997/997+(a+1)/r+e)%1,d=Math.floor(s*(l+1));[t[l],t[d]]=[t[d],t[l]]}if(a%2==0)for(let r=0;r<t.length-1;r++){if((Math.random()+Date.now()%101/100)%1>.5){const e=Math.min(r+1+Math.floor(2*Math.random()),t.length-1);[t[r],t[e]]=[t[e],t[r]]}}}return t},Ee=(e,t)=>0!==t.length&&t.some(t=>{if(t.length!==e.length)return!1;let r=0;for(let a=0;a<e.length;a++)e[a]===t[a]&&r++;return r/e.length>.6}),We=()=>{if(!ne.currentCard||!ne.scrambleWordsEnabled)return;const e=ne.currentCard.word.toLowerCase().split(""),t=e.map((e,t)=>({char:e.toUpperCase(),used:!1,originalIndex:t}));let r,a=0;do{r=je(e.map(e=>e.toUpperCase())),a++}while(a<10&&Ee(r,_e.value));_e.value.push(r),_e.value.length>3&&_e.value.shift();const l=[],s=new Set;r.forEach(e=>{const r=t.findIndex((t,r)=>t.char===e&&!s.has(r));if(-1!==r){const e=t[r];s.add(r),l.push({...e,used:!1})}}),ke.value=l.length===t.length?l:t,ye.value=[],Ce.value=!1,Se.value=!1,console.log("🎲 New shuffle created:",{word:ne.currentCard.word,original:e,shuffled:r,attempts:a,historySize:_e.value.length})};a(()=>ne.currentCard,()=>{fe(),ne.scrambleWordsEnabled&&We()},{immediate:!0}),a(()=>ne.scrambleWordsEnabled,e=>{fe(),e?We():(ye.value=[],ke.value=[],Ce.value=!1,Se.value=!1,_e.value=[])});const Me=()=>{Ce.value&&Se.value||(ke.value.forEach(e=>{e.used=!1}),ye.value=[],Ce.value=!1,Se.value=!1)},Ie=()=>{if(Ce.value&&Se.value)return;if(0===ye.value.length)return;const e=ye.value.pop(),t=ke.value.findIndex(t=>t.char===e&&t.used);-1!==t&&(ke.value[t].used=!1),Ce.value=!1,Se.value=!1},Oe=async()=>{if(ye.value.length!==ne.currentCard.word.length)return;const e=ye.value.join("").toLowerCase(),t=ne.currentCard.word.toLowerCase();Ce.value=!0,Se.value=e===t,fe();const r=void 0!==ne.currentIndex&&void 0!==ne.totalCards&&ne.currentIndex+1>=ne.totalCards;if(console.log("Scramble Check Debug:",{currentIndex:ne.currentIndex,totalCards:ne.totalCards,isLastCard:r,isSmallScreen:ve.value,scrambleCorrect:Se.value}),xe("scramble-answer",Se.value),Se.value){ie.value=!0,ce.value=!0,ue.value=!0;try{await f(),await ge(ne.currentCard.word)}catch(a){console.warn("Voice playbook error:",a)}ve.value&&(console.log("Setting timer for correct answer:",r?"show-results":"next-card"),he=setTimeout(()=>{console.log("Timer executed, emitting:",r?"show-results":"next-card"),xe(r?"show-results":"next-card")},2500))}else ie.value=!1,ce.value=!0,ue.value=!0,ve.value&&(console.log("Setting timer for incorrect answer:",r?"show-results":"next-card"),he=setTimeout(()=>{console.log("Timer executed for incorrect, emitting:",r?"show-results":"next-card"),xe(r?"show-results":"next-card")},2500))};return(e,t)=>(s(),l("div",C,[d("div",{class:g([["flashcard",{flipped:e.isFlipped}],"relative w-full cursor-pointer h-80 sm:h-96 md:h-[28rem] xl:h-[30rem] 2xl:h-[32rem] select-none"]),onClick:t[0]||(t[0]=t=>!e.scrambleWordsEnabled&&e.$emit("flip-card")),onCopy:t[1]||(t[1]=b(()=>{},["prevent"])),onCut:t[2]||(t[2]=b(()=>{},["prevent"])),onContextmenu:t[3]||(t[3]=b(()=>{},["prevent"]))},[d("div",S,[d("div",_,[d("div",j,[d("span",E,n(x(v)(e.currentCard.category)),1)]),e.scrambleWordsEnabled?(s(),l(m,{key:1},[d("h3",O,n(x(oe)("flashcard.scrambleWords.instruction","Arrange the letters to form the word")),1),d("p",L,n(e.currentCard.pronunciation),1),d("div",T,[d("div",$,[(s(!0),l(m,null,u(ye.value,(e,t)=>(s(),l("div",{key:`assembled-${t}`,class:"w-8 h-8 sm:w-10 sm:h-10 md:w-12 md:h-12 xl:w-10 xl:h-10 2xl:w-11 2xl:h-11 border-2 border-gray-300 dark:border-dark-bg-mute rounded-lg flex items-center justify-center bg-blue-50 dark:bg-[#0f0f0f] text-lg sm:text-xl md:text-2xl xl:text-xl 2xl:text-2xl font-bold text-gray-900 dark:text-white cursor-pointer hover:bg-blue-100 dark:hover:bg-[#1a1a1a] transition-colors",onClick:e=>(e=>{if(Ce.value&&Se.value)return;const t=ye.value[e];ye.value.splice(e,1);const r=ke.value.findIndex(e=>e.char===t&&e.used);-1!==r&&(ke.value[r].used=!1),Ce.value=!1,Se.value=!1})(t)},n(e),9,A))),128)),(s(!0),l(m,null,u(Math.max(0,e.currentCard.word.length-ye.value.length),e=>(s(),l("div",{key:`empty-${e}`,class:"w-8 h-8 sm:w-10 sm:h-10 md:w-12 md:h-12 xl:w-10 xl:h-10 2xl:w-11 2xl:h-11 border-2 border-dashed border-gray-300 dark:border-dark-bg-mute rounded-lg bg-gray-50 dark:bg-[#0f0f0f]"}))),128))]),Ce.value?(s(),l("div",D,[Se.value?(s(),l("div",B,[d("p",F," ✅ "+n(x(oe)("flashcard.scrambleWords.correct","Correct!")),1),d("div",z,[d("p",U,n(e.currentCard.meaning),1),e.currentCard.partOfSpeech?(s(),l("p",H,n(x(oe)(`vocabulary.wordTypes.${e.currentCard.partOfSpeech}`,e.currentCard.partOfSpeech)),1)):c("",!0)])])):(s(),l("div",N,[d("p",V," ❌ "+n(x(oe)("flashcard.scrambleWords.incorrect","Try again!")),1),d("div",q,[d("p",J,n(e.currentCard.word.toUpperCase()),1),d("p",K,n(e.currentCard.meaning),1),e.currentCard.partOfSpeech?(s(),l("p",P,n(x(oe)(`vocabulary.wordTypes.${e.currentCard.partOfSpeech}`,e.currentCard.partOfSpeech)),1)):c("",!0)])]))])):c("",!0)]),d("div",R,[(s(!0),l(m,null,u(ke.value,(e,t)=>i((s(),l("button",{key:`scrambled-${t}`,class:"w-8 h-8 sm:w-10 sm:h-10 md:w-12 md:h-12 xl:w-10 xl:h-10 2xl:w-11 2xl:h-11 border-2 border-gray-400 dark:border-dark-bg-soft rounded-lg flex items-center justify-center bg-white dark:bg-[#0f0f0f] hover:bg-gray-100 dark:hover:bg-[#1a1a1a] text-lg sm:text-xl md:text-2xl xl:text-xl 2xl:text-2xl font-bold text-gray-900 dark:text-white cursor-pointer transition-all duration-200 hover:scale-105 active:scale-95",onClick:e=>(e=>{ke.value[e].used||Ce.value&&Se.value||(ye.value.push(ke.value[e].char),ke.value[e].used=!0,Ce.value=!1,Se.value=!1)})(t),disabled:Ce.value&&Se.value},n(e.char),9,G)),[[p,!e.used]])),128))]),d("div",Q,[d("button",{onClick:Ie,class:"px-2 py-1 xs:px-2 xs:py-1.5 sm:px-3 sm:py-2 md:px-4 md:py-2.5 xl:px-3 xl:py-2 2xl:px-4 2xl:py-2.5 bg-orange-500 hover:bg-orange-600 dark:bg-orange-600 dark:hover:bg-orange-700 text-white text-xs sm:text-sm md:text-base xl:text-sm 2xl:text-base font-semibold rounded-md sm:rounded-lg transition-colors flex items-center gap-1 sm:gap-2 xl:gap-1 2xl:gap-2 min-w-0 flex-shrink-0",disabled:0===ye.value.length||Ce.value&&Se.value,title:x(oe)("flashcard.scrambleWords.backspace","Backspace")},[t[4]||(t[4]=d("svg",{class:"w-3 h-3 sm:w-4 sm:h-4 xl:w-3 xl:h-3 2xl:w-4 2xl:h-4",fill:"currentColor",viewBox:"0 0 20 20"},[d("path",{"fill-rule":"evenodd",d:"M6.707 4.879A3 3 0 018.828 4H15a3 3 0 013 3v6a3 3 0 01-3 3H8.828a3 3 0 01-2.12-.879l-4.415-4.414a1 1 0 010-1.414l4.414-4.414zm4 3.707a1 1 0 00-1.414-1.414L8 8.586 6.707 7.293a1 1 0 10-1.414 1.414L6.586 10l-1.293 1.293a1 1 0 101.414 1.414L8 11.414l1.293 1.293a1 1 0 001.414-1.414L9.414 10l1.293-1.293z","clip-rule":"evenodd"})],-1)),d("span",Y,n(x(oe)("flashcard.scrambleWords.backspace","Backspace")),1)],8,X),d("button",{onClick:Me,class:"px-2 py-1 xs:px-3 xs:py-1.5 sm:px-4 sm:py-2 md:px-5 md:py-2.5 xl:px-4 xl:py-2 2xl:px-5 2xl:py-2.5 bg-gray-500 hover:bg-gray-600 dark:bg-gray-600 dark:hover:bg-gray-700 text-white text-xs sm:text-sm md:text-base xl:text-sm 2xl:text-base font-semibold rounded-md sm:rounded-lg transition-colors min-w-0 flex-shrink-0",disabled:0===ye.value.length||Ce.value&&Se.value},n(x(oe)("flashcard.scrambleWords.clear","Clear")),9,Z),d("button",{onClick:Oe,class:"px-2 py-1 xs:px-3 xs:py-1.5 sm:px-4 sm:py-2 md:px-5 md:py-2.5 xl:px-4 xl:py-2 2xl:px-5 2xl:py-2.5 bg-blue-600 hover:bg-blue-700 text-white text-xs sm:text-sm md:text-base xl:text-sm 2xl:text-base font-semibold rounded-md sm:rounded-lg transition-colors min-w-0 flex-shrink-0",disabled:ye.value.length!==e.currentCard.word.length||Ce.value&&Se.value},n(x(oe)("flashcard.scrambleWords.check","Check")),9,ee)])],64)):(s(),l(m,{key:0},[d("h2",W,n(e.currentCard.word),1),d("p",M,n(e.currentCard.pronunciation),1),d("p",I,n(x(oe)("flashcard.card.flip_to_meaning","Click to see meaning")),1)],64))])]),d("div",te,[d("div",re,[d("h3",ae,n(e.currentCard.meaning),1),e.currentCard.partOfSpeech?(s(),l("p",le,n(x(oe)(`vocabulary.wordTypes.${e.currentCard.partOfSpeech}`,e.currentCard.partOfSpeech)),1)):c("",!0),e.currentCard.example?(s(),l("p",se,n(e.currentCard.example),1)):c("",!0),d("p",de,n(x(oe)("flashcard.card.flip_back","Click to flip back")),1)])])],34),o(x(me),{ref_key:"fireworkEffect",ref:pe,"trigger-firework":ce.value,"trigger-sound":ue.value,"is-correct":ie.value,onEffectComplete:be},null,8,["trigger-firework","trigger-sound","is-correct"])]))}}),[["__scopeId","data-v-e4d27939"]]);export{oe as default};
