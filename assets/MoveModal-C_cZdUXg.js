import{d as e,A as a,D as t,C as o,J as r,c as l,v as s,y as d,w as i,e as c,Y as n,f as u,i as v,t as b,u as g,g as m,M as y,a0 as p,F as w,j as f,$ as h}from"./vue-vendor-Bt65BSdi.js";import{u as x}from"./ui-vendor-D-J_fEQ5.js";import{a as k}from"./topicUtils-CuplmVBM.js";/* empty css                                                                  */import{_ as M}from"./_plugin-vue_export-helper-BCo6x5W8.js";const T={key:0,class:"fixed inset-0 bg-gray-600 bg-opacity-50 flex items-center justify-center p-4 z-50 backdrop-blur-sm"},D={class:"w-full max-w-md mx-4"},S={class:"bg-white dark:bg-[#0a0a0a] p-4 border-b border-gray-200 dark:border-white/10"},_={class:"flex items-center justify-between"},V={class:"flex items-center space-x-2"},j={class:"text-lg font-medium text-gray-900 dark:text-white"},B={class:"p-4"},C={key:0,class:"mb-4"},L={key:0,class:"mb-4"},A={class:"text-sm text-gray-500 dark:text-white/60 mb-1"},W={class:"mb-2"},F={class:"text-lg font-medium text-gray-900 dark:text-white"},I={class:"text-sm text-gray-600 dark:text-white/70 bg-gray-50 dark:bg-black/20 px-3 py-2 rounded-md"},N={class:"font-medium"},G={key:1},O={class:"text-sm text-gray-500 dark:text-white/60 mb-1"},J={class:"mb-1"},U={class:"text-lg font-medium text-gray-900 dark:text-white"},z={class:"text-gray-500 dark:text-white/60 ml-2"},K={class:"text-sm text-gray-500 dark:text-white/60"},Y={class:"mb-4"},$={class:"flex items-center justify-between"},q={for:"filterByTopic",class:"text-sm font-medium text-gray-700 dark:text-white"},E={class:"relative inline-flex items-center cursor-pointer"},H={key:0,class:"text-xs text-gray-500 dark:text-white/60 mt-1"},P={class:"font-medium"},Q={class:"mb-4"},R={for:"targetDate",class:"block text-sm font-medium text-gray-700 dark:text-white mb-2"},X={value:""},Z=["value"],ee={key:0,class:"text-sm text-gray-500 dark:text-white/60 mt-2"},ae={class:"px-4 py-4 bg-white dark:bg-[#0a0a0a] border-t border-gray-200 dark:border-white/10 flex justify-end space-x-3"},te=["disabled"],oe=M(e({__name:"MoveModal",props:{showModal:{type:Boolean},wordToMove:{},availableDateGroups:{},sourceDate:{},allVocabularies:{}},emits:["close","confirm-move"],setup(e,{emit:M}){const{t:oe,locale:re}=x(),le=e,se=M,de=a(""),ie=a((()=>{try{const e=localStorage.getItem("vocabulary-move-filter-by-topic");return!!e&&JSON.parse(e)}catch(e){return console.warn("Failed to parse stored filter state:",e),!1}})());t(ie,e=>{(e=>{try{localStorage.setItem("vocabulary-move-filter-by-topic",JSON.stringify(e))}catch(a){console.warn("Failed to store filter state:",a)}})(e)});const ce=o(()=>{if(console.log("Filter state:",{filterBySameTopic:ie.value,hasWordToMove:!!le.wordToMove,hasAllVocabularies:!!le.allVocabularies,allVocabulariesLength:le.allVocabularies?.length}),!ie.value||!le.wordToMove||!le.allVocabularies)return le.availableDateGroups;const e=le.wordToMove.categoryName||le.wordToMove.category;if(console.log("Current category:",e),console.log("Word to move:",le.wordToMove),!e)return le.availableDateGroups;console.log("Sample vocabularies:",le.allVocabularies.slice(0,3));const a=le.availableDateGroups.filter(a=>{const t=new Date(a.date).toISOString().split("T")[0];return le.allVocabularies.some(a=>{if(a.category!==e)return!1;const o=a.createdAt?new Date(a.createdAt).toISOString().split("T")[0]:null,r=a.updatedAt?new Date(a.updatedAt).toISOString().split("T")[0]:null,l=o===t||r===t;return l&&console.log("Found match:",{vocab:a.word,category:a.category,vocabDate:o,groupDate:t}),l})});return console.log("Filtered result:",a.length,"groups"),a}),ne=()=>{de.value="",se("close")},ue=()=>{le.wordToMove&&de.value&&(se("confirm-move",{word:le.wordToMove,targetDate:de.value}),ne())};return t(()=>le.showModal,e=>{e?document.body.classList.add("modal-open"):(document.body.classList.remove("modal-open"),de.value="")}),r(()=>{document.body.classList.remove("modal-open")}),(e,a)=>(s(),l("div",null,[d(n,{"enter-active-class":"transition-all duration-500 ease-out","enter-from-class":"opacity-0","enter-to-class":"opacity-100","leave-active-class":"transition-all duration-300 ease-in","leave-from-class":"opacity-100","leave-to-class":"opacity-0"},{default:i(()=>[e.showModal?(s(),l("div",T,[d(n,{"enter-active-class":"transition-all duration-500 ease-out","enter-from-class":"opacity-0 scale-90 translate-y-8 rotate-1","enter-to-class":"opacity-100 scale-100 translate-y-0 rotate-0","leave-active-class":"transition-all duration-300 ease-in","leave-from-class":"opacity-100 scale-100 translate-y-0 rotate-0","leave-to-class":"opacity-0 scale-90 translate-y-8 rotate-1"},{default:i(()=>[u("div",D,[u("div",{class:"bg-white dark:bg-[#0a0a0a] shadow-2xl rounded-xl border border-gray-200 dark:border-white/10 overflow-hidden transform",onClick:a[2]||(a[2]=v(()=>{},["stop"]))},[u("div",S,[u("div",_,[u("div",V,[a[3]||(a[3]=u("div",{class:"w-2 h-2 bg-green-500 rounded-full"},null,-1)),u("h3",j,b(g(oe)("vocabulary.moveVocabulary","Move Vocabulary")),1)]),u("button",{onClick:ne,class:"text-gray-400 dark:text-white/60 hover:text-gray-600 dark:hover:text-white transition-all duration-300 hover:scale-110 hover:rotate-90 p-1 rounded-full hover:bg-gray-100 dark:hover:bg-black/20"},a[4]||(a[4]=[u("svg",{class:"w-5 h-5",fill:"currentColor",viewBox:"0 0 20 20"},[u("path",{"fill-rule":"evenodd",d:"M4.293 4.293a1 1 0 011.414 0L10 8.586l4.293-4.293a1 1 0 111.414 1.414L11.414 10l4.293 4.293a1 1 0 01-1.414 1.414L10 11.414l-4.293 4.293a1 1 0 01-1.414-1.414L8.586 10 4.293 5.707a1 1 0 010-1.414z","clip-rule":"evenodd"})],-1)]))])]),u("div",B,[e.wordToMove?(s(),l("div",C,[e.wordToMove.isBatchMove?(s(),l("div",L,[u("p",A,b(g(oe)("vocabulary.movingCategory","Moving all words in category"))+": ",1),u("div",W,[u("span",F,b(g(k)(e.wordToMove.categoryName||e.wordToMove.category,g(oe),g(re),e.wordToMove)),1)]),u("p",I,[u("span",N,b(e.wordToMove.batchWords?.length||0),1),m(" "+b(g(oe)("vocabulary.wordsWillBeMoved","words will be moved to the selected date")),1)])])):(s(),l("div",G,[u("p",O,b(g(oe)("vocabulary.movingWord","Moving word"))+": ",1),u("div",J,[u("span",U,b(e.wordToMove.word),1),u("span",z,"- "+b(e.wordToMove.meaning),1)]),u("p",K," Topic: "+b(g(k)(e.wordToMove.category,g(oe),g(re),e.wordToMove)),1)]))])):c("",!0),u("div",Y,[u("div",$,[u("label",q,b(g(oe)("vocabulary.filterBySameTopic","Filter by same topic")),1),u("label",E,[y(u("input",{id:"filterByTopic","onUpdate:modelValue":a[0]||(a[0]=e=>ie.value=e),type:"checkbox",class:"sr-only peer"},null,512),[[p,ie.value]]),a[5]||(a[5]=u("div",{class:"w-11 h-6 bg-gray-200 peer-focus:outline-none peer-focus:ring-1 peer-focus:ring-blue-300 dark:peer-focus:ring-blue-800 rounded-full peer dark:bg-[#0a0a0a] peer-checked:after:translate-x-full peer-checked:after:border-white after:content-[''] after:absolute after:top-[2px] after:left-[2px] after:bg-white after:border-gray-300 after:border after:rounded-full after:h-5 after:w-5 after:transition-all dark:border-white/20 peer-checked:bg-blue-600"},null,-1))])]),ie.value?(s(),l("p",H,[m(b(g(oe)("vocabulary.showingDatesWithSameTopic","Showing only dates with same topic"))+": ",1),u("span",P,b(g(k)(e.wordToMove?.categoryName||e.wordToMove?.category||"",g(oe),g(re),e.wordToMove)),1)])):c("",!0)]),u("div",Q,[u("label",R,b(g(oe)("vocabulary.selectTargetDateGroup","Select target date group"))+": ",1),y(u("select",{id:"targetDate","onUpdate:modelValue":a[1]||(a[1]=e=>de.value=e),class:"w-full px-3 py-2 border border-gray-300 dark:border-white/20 rounded-md shadow-sm focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-blue-500 bg-white dark:bg-[#0a0a0a] text-gray-900 dark:text-white"},[u("option",X,b(g(oe)("vocabulary.selectDate","Select a date")),1),(s(!0),l(w,null,f(ce.value,e=>{return s(),l("option",{key:e.date,value:e.date},b((a=e.date,new Date(a).toLocaleDateString(re.value,{year:"numeric",month:"short",day:"numeric"})))+" ("+b(e.count)+" words) ",9,Z);var a}),128))],512),[[h,de.value]]),0===ce.value.length?(s(),l("p",ee,b(g(oe)("vocabulary.noMatchingDates","No dates found with this topic. Try disabling the filter.")),1)):c("",!0)])]),u("div",ae,[u("button",{onClick:ne,class:"px-4 py-2 text-sm font-medium text-gray-700 dark:text-white bg-gray-100 dark:bg-black/40 rounded-md hover:bg-gray-200 dark:hover:bg-black/60 transition-all duration-200 hover:scale-105 hover:shadow-md active:scale-95"},b(g(oe)("common.cancel","Cancel")),1),u("button",{onClick:ue,disabled:!de.value,class:"px-4 py-2 text-sm font-medium text-white bg-blue-600 rounded-md hover:bg-blue-700 disabled:opacity-50 disabled:cursor-not-allowed transition-all duration-200 hover:scale-105 hover:shadow-md hover:-translate-y-0.5 active:scale-95"},b(e.wordToMove?.isBatchMove?g(oe)("vocabulary.moveAll","Move All"):g(oe)("vocabulary.moveWord","Move Word")),9,te)])])])]),_:1})])):c("",!0)]),_:1})]))}}),[["__scopeId","data-v-98e3af71"]]);export{oe as default};
