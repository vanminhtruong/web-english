const __vite__mapDeps=(i,m=__vite__mapDeps,d=(m.f||(m.f=["/web-english/assets/FireworkSoundEffect-DS0v3Px0.js","/web-english/assets/utils-vendor-DwIcHP6x.js","/web-english/assets/vue-vendor-Bt65BSdi.js","/web-english/assets/_plugin-vue_export-helper-BCo6x5W8.js","/web-english/assets/FireworkSoundEffect-CV0ieEWB.css"])))=>i.map(i=>d[i]);
import{_ as e}from"./index-DmJNupMF.js";import{d as t,C as r,A as a,D as l,I as s,q as i,c as o,v as d,f as n,e as c,y as u,t as p,u as f,F as m,j as x,n as g,M as v,_ as h,W as w,g as k,N as b,i as y}from"./vue-vendor-Bt65BSdi.js";import{u as C}from"./ui-vendor-D-J_fEQ5.js";import{u as T}from"./voiceStore-o6lhlGgY.js";import{_ as j}from"./_plugin-vue_export-helper-BCo6x5W8.js";const A={class:"h-full flex flex-col overflow-hidden"},_={class:"mb-4 flex items-center justify-center gap-3"},M={class:"px-3 py-1 bg-purple-100 dark:bg-dark-bg-mute text-purple-800 dark:text-purple-300 text-sm font-medium rounded-full"},L={class:"flex items-center gap-2"},z={class:"text-xs text-gray-600 dark:text-white/70"},B={class:"flex-1 flex items-center justify-center mb-4 min-h-0"},E={key:0,class:"flex items-center justify-center bg-gradient-to-br from-teal-50 to-cyan-50 dark:from-teal-900/30 dark:to-cyan-900/30 rounded-xl p-6 w-full max-w-lg border border-teal-200 dark:border-teal-700/50 shadow-sm"},F={class:"text-center space-y-3"},I={class:"max-h-32 overflow-y-auto"},N={class:"text-lg font-medium text-gray-900 dark:text-white leading-relaxed"},V={key:1,class:"relative"},D=["src","alt"],P={key:0,class:"absolute inset-0 flex items-center justify-center bg-gray-100 dark:bg-dark-bg-mute rounded-lg"},S={class:"text-center"},H={class:"text-sm text-gray-500 dark:text-white/60 mt-2"},K={key:2,class:"flex items-center justify-center bg-gray-100 dark:bg-dark-bg-mute rounded-lg p-8 w-full max-w-sm"},U={class:"text-center"},$={class:"text-sm text-gray-500 dark:text-white/60 mt-2"},q={class:"flex-shrink-0 mb-4"},J={class:"w-full max-w-full overflow-x-auto"},O={class:"flex flex-wrap gap-2 xs:gap-1.5 sm:gap-2 md:gap-3 justify-center items-center min-w-fit px-1"},R={key:0,class:"px-1 text-sm xs:text-base sm:text-lg text-gray-700 dark:text-white/80 select-none"},W=["onClick"],G={class:"tile-face tile-back absolute inset-0 flex items-center justify-center rounded-lg border-2 bg-white dark:bg-dark-bg-soft border-green-400 dark:border-green-500 shadow-lg text-sm xs:text-base sm:text-xl md:text-2xl font-bold text-gray-900 dark:text-white"},Q={key:0,class:"flex-shrink-0 mb-4"},X={class:"max-w-md mx-auto"},Y={class:"relative"},Z=["placeholder","disabled"],ee={key:1,class:"text-center space-y-2 max-h-32 overflow-y-auto"},te={key:0,class:"w-4 h-4 mr-1",fill:"currentColor",viewBox:"0 0 20 20"},re={key:1,class:"w-4 h-4 mr-1",fill:"currentColor",viewBox:"0 0 20 20"},ae={key:0,class:"text-center"},le={class:"text-sm text-gray-600 dark:text-white/70"},se={class:"font-semibold text-gray-900 dark:text-white"},ie={class:"text-xs text-gray-500 dark:text-white/60 mt-1 line-clamp-2"},oe={key:1,class:"text-center"},de={class:"text-sm text-gray-600 dark:text-white/70 line-clamp-2"},ne={key:2,class:"text-center text-sm text-gray-500 dark:text-white/60 mt-3"},ce=j(t({__name:"FlipTileMode",props:{card:{},flipTileAnswer:{},flipTileAnswered:{type:Boolean},flipTileCorrect:{type:Boolean},getTopicName:{type:Function},useHints:{type:Boolean}},emits:["update:flip-tile-answer","check-answer"],setup(t,{emit:j}){const ce=t,ue=j,{t:pe}=C(),{playAudio:fe}=T(),me=r(()=>ce.useHints??!0),xe=a(!1),ge=a(null),ve=a(""),he=b(()=>e(()=>import("./FireworkSoundEffect-DS0v3Px0.js"),__vite__mapDeps([0,1,2,3,4]),import.meta.url)),we=a(!1),ke=a(!1),be=a(!1),ye=a(),Ce=a([]),Te=e=>{const t=e.normalize("NFKC");const r=[],a=e=>/^[a-z]$/i.test(e);for(let l=0;l<t.length;l++){const e=t[l];a(e)?r.push({char:e,flipped:!1}):r.push({char:e,flipped:!0,separator:!0})}Ce.value=r},je=r(()=>Ce.value.filter(e=>e.flipped&&!e.separator).length),Ae=r(()=>Ce.value.filter(e=>!e.separator).length),_e=r(()=>Ae.value<=4?1:2),Me=r(()=>je.value<_e.value),Le=()=>{ue("update:flip-tile-answer",ve.value)},ze=()=>{ve.value.trim()&&ue("check-answer")},Be=()=>{xe.value=!0},Ee=()=>{we.value=!1,ke.value=!1};l(()=>ce.flipTileAnswered,e=>{e&&(Ce.value.forEach(e=>{e.separator||(e.flipped=!0)}),we.value||(be.value=ce.flipTileCorrect,setTimeout(()=>{we.value=!0,ke.value=!0},50))),e&&ce.flipTileCorrect&&ce.card?.word&&Promise.resolve(fe(ce.card.word)).catch(()=>{})}),l(()=>ce.card,e=>{xe.value=!1,ve.value="",e?.word&&Te(e.word),i(()=>{ge.value?.focus()})}),l(()=>ce.flipTileAnswer,e=>{e!==ve.value&&(ve.value=e)}),s(()=>{ce.card?.word&&Te(ce.card.word),i(()=>{ge.value?.focus()})});const Fe=()=>{ce.flipTileAnswered||setTimeout(()=>{ge.value?.focus()},0)};return(e,t)=>(d(),o("div",{class:"bg-white dark:bg-[#0a0a0a] rounded-xl shadow-2xl border border-gray-200 dark:border-dark-bg-mute p-6 min-h-96 max-h-[560px] select-none",onCopy:t[1]||(t[1]=y(()=>{},["prevent"])),onCut:t[2]||(t[2]=y(()=>{},["prevent"])),onContextmenu:t[3]||(t[3]=y(()=>{},["prevent"])),onMousedown:Fe},[n("div",A,[n("div",_,[n("span",M,p(e.card?.category?e.getTopicName(e.card.category):""),1),n("div",L,[n("span",z,p(f(pe)("flashcard.flipTile.tilesFlipped","Tiles flipped"))+": "+p(je.value)+"/"+p(_e.value),1)])]),n("div",B,[me.value||!e.card?.image?(d(),o("div",E,[n("div",F,[t[4]||(t[4]=n("div",{class:"mx-auto w-12 h-12 bg-teal-100 dark:bg-teal-800/50 rounded-full flex items-center justify-center mb-4"},[n("svg",{class:"w-6 h-6 text-teal-600 dark:text-teal-400",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor"},[n("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M12 6.253v13m0-13C10.832 5.477 9.246 5 7.5 5S4.168 5.477 3 6.253v13C4.168 18.477 5.754 18 7.5 18s3.332.477 4.5 1.253m0-13C13.168 5.477 14.754 5 16.5 5c1.746 0 3.332.477 4.5 1.253v13C19.832 18.477 18.246 18 16.5 18c-1.746 0-3.332.477-4.5 1.253"})])],-1)),n("div",I,[n("p",N,p(e.card?.meaning||f(pe)("flashcard.flipTile.noDefinition","No definition available")),1)])])])):!me.value&&e.card?.image?(d(),o("div",V,[n("img",{src:e.card.image,alt:f(pe)("flashcard.flipTile.imageAlt","Flip tile image"),class:"max-w-full max-h-40 object-contain rounded-lg shadow-md border border-gray-200 dark:border-dark-bg-mute filter blur-sm",onError:Be},null,40,D),xe.value?(d(),o("div",P,[n("div",S,[t[5]||(t[5]=n("svg",{class:"mx-auto h-12 w-12 text-gray-400 dark:text-white/50",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor"},[n("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M4 16l4.586-4.586a2 2 0 012.828 0L16 16m-2-2l1.586-1.586a2 2 0 012.828 0L20 16m-6-6h.01M6 20h12a2 2 0 002-2V6a2 2 0 00-2 2v12a2 2 0 002 2z"})],-1)),n("p",H,p(f(pe)("flashcard.image.imageError","Could not load image.")),1)])])):c("",!0)])):(d(),o("div",K,[n("div",U,[t[6]||(t[6]=n("svg",{class:"mx-auto h-16 w-16 text-gray-400 dark:text-white/50",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor"},[n("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M4 16l4.586-4.586a2 2 0 012.828 0L16 16m-2-2l1.586-1.586a2 2 0 012.828 0L20 16m-6-6h.01M6 20h12a2 2 0 002-2V6a2 2 0 00-2 2v12a2 2 0 002 2z"})],-1)),n("p",$,p(f(pe)("flashcard.flipTile.noContent","No content available for this card.")),1)])]))]),n("div",q,[n("div",J,[n("div",O,[(d(!0),o(m,null,x(Ce.value,(e,r)=>(d(),o("div",{key:r},[e.separator?(d(),o("div",R,p(e.char),1)):(d(),o("div",{key:1,class:g(["relative w-8 h-10 xs:w-10 xs:h-12 sm:w-12 sm:h-14 md:w-14 md:h-16 transition-all duration-500 tile-3d flex-shrink-0",[{"cursor-pointer":!e.flipped&&Me.value},e.flipped?"is-flipped":"hover:shadow-xl hover:scale-105"]]),onClick:e=>(e=>{const t=Ce.value[e];!t||t.separator||t.flipped||ce.flipTileAnswered||Me.value&&(t.flipped=!0)})(r)},[t[7]||(t[7]=n("div",{class:"tile-face absolute inset-0 flex items-center justify-center rounded-lg border-2 bg-gradient-to-br from-blue-500 to-purple-600 dark:from-blue-600 dark:to-purple-700 border-blue-400 dark:border-blue-500 shadow-lg"},[n("div",{class:"text-white"},[n("svg",{class:"w-3 h-3 xs:w-4 xs:h-4 sm:w-5 sm:h-5 md:w-6 md:h-6",fill:"currentColor",viewBox:"0 0 20 20"},[n("path",{"fill-rule":"evenodd",d:"M18 10a8 8 0 11-16 0 8 8 0 0116 0zm-8-3a1 1 0 00-.867.5 1 1 0 11-1.731-1A3 3 0 0113 8a3.001 3.001 0 01-2 2.83V11a1 1 0 11-2 0v-1a1 1 0 011-1 1 1 0 100-2zm0 8a1 1 0 100-2 1 1 0 000 2z","clip-rule":"evenodd"})])])],-1)),n("div",G,p(e.char.toUpperCase()),1)],10,W))]))),128))])])]),e.flipTileAnswered?c("",!0):(d(),o("div",Q,[n("div",X,[n("div",Y,[v(n("input",{ref_key:"answerInput",ref:ge,"onUpdate:modelValue":t[0]||(t[0]=e=>ve.value=e),type:"text",placeholder:f(pe)("flashcard.flipTile.answerPlaceholder","Type your answer..."),class:"w-full px-4 py-3 text-lg font-medium text-center rounded-xl border-2 bg-white dark:bg-dark-bg-soft text-gray-900 dark:text-white border-gray-300 dark:border-dark-bg-mute focus:outline-none focus:border-blue-500 dark:focus:border-blue-400 focus:ring-2 focus:ring-blue-200 dark:focus:ring-blue-800/50 transition-all duration-200",disabled:e.flipTileAnswered,onKeydown:w(ze,["enter"]),onInput:Le},null,40,Z),[[h,ve.value]]),ve.value.trim()?(d(),o("button",{key:0,onClick:ze,class:"absolute right-3 top-1/2 transform -translate-y-1/2 px-3 py-1 bg-blue-500 hover:bg-blue-600 dark:bg-blue-600 dark:hover:bg-blue-700 text-white text-sm font-medium rounded-lg transition-colors duration-200"},p(f(pe)("flashcard.flipTile.check","Check")),1)):c("",!0)])])])),e.flipTileAnswered?(d(),o("div",ee,[n("div",{class:g(["inline-flex items-center px-3 py-1 rounded-full text-sm font-medium",e.flipTileCorrect?"bg-green-100 dark:bg-green-900 text-green-800 dark:text-green-300":"bg-red-100 dark:bg-red-900 text-red-800 dark:text-red-300"])},[e.flipTileCorrect?(d(),o("svg",te,t[8]||(t[8]=[n("path",{"fill-rule":"evenodd",d:"M16.707 5.293a1 1 0 010 1.414l-8 8a1 1 0 01-1.414 0l-4-4a1 1 0 011.414-1.414L8 12.586l7.293-7.293a1 1 0 011.414 0z","clip-rule":"evenodd"},null,-1)]))):(d(),o("svg",re,t[9]||(t[9]=[n("path",{"fill-rule":"evenodd",d:"M4.293 4.293a1 1 0 011.414 0L10 8.586l4.293-4.293a1 1 0 111.414 1.414L11.414 10l4.293 4.293a1 1 0 01-1.414 1.414L10 11.414l-4.293 4.293a1 1 0 01-1.414-1.414L8.586 10 4.293 5.707a1 1 0 010-1.414z","clip-rule":"evenodd"},null,-1)]))),k(" "+p(e.flipTileCorrect?f(pe)("common.correct","Correct"):f(pe)("common.incorrect","Incorrect")),1)],2),e.flipTileCorrect?(d(),o("div",oe,[n("p",de,p(e.card?.meaning),1)])):(d(),o("div",ae,[n("p",le,[k(p(f(pe)("flashcard.image.correctAnswer","Correct answer"))+": ",1),n("span",se,p(e.card?.word),1)]),n("p",ie,p(e.card?.meaning),1)]))])):c("",!0),e.flipTileAnswered?c("",!0):(d(),o("p",ne,p(f(pe)("flashcard.flipTile.instruction",`Click on tiles to reveal letters (max ${_e.value}), then type your answer and press Enter.`)),1)),u(f(he),{ref_key:"fireworkEffect",ref:ye,"trigger-firework":we.value,"trigger-sound":ke.value,"is-correct":be.value,onEffectComplete:Ee},null,8,["trigger-firework","trigger-sound","is-correct"])])],32))}}),[["__scopeId","data-v-315f8aba"]]);export{ce as default};
