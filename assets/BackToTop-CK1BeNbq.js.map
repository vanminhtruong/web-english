{"version":3,"file":"BackToTop-CK1BeNbq.js","sources":["../../src/stores/scroll.ts","../../src/components/common/BackToTop.vue"],"sourcesContent":["import { defineStore } from 'pinia'\nimport { ref, onMounted, onUnmounted } from 'vue'\n\nexport const useScrollStore = defineStore('scroll', () => {\n  // State\n  const scrollY = ref(0)\n  const showBackToTop = ref(false)\n  const isScrolling = ref(false)\n\n  // Threshold để hiển thị nút back to top (pixels)\n  const SCROLL_THRESHOLD = 300\n\n  // Throttle scroll events để optimize performance\n  let scrollTimer: number | null = null\n\n  // Actions\n  const handleScroll = () => {\n    scrollY.value = window.scrollY\n    showBackToTop.value = scrollY.value > SCROLL_THRESHOLD\n    \n    // Set scrolling state\n    isScrolling.value = true\n    \n    // Clear existing timer\n    if (scrollTimer) {\n      clearTimeout(scrollTimer)\n    }\n    \n    // Set timer to detect when scrolling stops\n    scrollTimer = setTimeout(() => {\n      isScrolling.value = false\n    }, 150)\n  }\n\n  const scrollToTop = () => {\n    window.scrollTo({\n      top: 0,\n      behavior: 'smooth'\n    })\n  }\n\n  const initScrollListener = () => {\n    window.addEventListener('scroll', handleScroll, { passive: true })\n    // Initial check\n    handleScroll()\n  }\n\n  const removeScrollListener = () => {\n    window.removeEventListener('scroll', handleScroll)\n    if (scrollTimer) {\n      clearTimeout(scrollTimer)\n      scrollTimer = null\n    }\n  }\n\n  // Getters\n  const scrollPercentage = () => {\n    const documentHeight = document.documentElement.scrollHeight - window.innerHeight\n    return documentHeight > 0 ? Math.min((scrollY.value / documentHeight) * 100, 100) : 0\n  }\n\n  const isNearTop = () => scrollY.value < 100\n  const isNearBottom = () => {\n    const documentHeight = document.documentElement.scrollHeight\n    const viewportHeight = window.innerHeight\n    return scrollY.value + viewportHeight >= documentHeight - 100\n  }\n\n  return {\n    // State\n    scrollY,\n    showBackToTop,\n    isScrolling,\n    \n    // Actions\n    scrollToTop,\n    initScrollListener,\n    removeScrollListener,\n    \n    // Getters\n    scrollPercentage,\n    isNearTop,\n    isNearBottom\n  }\n})\n","<template>\n  <Transition\n    name=\"fade-scale\"\n    enter-active-class=\"fade-scale-enter-active\"\n    enter-from-class=\"fade-scale-enter-from\"\n    leave-active-class=\"fade-scale-leave-active\"\n    leave-to-class=\"fade-scale-leave-to\"\n  >\n    <div\n      v-show=\"showBackToTop\"\n      class=\"fixed bottom-6 z-50 left-1/2 -translate-x-[calc(100%+1rem)] sm:left-1/2 sm:-translate-x-[calc(100%+4px)] lg:left-6 lg:translate-x-0\"\n    >\n      <!-- Tooltip -->\n      <Transition\n        name=\"fade\"\n        enter-active-class=\"transition-opacity duration-200\"\n        enter-from-class=\"opacity-0\"\n        leave-active-class=\"transition-opacity duration-200\"\n        leave-to-class=\"opacity-0\"\n      >\n        <div\n          v-show=\"showTooltip\"\n          class=\"absolute bottom-full left-1/2 transform -translate-x-1/2 mb-2 px-2 py-1 text-xs text-white bg-gray-900 dark:bg-dark-bg rounded shadow-lg whitespace-nowrap z-10 pointer-events-none\"\n        >\n          {{ tooltipText }}\n          <!-- Arrow -->\n          <div class=\"absolute top-full left-1/2 transform -translate-x-1/2 w-0 h-0 border-l-4 border-r-4 border-t-4 border-transparent border-t-gray-900 dark:border-t-dark-bg\"></div>\n        </div>\n      </Transition>\n\n      <!-- Back to Top Button -->\n      <button\n        @click=\"handleScrollToTop\"\n        @mouseenter=\"showTooltip = true\"\n        @mouseleave=\"showTooltip = false\"\n        class=\"group w-12 h-12 sm:w-14 sm:h-14 md:w-16 md:h-16 bg-blue-600 hover:bg-blue-700 dark:bg-blue-500 dark:hover:bg-blue-600 text-white rounded-full shadow-lg hover:shadow-xl transform hover:scale-105 transition-all duration-300 flex items-center justify-center\"\n        :aria-label=\"t('common.backToTop')\"\n      >\n        <!-- Arrow Up Icon -->\n        <svg\n          class=\"w-6 h-6 sm:w-7 sm:h-7 md:w-8 md:h-8 transform group-hover:-translate-y-0.5 transition-transform duration-200\"\n          fill=\"none\"\n          stroke=\"currentColor\"\n          viewBox=\"0 0 24 24\"\n          xmlns=\"http://www.w3.org/2000/svg\"\n        >\n          <path\n            stroke-linecap=\"round\"\n            stroke-linejoin=\"round\"\n            stroke-width=\"2\"\n            d=\"M5 10l7-7m0 0l7 7m-7-7v18\"\n          />\n        </svg>\n\n        <!-- Progress Ring (optional) -->\n        <svg\n          v-if=\"showProgress\"\n          class=\"absolute inset-0 w-full h-full -rotate-90\"\n          viewBox=\"0 0 100 100\"\n        >\n          <circle\n            cx=\"50\"\n            cy=\"50\"\n            r=\"45\"\n            fill=\"none\"\n            stroke=\"currentColor\"\n            stroke-width=\"2\"\n            opacity=\"0.3\"\n          />\n          <circle\n            cx=\"50\"\n            cy=\"50\"\n            r=\"45\"\n            fill=\"none\"\n            stroke=\"currentColor\"\n            stroke-width=\"2\"\n            :stroke-dasharray=\"circumference\"\n            :stroke-dashoffset=\"circumference - (scrollPercentage / 100) * circumference\"\n            class=\"transition-all duration-300\"\n          />\n        </svg>\n      </button>\n    </div>\n  </Transition>\n</template>\n\n<script setup lang=\"ts\">\nimport { ref, computed, onMounted, onUnmounted } from 'vue'\nimport { useI18n } from 'vue-i18n'\nimport { useScrollStore } from '../../stores/scroll'\nimport { useModalStore } from '../../stores/modalStore'\n\n// Props\ninterface Props {\n  showProgress?: boolean\n}\n\nconst props = withDefaults(defineProps<Props>(), {\n  showProgress: false\n})\n\n// Composables\nconst { t } = useI18n()\nconst scrollStore = useScrollStore()\nconst modalStore = useModalStore()\n\n// State\nconst showTooltip = ref(false)\n\n// Computed - Hide when modal is open\nconst showBackToTop = computed(() => {\n  return scrollStore.showBackToTop && !modalStore.shouldHideBackToTop\n})\nconst scrollPercentage = computed(() => scrollStore.scrollPercentage())\n\n// For progress ring calculation\nconst circumference = computed(() => 2 * Math.PI * 45) // radius = 45\n\n// Methods\nconst handleScrollToTop = () => {\n  showTooltip.value = false\n  scrollStore.scrollToTop()\n}\n\n// Tooltip text with i18n param and robust fallback\nconst displayPercent = computed(() => Math.round(scrollPercentage.value))\nconst tooltipText = computed(() => {\n  const key = 'common.backToTopTooltip'\n  const translated = t(key, { percent: displayPercent.value }) as string\n  const isMissing = translated === key || translated.includes('{percent}')\n  return isMissing ? `Back to Top (${displayPercent.value}%)` : translated\n})\n\n// Lifecycle\nonMounted(() => {\n  scrollStore.initScrollListener()\n})\n\nonUnmounted(() => {\n  scrollStore.removeScrollListener()\n})\n</script>\n\n<style scoped>\n.fade-scale-enter-active,\n.fade-scale-leave-active {\n  transition: all 0.3s cubic-bezier(0.4, 0, 0.2, 1);\n}\n\n.fade-scale-enter-from,\n.fade-scale-leave-to {\n  opacity: 0;\n  transform: scale(0.8) translateY(10px);\n}\n\n/* XS: Override animation to include positioning */\n@media (max-width: 639px) {\n  .fade-scale-enter-from,\n  .fade-scale-leave-to {\n    opacity: 0;\n    transform: scale(0.8) translateY(10px) translateX(calc(-100% - 1rem));\n  }\n  \n  .fade-scale-enter-to,\n  .fade-scale-leave-from {\n    opacity: 1;\n    transform: scale(1) translateY(0) translateX(calc(-100% - 1rem));\n  }\n}\n</style>\n"],"names":["_createBlock","_Transition","_withDirectives","_createElementVNode","_createVNode","_createTextVNode","_toDisplayString","_unref","showProgress","_openBlock","_createElementBlock"],"mappings":"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"}