const __vite__mapDeps=(i,m=__vite__mapDeps,d=(m.f||(m.f=["/web-english/assets/FireworkSoundEffect-DS0v3Px0.js","/web-english/assets/utils-vendor-DwIcHP6x.js","/web-english/assets/vue-vendor-Bt65BSdi.js","/web-english/assets/_plugin-vue_export-helper-BCo6x5W8.js","/web-english/assets/FireworkSoundEffect-CV0ieEWB.css"])))=>i.map(i=>d[i]);
import{_ as e}from"./index-DmJNupMF.js";import{d as r,A as a,D as t,I as s,c as l,v as d,f as i,y as o,t as n,u as c,e as g,M as u,_ as m,W as x,F as p,j as w,n as f,g as k,N as b,i as h,q as y}from"./vue-vendor-Bt65BSdi.js";import{u as v}from"./ui-vendor-D-J_fEQ5.js";import{a as C}from"./topicUtils-CuplmVBM.js";const z={class:"h-full flex flex-col overflow-hidden"},A={class:"mb-4 text-center"},E={class:"px-3 py-1 bg-purple-100 dark:bg-dark-bg-mute text-purple-800 dark:text-purple-300 text-sm font-medium rounded-full"},Q={class:"flex-1 flex items-center justify-center mb-4 min-h-0"},j={key:0,class:"relative"},_=["src","alt"],L={key:0,class:"absolute inset-0 flex items-center justify-center bg-gray-100 dark:bg-dark-bg-mute rounded-lg"},B={class:"text-center"},I={class:"text-sm text-gray-500 dark:text-white/60 mt-2"},S={key:1,class:"flex items-center justify-center bg-gray-100 dark:bg-dark-bg-mute rounded-lg p-8 w-full max-w-sm"},M={class:"text-center"},F={class:"text-sm text-gray-500 dark:text-white/60 mt-2"},T={class:"space-y-3 flex-shrink-0"},q={key:0},D=["disabled","placeholder"],V={key:1},N={class:"grid grid-cols-1 sm:grid-cols-2 gap-2 justify-items-center sm:justify-items-center justify-center mx-auto max-w-[560px] sm:max-w-[520px]"},O=["onClick","disabled"],H={class:"inline-flex items-center justify-center w-5 h-5 rounded-full text-xs font-semibold bg-gray-200 text-gray-700 dark:bg-white/10 dark:text-white/80"},K={class:"truncate"},U={key:2,class:"text-center space-y-2 max-h-32 overflow-y-auto"},W={key:0,class:"w-4 h-4 mr-1",fill:"currentColor",viewBox:"0 0 20 20"},P={key:1,class:"w-4 h-4 mr-1",fill:"currentColor",viewBox:"0 0 20 20"},R={key:0,class:"text-center"},G={class:"text-sm text-gray-600 dark:text-white/70"},J={class:"font-semibold text-gray-900 dark:text-white"},X={class:"text-xs text-gray-500 dark:text-white/60 mt-1 line-clamp-2"},Y={key:1,class:"text-center"},Z={class:"text-sm text-gray-600 dark:text-white/70 line-clamp-2"},$={key:3,class:"text-center text-sm text-gray-500 dark:text-white/60"},ee={key:4,class:"text-center text-sm text-gray-500 dark:text-white/60"},re="flashcard_image_quiz_enabled",ae=r({__name:"FlashcardImage",props:{currentCard:{},imageAnswer:{},imageAnswered:{type:Boolean},imageCorrect:{type:Boolean},imageQuizEnabled:{type:Boolean},imageQuizOptions:{},imageQuizSelected:{},imageQuizAnswered:{type:Boolean}},emits:["update:imageAnswer","checkAnswer","update:imageQuizEnabled","select-image-quiz-answer"],setup(r,{emit:ae}){const te=b(()=>e(()=>import("./FireworkSoundEffect-DS0v3Px0.js"),__vite__mapDeps([0,1,2,3,4]),import.meta.url)),se=a(!1),le=a(!1),de=a(!1),ie=a(),oe=r,ne=ae,{t:ce}=v(),ge=a(""),ue=a(!1),me=a(null);t(()=>oe.imageAnswer,e=>{ge.value=e});t(ge,e=>{const r=e.replace(/[ưừứửữự]/g,"w").replace(/[ƯỪỨỬỮỰ]/g,"W").normalize("NFD").replace(/[\u0300-\u036f]/g,"").replace(/đ/g,"d").replace(/Đ/g,"D");r!==e&&(ge.value=r),ne("update:imageAnswer",r)}),t(()=>oe.currentCard,()=>{ue.value=!1});const xe=()=>{ue.value=!0},pe=()=>{!oe.imageAnswered&&ge.value.trim()&&(ne("checkAnswer"),setTimeout(()=>{de.value=oe.imageCorrect,se.value=!0,le.value=!0},100))},we=()=>{se.value=!1,le.value=!1};t(()=>oe.imageAnswered,e=>{e&&!se.value&&(de.value=oe.imageCorrect,setTimeout(()=>{se.value=!0,le.value=!0},50))}),s(()=>{try{const e=localStorage.getItem(re);if(null!==e){const r="true"===e;r!==oe.imageQuizEnabled&&ne("update:imageQuizEnabled",r)}}catch(e){}be()}),t(()=>oe.imageQuizEnabled,e=>{try{localStorage.setItem(re,String(e))}catch(r){}e||be()});const fe=e=>oe.imageQuizSelected===e,ke=e=>!!oe.currentCard&&e.trim().toLowerCase()===oe.currentCard.word.trim().toLowerCase(),be=()=>{oe.imageQuizEnabled||oe.imageAnswered||document.activeElement!==me.value&&(async()=>{await y();try{me.value?.focus({preventScroll:!0})}catch{me.value?.focus()}})()},he=()=>{be()};return t(()=>oe.imageAnswered,e=>{e||be()}),t(()=>oe.currentCard,()=>{be()}),(e,r)=>(d(),l("div",{class:"bg-white dark:bg-[#0a0a0a] rounded-xl shadow-2xl border border-gray-200 dark:border-dark-bg-mute p-6 min-h-96 max-h-[500px] select-none",onCopy:r[1]||(r[1]=h(()=>{},["prevent"])),onCut:r[2]||(r[2]=h(()=>{},["prevent"])),onContextmenu:r[3]||(r[3]=h(()=>{},["prevent"]))},[i("div",z,[i("div",A,[i("span",E,n(e.currentCard?.category?c(C)(e.currentCard.category):""),1)]),i("div",Q,[e.currentCard?.image?(d(),l("div",j,[i("img",{src:e.currentCard.image,alt:c(ce)("flashcard.image.imageAlt","Flashcard image"),class:"max-w-full max-h-40 object-contain rounded-lg shadow-md border border-gray-200 dark:border-dark-bg-mute",onError:xe},null,40,_),ue.value?(d(),l("div",L,[i("div",B,[r[4]||(r[4]=i("svg",{class:"mx-auto h-12 w-12 text-gray-400 dark:text-white/50",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor"},[i("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M4 16l4.586-4.586a2 2 0 012.828 0L16 16m-2-2l1.586-1.586a2 2 0 012.828 0L20 16m-6-6h.01M6 20h12a2 2 0 002-2V6a2 2 0 00-2-2H6a2 2 0 00-2 2v12a2 2 0 002 2z"})],-1)),i("p",I,n(c(ce)("flashcard.image.imageError","Could not load image.")),1)])])):g("",!0)])):(d(),l("div",S,[i("div",M,[r[5]||(r[5]=i("svg",{class:"mx-auto h-16 w-16 text-gray-400 dark:text-white/50",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor"},[i("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M4 16l4.586-4.586a2 2 0 012.828 0L16 16m-2-2l1.586-1.586a2 2 0 012.828 0L20 16m-6-6h.01M6 20h12a2 2 0 002-2V6a2 2 0 00-2-2H6a2 2 0 00-2 2v12a2 2 0 002 2z"})],-1)),i("p",F,n(c(ce)("flashcard.image.noImage","No image available for this card.")),1)])]))]),i("div",T,[e.imageQuizEnabled?(d(),l("div",V,[i("div",N,[(d(!0),l(p,null,w(e.imageQuizOptions,(r,a)=>(d(),l("button",{key:a,onClick:e=>(e=>{oe.imageQuizAnswered||ne("select-image-quiz-answer",e)})(r),disabled:e.imageQuizAnswered,translate:"no",class:f(["notranslate px-3 py-2 rounded-md border text-[13px] sm:text-sm transition-all duration-150 disabled:opacity-70 disabled:cursor-not-allowed text-left flex items-center gap-2 w-full max-w-[260px] sm:max-w-[240px]",[e.imageQuizAnswered?ke(r)?"bg-green-100 dark:bg-green-900 text-green-800 dark:text-green-300 border-green-300 dark:border-green-700":fe(r)?"bg-red-100 dark:bg-red-900 text-red-800 dark:text-red-300 border-red-300 dark:border-red-700":"bg-white dark:bg-gray-custom text-gray-900 dark:text-white border-gray-300 dark:border-gray-custom/60":"bg-white dark:bg-gray-custom text-gray-900 dark:text-white border-gray-300 dark:border-gray-custom/60 hover:shadow-sm hover:scale-[1.01] dark:hover:bg-white/5"]])},[i("span",H,n(String.fromCharCode(65+a)),1),i("span",K,n(r),1)],10,O))),128))])])):(d(),l("div",q,[u(i("input",{ref_key:"imageTypingInput",ref:me,"onUpdate:modelValue":r[0]||(r[0]=e=>ge.value=e),onKeyup:x(pe,["enter"]),type:"text",disabled:e.imageAnswered,placeholder:c(ce)("flashcard.image.placeholder","Enter your answer..."),class:"w-full px-4 py-3 text-center text-lg border border-gray-300 dark:border-dark-bg-mute rounded-lg focus:ring-2 focus:ring-purple-500 focus:border-transparent bg-white dark:bg-dark-bg-soft text-gray-900 dark:text-white placeholder-gray-500 dark:placeholder-white/50 disabled:opacity-50 disabled:cursor-not-allowed select-text",inputmode:"text",autocapitalize:"none",autocomplete:"off",spellcheck:"false",onBlur:he},null,40,D),[[m,ge.value]])])),e.imageAnswered?(d(),l("div",U,[i("div",{class:f(["inline-flex items-center px-3 py-1 rounded-full text-sm font-medium",e.imageCorrect?"bg-green-100 dark:bg-green-900 text-green-800 dark:text-green-300":"bg-red-100 dark:bg-red-900 text-red-800 dark:text-red-300"])},[e.imageCorrect?(d(),l("svg",W,r[6]||(r[6]=[i("path",{"fill-rule":"evenodd",d:"M16.707 5.293a1 1 0 010 1.414l-8 8a1 1 0 01-1.414 0l-4-4a1 1 0 011.414-1.414L8 12.586l7.293-7.293a1 1 0 011.414 0z","clip-rule":"evenodd"},null,-1)]))):(d(),l("svg",P,r[7]||(r[7]=[i("path",{"fill-rule":"evenodd",d:"M4.293 4.293a1 1 0 011.414 0L10 8.586l4.293-4.293a1 1 0 111.414 1.414L11.414 10l4.293 4.293a1 1 0 01-1.414 1.414L10 11.414l-4.293 4.293a1 1 0 01-1.414-1.414L8.586 10 4.293 5.707a1 1 0 010-1.414z","clip-rule":"evenodd"},null,-1)]))),k(" "+n(e.imageCorrect?c(ce)("common.correct","Correct"):c(ce)("common.incorrect","Incorrect")),1)],2),e.imageCorrect?(d(),l("div",Y,[i("p",Z,n(e.currentCard?.meaning),1)])):(d(),l("div",R,[i("p",G,[k(n(c(ce)("flashcard.image.correctAnswer","Correct answer"))+": ",1),i("span",J,n(e.currentCard?.word),1)]),i("p",X,n(e.currentCard?.meaning),1)]))])):g("",!0),e.imageAnswered||e.imageQuizEnabled?g("",!0):(d(),l("p",$,n(c(ce)("flashcard.image.instruction","Type the word for the image above and press Enter.")),1)),!e.imageAnswered&&e.imageQuizEnabled?(d(),l("p",ee,n(c(ce)("flashcard.image.instructionQuiz","Choose the correct word for the image.")),1)):g("",!0)])]),o(c(te),{ref_key:"fireworkEffect",ref:ie,"trigger-firework":se.value,"trigger-sound":le.value,"is-correct":de.value,onEffectComplete:we},null,8,["trigger-firework","trigger-sound","is-correct"])],32))}});export{ae as default};
