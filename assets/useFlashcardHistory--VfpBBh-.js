import{u as e}from"./ui-vendor-D-J_fEQ5.js";import{A as t,I as a}from"./vue-vendor-Bt65BSdi.js";function r(){const r=t(!1),o=t([]),{t:n,locale:s}=e(),i=()=>{localStorage.setItem("flashcard-practice-history",JSON.stringify(o.value))};return a(()=>{(()=>{const e=localStorage.getItem("flashcard-practice-history");if(e){const t=JSON.parse(e);o.value=t.map(e=>{if(void 0===e.hasDetails){const t=!!localStorage.getItem(`flashcard-session-details:${e.id}`);return{...e,hasDetails:t}}return e}),i()}})()}),{showHistory:r,practiceHistory:o,saveSessionToHistory:(e,t,a)=>{const r=e.endTime&&e.startTime?Math.round((e.endTime.getTime()-e.startTime.getTime())/1e3):0,n=e.correct+e.incorrect,s=n>0?Math.round(e.correct/n*100):0,c=Math.round(s*(t/100)),l=a||Date.now().toString(),d={id:l,date:(new Date).toISOString(),mode:e.mode,totalCards:t,correctAnswers:e.correct,incorrectAnswers:e.incorrect,accuracy:s,duration:r,score:c,categories:e.categories||[],hasDetails:!0};return o.value.unshift(d),o.value.length>50&&(o.value=o.value.slice(0,50)),i(),l},getModeColor:e=>{switch(e){case"flashcard":return"bg-blue-100 text-blue-800 dark:bg-blue-900 dark:text-blue-200";case"quiz":return"bg-green-100 text-green-800 dark:bg-green-900 dark:text-green-200";case"typing":return"bg-purple-100 text-purple-800 dark:bg-purple-900 dark:text-purple-200";case"listening":return"bg-orange-100 text-orange-800 dark:bg-orange-900 dark:text-orange-200";case"image":return"bg-pink-100 text-pink-800 dark:bg-pink-900 dark:text-pink-200";case"pictionary":return"bg-yellow-100 text-yellow-800 dark:bg-yellow-900 dark:text-yellow-200";case"pronunciation":return"bg-indigo-100 text-indigo-800 dark:bg-indigo-900 dark:text-indigo-200";case"bubble-shooter":return"bg-teal-100 text-teal-800 dark:bg-teal-900 dark:text-teal-200";case"snake-game":return"bg-red-100 text-red-800 dark:bg-red-900 dark:text-red-200";default:return"bg-cyan-100 text-cyan-800 dark:bg-cyan-900 dark:text-cyan-200"}},getModeText:e=>{switch(e){case"flashcard":return n("flashcard.modes.flashcard","Flashcard");case"quiz":return n("flashcard.modes.quiz","Quiz");case"typing":return n("flashcard.modes.typing","Typing");case"listening":return n("flashcard.modes.listening","Listening");case"image":return n("flashcard.modes.image","Image");case"pictionary":return n("flashcard.modes.pictionary","Pictionary");case"pronunciation":return n("flashcard.modes.pronunciation","Pronunciation");case"bubble-shooter":return n("flashcard.modes.bubbleShooter","Bubble Shooter");case"snake-game":return n("flashcard.modes.snakeGame","Snake Hunt");default:return"Unknown"}},formatDate:e=>{const t=new Date(e),a=(new Date).getTime()-t.getTime(),r=Math.floor(a/864e5),o="en"===s.value?"en-US":"vi-VN";return 0===r?"en"===s.value?"Today":"Hôm nay":1===r?"en"===s.value?"Yesterday":"Hôm qua":r<7?"en"===s.value?`${r} days ago`:`${r} ngày trước`:t.toLocaleDateString(o)},formatDuration:e=>`${Math.floor(e/60)}:${(e%60).toString().padStart(2,"0")}`,clearHistory:()=>{o.value=[],i(),Object.keys(localStorage).forEach(e=>{e.startsWith("flashcard-session-details:")&&localStorage.removeItem(e)})},deleteSession:e=>{o.value=o.value.filter(t=>t.id!==e),i(),localStorage.removeItem(`flashcard-session-details:${e}`)},getHistoryStats:()=>{if(0===o.value.length)return{totalSessions:0,averageAccuracy:0,totalCards:0,totalTime:0,bestScore:0,favoriteMode:""};const e=o.value.length,t=o.value.reduce((e,t)=>e+t.totalCards,0),a=o.value.reduce((e,t)=>e+t.duration,0),r=Math.round(o.value.reduce((e,t)=>e+t.accuracy,0)/e),n=Math.max(...o.value.map(e=>e.score)),s=o.value.reduce((e,t)=>(e[t.mode]=(e[t.mode]||0)+1,e),{});return{totalSessions:e,averageAccuracy:r,totalCards:t,totalTime:a,bestScore:n,favoriteMode:Object.entries(s).sort(([,e],[,t])=>t-e)[0]?.[0]||""}}}}export{r as u};
