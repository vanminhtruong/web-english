{"version":3,"file":"TopicManagerPanel-BKdL5A87.js","sources":["../../src/views/vocabulary/components/TopicManagerPanel.vue"],"sourcesContent":["<template>\n  <div ref=\"containerRef\" class=\"bg-white dark:bg-[#0a0a0a] rounded-lg shadow border border-gray-200 dark:border-dark-bg-mute p-4 sm:p-5 mb-6\">\n    <div class=\"flex flex-col md:flex-row md:items-center md:justify-between gap-3 sm:gap-4\">\n      <div class=\"flex items-center space-x-4 sm:space-x-4\">\n        <svg class=\"w-5 h-5 text-gray-500 dark:text-gray-400\" fill=\"currentColor\" viewBox=\"0 0 20 20\">\n          <path fill-rule=\"evenodd\" d=\"M3 4a1 1 0 011-1h12a1 1 0 110 2H4a1 1 0 01-1-1zm0 4a1 1 0 011-1h12a1 1 0 110 2H4a1 1 0 01-1-1zm0 4a1 1 0 011-1h12a1 1 0 110 2H4a1 1 0 01-1-1z\" clip-rule=\"evenodd\"/>\n        </svg>\n        <div class=\"flex flex-col space-y-0.5 sm:space-y-1\">\n          <h3 class=\"text-sm font-medium text-gray-900 dark:text-white\">{{ t('vocabulary.topicManager.title', 'Topic Manager') }}</h3>\n          <p class=\"text-xs text-gray-500 dark:text-gray-400\">{{ t('vocabulary.topicManager.builtInTopicsDescription', 'Manage built-in topics and categories') }}</p>\n        </div>\n      </div>\n      <button\n        @click=\"emit('open')\"\n        class=\"px-4 py-2 bg-purple-600 hover:bg-purple-700 text-white text-sm font-medium rounded-lg transition-colors flex items-center space-x-2 self-start md:self-auto mt-3 sm:mt-3 md:mt-0 w-full md:w-auto\"\n      >\n        <svg class=\"h-4 w-4\" fill=\"none\" stroke=\"currentColor\" viewBox=\"0 0 24 24\">\n          <path stroke-linecap=\"round\" stroke-linejoin=\"round\" stroke-width=\"2\" d=\"M12 6v6m0 0v6m0-6h6m-6 0H6\"/>\n        </svg>\n        <span>{{ t('vocabulary.topicManager.manageTopics', 'Manage Topics') }}</span>\n      </button>\n    </div>\n    \n    <!-- Sticky Manager Topic Button -->\n    <Teleport to=\"body\">\n      <Transition name=\"sticky-fade\">\n        <div \n          v-show=\"shouldShowStickyButton\"\n          class=\"fixed top-20 right-6 z-[9999]\"\n          style=\"position: fixed !important;\"\n        >\n          <button\n            @click=\"emit('open')\"\n            @mouseenter=\"showTooltip = true\"\n            @mouseleave=\"showTooltip = false\"\n            class=\"relative bg-purple-600 hover:bg-purple-700 dark:bg-purple-600 dark:hover:bg-purple-500 text-white font-medium w-12 h-12 sm:w-14 sm:h-14 md:w-16 md:h-16 rounded-full shadow-lg hover:shadow-xl transition-all duration-300 transform hover:scale-105 flex items-center justify-center\"\n          >\n            <svg class=\"w-5 h-5 sm:w-6 sm:h-6 md:w-7 md:h-7\" fill=\"none\" stroke=\"currentColor\" viewBox=\"0 0 24 24\">\n              <path stroke-linecap=\"round\" stroke-linejoin=\"round\" stroke-width=\"2\" d=\"M12 6v6m0 0v6m0-6h6m-6 0H6\"/>\n            </svg>\n            \n            <!-- Tooltip -->\n            <div\n              v-if=\"showTooltip\"\n              class=\"absolute bottom-full right-0 mb-2 px-3 py-2 text-xs font-medium text-white bg-gray-900 dark:bg-[#0a0a0a] dark:border dark:border-dark-bg-mute rounded-lg shadow-lg whitespace-nowrap z-[10000]\"\n            >\n              {{ t('vocabulary.topicManager.manageTopics', 'Manage Topics') }}\n              <div class=\"absolute top-full right-4 w-0 h-0 border-l-4 border-r-4 border-t-4 border-transparent border-t-gray-900 dark:border-t-[#0a0a0a]\"></div>\n            </div>\n          </button>\n        </div>\n      </Transition>\n    </Teleport>\n  </div>\n</template>\n\n<script setup lang=\"ts\">\nimport { ref, computed, onMounted, onUnmounted } from 'vue';\nimport { useI18n } from 'vue-i18n';\nimport { useModalStore } from '../../../stores/modalStore';\n\nconst emit = defineEmits(['open']);\nconst { t } = useI18n();\nconst modalStore = useModalStore();\n\n// Refs\nconst containerRef = ref<HTMLElement>();\nconst showStickyButton = ref(false);\nconst showTooltip = ref(false);\nconst isXlScreen = ref(false);\nconst isToolsAccordionOpen = ref(true);\n\n// Check if screen is XL or larger\nconst checkScreenSize = () => {\n  isXlScreen.value = window.innerWidth >= 1280; // xl breakpoint\n};\n\n// Check Tools & Settings accordion state from localStorage\nconst checkAccordionState = () => {\n  try {\n    const stored = localStorage.getItem('accordion-vocabulary-tools');\n    isToolsAccordionOpen.value = stored !== null ? JSON.parse(stored) : true;\n  } catch {\n    isToolsAccordionOpen.value = true;\n  }\n};\n\n// Computed to show sticky button based on conditions\nconst shouldShowStickyButton = computed(() => {\n  // Only show on XL screens and up\n  if (!isXlScreen.value) return false;\n  \n  // Hide when any modal is open\n  if (modalStore.shouldHideBackToTop) return false;\n  \n  // Show if: (scrolled past container) OR (tools accordion is closed)\n  return showStickyButton.value || !isToolsAccordionOpen.value;\n});\n\n// Scroll handler\nconst handleScroll = () => {\n  if (!containerRef.value) return;\n  \n  const rect = containerRef.value.getBoundingClientRect();\n  const containerTop = rect.top;\n  const containerBottom = rect.bottom;\n  \n  // Show sticky button khi container đã cuộn qua khỏi viewport\n  // Hiển thị khi top của container < 0 (đã cuộn qua)\n  showStickyButton.value = containerTop < -50; // Thêm offset để trigger sớm hơn\n  \n  // Debug log (optional - can be removed in production)\n  // console.log('Scroll position:', { containerTop, containerBottom, showSticky: showStickyButton.value });\n};\n\n// Lifecycle\nonMounted(() => {\n  window.addEventListener('scroll', handleScroll, { passive: true });\n  window.addEventListener('resize', checkScreenSize, { passive: true });\n  \n  // Listen for localStorage changes (accordion state)\n  window.addEventListener('storage', checkAccordionState);\n  \n  // Initial checks\n  handleScroll();\n  checkScreenSize();\n  checkAccordionState();\n  \n  // Also check accordion state periodically in case it changes within same tab\n  const accordionCheckInterval = setInterval(checkAccordionState, 1000);\n  \n  // Store interval for cleanup\n  (window as any).__accordionCheckInterval = accordionCheckInterval;\n});\n\nonUnmounted(() => {\n  window.removeEventListener('scroll', handleScroll);\n  window.removeEventListener('resize', checkScreenSize);\n  window.removeEventListener('storage', checkAccordionState);\n  \n  // Clear interval\n  if ((window as any).__accordionCheckInterval) {\n    clearInterval((window as any).__accordionCheckInterval);\n    delete (window as any).__accordionCheckInterval;\n  }\n});\n</script>\n\n<style scoped>\n/* Sticky button transition */\n.sticky-fade-enter-active,\n.sticky-fade-leave-active {\n  transition: all 0.3s ease;\n}\n\n.sticky-fade-enter-from {\n  opacity: 0;\n  transform: translateY(-10px) scale(0.9);\n}\n\n.sticky-fade-leave-to {\n  opacity: 0;\n  transform: translateY(-10px) scale(0.9);\n}\n\n.sticky-fade-enter-to,\n.sticky-fade-leave-from {\n  opacity: 1;\n  transform: translateY(0) scale(1);\n}\n</style> "],"names":["_createElementBlock","_createElementVNode","_toDisplayString","_unref","_createBlock","_Teleport","_createVNode","_Transition","_withDirectives","_openBlock","_createTextVNode"],"mappings":"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"}