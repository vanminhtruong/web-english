{"version":3,"mappings":"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","names":["currentVoiceType","rule","_createElementBlock","_createVNode","_Transition","_openBlock","_createElementVNode","_unref","_toDisplayString","_createTextVNode","selectedDate","_normalizeClass","_Fragment","_renderList","_vModelText","_vModelSelect"],"ignoreList":[],"sources":["../../src/views/vocabulary/components/GrammarManagerModal.vue"],"sourcesContent":["<template>\n  <div>\n    <!-- Backdrop -->\n    <Transition\n      enter-active-class=\"transition-all duration-500 ease-out\"\n      enter-from-class=\"opacity-0\"\n      enter-to-class=\"opacity-100\"\n      leave-active-class=\"transition-all duration-300 ease-in\"\n      leave-from-class=\"opacity-100\"\n      leave-to-class=\"opacity-0\"\n    >\n      <div \n        v-if=\"props.modelValue\" \n        class=\"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center p-4 z-50 backdrop-blur-sm\"\n      >\n        <!-- Modal Container -->\n        <Transition\n          enter-active-class=\"transition-all duration-500 ease-out\"\n          enter-from-class=\"opacity-0 scale-90 translate-y-8 rotate-1\"\n          enter-to-class=\"opacity-100 scale-100 translate-y-0 rotate-0\"\n          leave-active-class=\"transition-all duration-300 ease-in\"\n          leave-from-class=\"opacity-100 scale-100 translate-y-0 rotate-0\"\n          leave-to-class=\"opacity-0 scale-90 translate-y-8 rotate-1\"\n        >\n          <div class=\"w-full max-w-4xl\">\n            <!-- Modal Content -->\n            <div \n              class=\"bg-white dark:bg-[#0a0a0a] shadow-2xl rounded-xl border border-gray-200 dark:border-gray-700 transform overflow-hidden\"\n              @click.stop\n            >\n              <!-- Header -->\n              <div class=\"px-6 py-4 border-b border-gray-200 dark:border-gray-700 bg-gradient-to-r from-blue-50 to-indigo-50 dark:from-[#0a0a0a] dark:to-[#0a0a0a]\">\n                <div class=\"flex items-center justify-between\">\n                  <h3 class=\"text-lg sm:text-xl md:text-2xl font-semibold text-gray-900 dark:text-white flex items-center space-x-2\">\n                    <span class=\"w-2 h-2 bg-blue-500 rounded-full animate-pulse\"></span>\n                    <span>{{ t('grammar.manager.title', 'Grammar Manager') }}</span>\n                  </h3>\n                  \n                  <div class=\"flex items-center space-x-4\">\n                    <!-- Per-Date Mode Toggle -->\n                    <div class=\"flex items-center space-x-3\">\n                      <span class=\"text-sm font-medium text-gray-700 dark:text-gray-300\">\n                        {{ t('grammar.manager.globalMode', 'Global') }}\n                      </span>\n                      <label class=\"relative inline-flex items-center cursor-pointer\">\n                        <input \n                          v-model=\"perDateMode\" \n                          type=\"checkbox\" \n                          class=\"sr-only peer\"\n                        >\n                        <div class=\"w-11 h-6 bg-gray-200 peer-focus:outline-none peer-focus:ring-4 peer-focus:ring-blue-300 dark:peer-focus:ring-blue-800 rounded-full peer dark:bg-gray-700 peer-checked:after:translate-x-full peer-checked:after:border-white after:content-[''] after:absolute after:top-[2px] after:left-[2px] after:bg-white after:border-gray-300 after:border after:rounded-full after:h-5 after:w-5 after:transition-all dark:border-gray-600 peer-checked:bg-blue-600\"></div>\n                      </label>\n                      <span class=\"text-sm font-medium text-gray-700 dark:text-gray-300\">\n                        {{ t('grammar.manager.perDateMode', 'Per Date') }}\n                      </span>\n                    </div>\n                    \n                    <button\n                      @click=\"closeModal\"\n                      class=\"text-gray-400 hover:text-gray-600 dark:hover:text-gray-200 transition-all duration-300 hover:scale-110 hover:rotate-90 p-1 rounded-full hover:bg-gray-100 dark:hover:bg-gray-800\"\n                    >\n                      <svg class=\"w-6 h-6\" fill=\"none\" stroke=\"currentColor\" viewBox=\"0 0 24 24\">\n                        <path stroke-linecap=\"round\" stroke-linejoin=\"round\" stroke-width=\"2\" d=\"M6 18L18 6M6 6l12 12\"></path>\n                      </svg>\n                    </button>\n                  </div>\n                </div>\n                \n                <!-- Mode Description -->\n                <div v-if=\"perDateMode\" class=\"mt-3 p-2 bg-blue-50 dark:bg-gray-custom rounded-lg\">\n                  <div class=\"flex items-center justify-between\">\n                    <p class=\"text-sm text-blue-700 dark:text-blue-300 flex items-center\">\n                      <svg class=\"w-4 h-4 mr-2\" fill=\"none\" stroke=\"currentColor\" viewBox=\"0 0 24 24\">\n                        <path stroke-linecap=\"round\" stroke-linejoin=\"round\" stroke-width=\"2\" d=\"M13 16h-1v-4h-1m1-4h.01M21 12a9 9 0 11-18 0 9 9 0 0118 0z\"></path>\n                      </svg>\n                      {{ selectedDate ? \n                        (t('grammar.manager.perDateDescription', { date: selectedDate }) || `Managing grammar rules for date: ${selectedDate}`) : \n                        (t('grammar.manager.noDateSelected') || 'No date selected for per-date mode') \n                      }}\n                    </p>\n                    \n                    <!-- Show Vocabulary Button -->\n                    <div v-if=\"selectedDate\" class=\"relative\">\n                      <button\n                        @click=\"showVocabularyDropdown = !showVocabularyDropdown\"\n                        class=\"flex items-center space-x-2 px-3 py-1.5 bg-green-100 dark:bg-green-900/30 text-green-800 dark:text-green-200 rounded-md hover:bg-green-200 dark:hover:bg-green-900/50 transition-all duration-200 text-sm font-medium\"\n                      >\n                        <svg class=\"w-4 h-4\" fill=\"none\" stroke=\"currentColor\" viewBox=\"0 0 24 24\">\n                          <path stroke-linecap=\"round\" stroke-linejoin=\"round\" stroke-width=\"2\" d=\"M12 6.253v13m0-13C10.832 5.477 9.246 5 7.5 5S4.168 5.477 3 6.253v13C4.168 18.477 5.754 18 7.5 18s3.332.477 4.5 1.253m0-13C13.168 5.477 14.754 5 16.5 5c1.746 0 3.332.477 4.5 1.253v13C19.832 18.477 18.246 18 16.5 18c-1.746 0-3.332.477-4.5 1.253\"></path>\n                        </svg>\n                        <span>{{ t('grammar.manager.showVocabulary', 'Show Vocabulary') }}</span>\n                        <span class=\"bg-green-200 dark:bg-green-800 text-green-800 dark:text-green-200 px-2 py-0.5 rounded-full text-xs font-bold\">\n                          {{ vocabulariesForSelectedDate.length }}\n                        </span>\n                        <svg class=\"w-4 h-4 transition-transform duration-200\" :class=\"{ 'rotate-180': showVocabularyDropdown }\" fill=\"none\" stroke=\"currentColor\" viewBox=\"0 0 24 24\">\n                          <path stroke-linecap=\"round\" stroke-linejoin=\"round\" stroke-width=\"2\" d=\"M19 9l-7 7-7-7\"></path>\n                        </svg>\n                      </button>\n                      \n                      <!-- Vocabulary Dropdown -->\n                      <Transition\n                        enter-active-class=\"transition-all duration-300 ease-out\"\n                        enter-from-class=\"opacity-0 scale-95 translate-y-2\"\n                        enter-to-class=\"opacity-100 scale-100 translate-y-0\"\n                        leave-active-class=\"transition-all duration-200 ease-in\"\n                        leave-from-class=\"opacity-100 scale-100 translate-y-0\"\n                        leave-to-class=\"opacity-0 scale-95 translate-y-2\"\n                      >\n                        <div v-if=\"showVocabularyDropdown\" class=\"absolute right-0 top-full mt-2 w-80 bg-white dark:bg-[#0a0a0a] border border-gray-200 dark:border-gray-700 rounded-lg shadow-xl z-50 max-h-64 overflow-y-auto\">\n                          <div class=\"p-3 border-b border-gray-200 dark:border-gray-700\">\n                            <h4 class=\"text-sm font-semibold text-gray-900 dark:text-white flex items-center\">\n                              <svg class=\"w-4 h-4 mr-2 text-green-500\" fill=\"none\" stroke=\"currentColor\" viewBox=\"0 0 24 24\">\n                                <path stroke-linecap=\"round\" stroke-linejoin=\"round\" stroke-width=\"2\" d=\"M12 6.253v13m0-13C10.832 5.477 9.246 5 7.5 5S4.168 5.477 3 6.253v13C4.168 18.477 5.754 18 7.5 18s3.332.477 4.5 1.253m0-13C13.168 5.477 14.754 5 16.5 5c1.746 0 3.332.477 4.5 1.253v13C19.832 18.477 18.246 18 16.5 18c-1.746 0-3.332.477-4.5 1.253\"></path>\n                              </svg>\n                              {{ t('grammar.manager.vocabularyForDate', { date: selectedDate }) || `Vocabulary for ${selectedDate}` }}\n                            </h4>\n                          </div>\n                          \n                          <div v-if=\"vocabulariesForSelectedDate.length === 0\" class=\"p-4 text-center text-gray-500 dark:text-gray-400 text-sm\">\n                            {{ t('grammar.manager.noVocabularyFound', 'No vocabulary found for this date') }}\n                          </div>\n                          \n                          <div v-else class=\"divide-y divide-gray-200 dark:divide-gray-700\">\n                            <div v-for=\"vocab in vocabulariesForSelectedDate\" :key=\"vocab.id\" class=\"p-3 hover:bg-gray-50 dark:hover:bg-gray-custom cursor-pointer transition-colors duration-150\">\n                              <div class=\"flex items-start justify-between\">\n                                <div class=\"flex-1 min-w-0\">\n                                  <h5 class=\"text-sm font-medium text-gray-900 dark:text-white truncate\">{{ vocab.word }}</h5>\n                                  <p class=\"text-xs text-gray-600 dark:text-gray-300 mt-1 line-clamp-2\">{{ vocab.meaning }}</p>\n                                  <div class=\"flex items-center space-x-2 mt-2\">\n                                    <span class=\"inline-flex items-center px-2 py-0.5 rounded text-xs font-medium bg-blue-100 dark:bg-blue-900/30 text-blue-800 dark:text-blue-200\">\n                                      {{ getTopicName(vocab.category) }}\n                                    </span>\n                                    <span class=\"inline-flex items-center px-2 py-0.5 rounded text-xs font-medium bg-purple-100 dark:bg-purple-900/30 text-purple-800 dark:text-purple-200\">\n                                      {{ vocab.level }}\n                                    </span>\n                                  </div>\n                                </div>\n                              </div>\n                            </div>\n                          </div>\n                        </div>\n                      </Transition>\n                    </div>\n                  </div>\n                </div>\n              </div>\n\n              <!-- Content -->\n              <div class=\"px-6 py-4 max-h-[70vh] overflow-y-auto\">\n                <!-- Add New Grammar Form -->\n                <div class=\"mb-6 p-4 bg-gray-50 dark:bg-dark-bg-mute rounded-lg border border-gray-200 dark:border-dark-bg-mute animate-fade-in-up\" style=\"animation-delay: 0.1s\">\n                  <h4 class=\"text-md font-medium text-gray-900 dark:text-white mb-4 flex items-center\">\n                    <span class=\"w-1 h-4 bg-blue-500 rounded mr-2\"></span>\n                    {{ isEditing ? t('grammar.manager.editGrammar', 'Edit Grammar Rule') : t('grammar.manager.addNew', 'Add New Grammar Rule') }}\n                  </h4>\n                  \n                  <form @submit.prevent=\"submitForm\" class=\"space-y-4\">\n                    <!-- Title -->\n                    <div class=\"animate-fade-in-up\" style=\"animation-delay: 0.2s\">\n                      <label class=\"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2 flex items-center\">\n                        <span class=\"w-1 h-4 bg-green-500 rounded mr-2\"></span>\n                        {{ t('grammar.manager.title', 'Title') }} <span class=\"text-red-500 ml-1\">*</span>\n                      </label>\n                      <input\n                        v-model=\"formData.title\"\n                        type=\"text\"\n                        required\n                        class=\"w-full px-3 py-2 border border-gray-300 dark:border-dark-bg-mute rounded-lg bg-white dark:bg-dark-bg-soft text-gray-900 dark:text-white focus:outline-none focus:ring-2 focus:ring-green-500 focus:border-transparent transition-all duration-300 hover:border-green-400 dark:hover:border-green-500 transform hover:scale-[1.02]\"\n                        :placeholder=\"t('grammar.manager.titlePlaceholder', 'e.g., Present Perfect Tense')\"\n                      />\n                    </div>\n\n                    <!-- Category -->\n                    <div class=\"animate-fade-in-up\" style=\"animation-delay: 0.3s\">\n                      <label class=\"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2 flex items-center\">\n                        <span class=\"w-1 h-4 bg-purple-500 rounded mr-2\"></span>\n                        {{ t('grammar.manager.category', 'Category') }} <span class=\"text-red-500 ml-1\">*</span>\n                      </label>\n                      <select\n                        v-model=\"formData.category\"\n                        required\n                        class=\"w-full px-3 py-2 border border-gray-300 dark:border-dark-bg-mute rounded-lg bg-white dark:bg-dark-bg-soft text-gray-900 dark:text-white focus:outline-none focus:ring-2 focus:ring-purple-500 focus:border-transparent transition-all duration-300 hover:border-purple-400 dark:hover:border-purple-500 transform hover:scale-[1.02] cursor-pointer\"\n                      >\n                  <option value=\"\">{{ t('grammar.manager.selectCategory', 'Select Category') }}</option>\n                  <option value=\"tenses\">{{ t('grammar.categories.tenses', 'Tenses') }}</option>\n                  <option value=\"conditionals\">{{ t('grammar.categories.conditionals', 'Conditionals') }}</option>\n                  <option value=\"passive\">{{ t('grammar.categories.passive', 'Passive Voice') }}</option>\n                  <option value=\"modals\">{{ t('grammar.categories.modals', 'Modal Verbs') }}</option>\n                  <option value=\"articles\">{{ t('grammar.categories.articles', 'Articles') }}</option>\n                  <option value=\"prepositions\">{{ t('grammar.categories.prepositions', 'Prepositions') }}</option>\n                  <option value=\"conjunctions\">{{ t('grammar.categories.conjunctions', 'Conjunctions') }}</option>\n                  <option value=\"other\">{{ t('grammar.categories.other', 'Other') }}</option>\n                </select>\n                    </div>\n\n                    <!-- Level -->\n                    <div class=\"animate-fade-in-up\" style=\"animation-delay: 0.4s\">\n                      <label class=\"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2 flex items-center\">\n                        <span class=\"w-1 h-4 bg-orange-500 rounded mr-2\"></span>\n                        {{ t('grammar.manager.level', 'Level') }} <span class=\"text-red-500 ml-1\">*</span>\n                      </label>\n                      <select\n                        v-model=\"formData.level\"\n                        required\n                        class=\"w-full px-3 py-2 border border-gray-300 dark:border-dark-bg-mute rounded-lg bg-white dark:bg-dark-bg-soft text-gray-900 dark:text-white focus:outline-none focus:ring-2 focus:ring-orange-500 focus:border-transparent transition-all duration-300 hover:border-orange-400 dark:hover:border-orange-500 transform hover:scale-[1.02] cursor-pointer\"\n                      >\n                  <option value=\"\">{{ t('grammar.manager.selectLevel', 'Select Level') }}</option>\n                        <option value=\"beginner\">{{ t('grammar.levels.beginner', 'Beginner') }}</option>\n                        <option value=\"intermediate\">{{ t('grammar.levels.intermediate', 'Intermediate') }}</option>\n                        <option value=\"advanced\">{{ t('grammar.levels.advanced', 'Advanced') }}</option>\n                      </select>\n                    </div>\n\n                    <!-- Formula -->\n                    <div class=\"animate-fade-in-up\" style=\"animation-delay: 0.5s\">\n                      <label class=\"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2 flex items-center\">\n                        <span class=\"w-1 h-4 bg-yellow-500 rounded mr-2\"></span>\n                        {{ t('grammar.manager.formula', 'Grammar Formula') }} <span class=\"text-red-500 ml-1\">*</span>\n                      </label>\n                      <div class=\"space-y-2\">\n                        <textarea\n                          v-model=\"formData.formula\"\n                          required\n                          rows=\"3\"\n                          class=\"w-full px-3 py-2 border border-gray-300 dark:border-dark-bg-mute rounded-lg bg-white dark:bg-dark-bg-soft text-gray-900 dark:text-white focus:outline-none focus:ring-2 focus:ring-yellow-500 focus:border-transparent transition-all duration-300 hover:border-yellow-400 dark:hover:border-yellow-500 transform hover:scale-[1.02] resize-none\"\n                          :placeholder=\"t('grammar.manager.formulaPlaceholder', 'e.g., Subject + have/has + past participle + &lt;br&gt; or &lt;/br&gt; for line break')\"\n                        ></textarea>\n                        <!-- Preview -->\n                        <div v-if=\"formData.formula.trim()\" class=\"p-2 bg-yellow-50 dark:bg-[#0a0a0a] border border-yellow-200 dark:border-yellow-600 rounded text-sm\">\n                          <div class=\"text-yellow-700 dark:text-yellow-400 font-medium mb-1\">{{ t('grammar.manager.preview', 'Preview') }}:</div>\n                          <div class=\"text-gray-900 dark:text-white\" v-html=\"formulaPreview\"></div>\n                        </div>\n                      </div>\n                    </div>\n\n                    <!-- Description -->\n                    <div class=\"animate-fade-in-up\" style=\"animation-delay: 0.6s\">\n                      <label class=\"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2 flex items-center\">\n                        <span class=\"w-1 h-4 bg-teal-500 rounded mr-2\"></span>\n                        {{ t('grammar.manager.description', 'Description') }}\n                      </label>\n                      <div class=\"space-y-2\">\n                        <textarea\n                          v-model=\"formData.description\"\n                          rows=\"3\"\n                          class=\"w-full px-3 py-2 border border-gray-300 dark:border-dark-bg-mute rounded-lg bg-white dark:bg-dark-bg-soft text-gray-900 dark:text-white focus:outline-none focus:ring-2 focus:ring-teal-500 focus:border-transparent transition-all duration-300 hover:border-teal-400 dark:hover:border-teal-500 transform hover:scale-[1.02] resize-none\"\n                          :placeholder=\"t('grammar.manager.descriptionPlaceholder', 'Explain when and how to use this grammar rule + &lt;br&gt; or &lt;/br&gt; for line break')\"\n                        ></textarea>\n                        <!-- Preview -->\n                        <div v-if=\"formData.description.trim()\" class=\"p-2 bg-teal-50 dark:bg-[#0a0a0a] border border-teal-200 dark:border-teal-600 rounded text-sm\">\n                          <div class=\"text-teal-700 dark:text-teal-400 font-medium mb-1\">{{ t('grammar.manager.preview', 'Preview') }}:</div>\n                          <div class=\"text-gray-900 dark:text-white\" v-html=\"descriptionPreview\"></div>\n                        </div>\n                      </div>\n                    </div>\n\n                    <!-- Examples -->\n                    <div class=\"animate-fade-in-up\" style=\"animation-delay: 0.7s\">\n                      <label class=\"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2 flex items-center\">\n                        <span class=\"w-1 h-4 bg-pink-500 rounded mr-2\"></span>\n                        {{ t('grammar.manager.examples', 'Examples') }}\n                      </label>\n                      <div class=\"space-y-2\">\n                        <div v-for=\"(example, index) in formData.examples\" :key=\"index\" class=\"flex items-center space-x-2\">\n                          <input\n                            v-model=\"formData.examples[index]\"\n                            type=\"text\"\n                            class=\"flex-1 px-3 py-2 border border-gray-300 dark:border-dark-bg-mute rounded-lg bg-white dark:bg-dark-bg-soft text-gray-900 dark:text-white focus:outline-none focus:ring-2 focus:ring-pink-500 focus:border-transparent transition-all duration-300 hover:border-pink-400 dark:hover:border-pink-500 transform hover:scale-[1.02]\"\n                            :placeholder=\"t('grammar.manager.examplePlaceholder', 'e.g., I have finished my homework.')\"\n                          />\n                          <button\n                            type=\"button\"\n                            @click=\"removeExample(index)\"\n                            class=\"text-red-500 hover:text-red-700 p-1 rounded-full hover:bg-red-50 dark:hover:bg-red-900/20 transition-all duration-300 hover:scale-110\"\n                          >\n                            <svg class=\"w-4 h-4\" fill=\"none\" stroke=\"currentColor\" viewBox=\"0 0 24 24\">\n                              <path stroke-linecap=\"round\" stroke-linejoin=\"round\" stroke-width=\"2\" d=\"M6 18L18 6M6 6l12 12\"></path>\n                            </svg>\n                          </button>\n                        </div>\n                        <button\n                          type=\"button\"\n                          @click=\"addExample\"\n                          class=\"text-blue-600 hover:text-blue-800 dark:text-blue-400 dark:hover:text-blue-300 text-sm font-medium transition-all duration-300 hover:scale-105\"\n                        >\n                          + {{ t('grammar.manager.addExample', 'Add Example') }}\n                        </button>\n                      </div>\n                    </div>\n\n                    <!-- Form Actions -->\n                    <div class=\"flex justify-end space-x-3 pt-4 animate-fade-in-up\" style=\"animation-delay: 0.8s\">\n                      <button\n                        type=\"button\"\n                        @click=\"resetForm\"\n                        class=\"px-4 py-2 text-gray-700 dark:text-gray-300 bg-gray-100 dark:bg-gray-700 hover:bg-gray-200 dark:hover:bg-gray-600 rounded-lg transition-all duration-300 transform hover:scale-105 hover:shadow-md\"\n                      >\n                        {{ t('common.cancel', 'Cancel') }}\n                      </button>\n                      <button\n                        type=\"submit\"\n                        class=\"px-4 py-2 bg-blue-600 hover:bg-blue-700 text-white rounded-lg transition-all duration-300 transform hover:scale-105 hover:shadow-lg\"\n                      >\n                        {{ isEditing ? t('common.update', 'Update') : t('common.add', 'Add') }}\n                      </button>\n                    </div>\n                  </form>\n                </div>\n\n                <!-- Grammar Rules List -->\n                <div class=\"animate-fade-in-up\" style=\"animation-delay: 0.9s\">\n                  <div class=\"flex items-center justify-between mb-4\">\n                    <h4 class=\"text-md font-medium text-gray-900 dark:text-white flex items-center\">\n                      <span class=\"w-1 h-4 bg-indigo-500 rounded mr-2\"></span>\n                      {{ t('grammar.manager.existingRules', 'Grammar Rules') }}\n                    </h4>\n                    \n                    <!-- Filter by Category -->\n                    <select\n                      v-model=\"filterCategory\"\n                      class=\"px-3 py-1 border border-gray-300 dark:border-dark-bg-mute rounded-lg bg-white dark:bg-dark-bg-soft text-gray-900 dark:text-white text-sm focus:outline-none focus:ring-2 focus:ring-indigo-500 focus:border-transparent transition-all duration-300 hover:border-indigo-400 dark:hover:border-indigo-500 cursor-pointer\"\n                    >\n                <option value=\"\">{{ t('common.all', 'All Categories') }}</option>\n                <option value=\"tenses\">{{ t('grammar.categories.tenses', 'Tenses') }}</option>\n                <option value=\"conditionals\">{{ t('grammar.categories.conditionals', 'Conditionals') }}</option>\n                <option value=\"passive\">{{ t('grammar.categories.passive', 'Passive Voice') }}</option>\n                <option value=\"modals\">{{ t('grammar.categories.modals', 'Modal Verbs') }}</option>\n                <option value=\"articles\">{{ t('grammar.categories.articles', 'Articles') }}</option>\n                <option value=\"prepositions\">{{ t('grammar.categories.prepositions', 'Prepositions') }}</option>\n                <option value=\"conjunctions\">{{ t('grammar.categories.conjunctions', 'Conjunctions') }}</option>\n                <option value=\"other\">{{ t('grammar.categories.other', 'Other') }}</option>\n              </select>\n            </div>\n\n                  <!-- Grammar Rules Cards -->\n                  <div v-if=\"filteredGrammarRules.length > 0\" class=\"space-y-4 max-h-96 overflow-y-auto scrollbar-custom\">\n                    <div\n                      v-for=\"(rule, index) in filteredGrammarRules\"\n                      :key=\"rule.id\"\n                      class=\"p-4 border border-gray-200 dark:border-dark-bg-mute rounded-lg bg-white dark:bg-dark-bg-mute animate-fade-in-up transition-all duration-300 hover:shadow-lg hover:scale-[1.02]\"\n                      :style=\"`animation-delay: ${1.0 + (index * 0.1)}s`\"\n                    >\n                      <div class=\"flex items-start justify-between\">\n                        <div class=\"flex-1\">\n                          <div class=\"flex items-center space-x-2 mb-2\">\n                            <h5 class=\"font-medium text-gray-900 dark:text-white\">{{ rule.title }}</h5>\n                            <span class=\"px-2 py-1 text-xs bg-blue-100 dark:bg-blue-900/50 text-blue-800 dark:text-blue-300 rounded-full\">\n                              {{ t(`grammar.categories.${rule.category}`, rule.category) }}\n                            </span>\n                            <span class=\"px-2 py-1 text-xs bg-green-100 dark:bg-green-900/50 text-green-800 dark:text-green-300 rounded-full\">\n                              {{ t(`grammar.levels.${rule.level}`, rule.level) }}\n                            </span>\n                          </div>\n                          \n                          <div class=\"mb-2\">\n                            <p class=\"text-sm font-medium text-gray-700 dark:text-gray-300 mb-1\">\n                              {{ t('grammar.manager.formula', 'Formula') }}:\n                            </p>\n                            <div class=\"text-sm text-gray-600 dark:text-gray-400 font-mono bg-gray-50 dark:bg-[#0a0a0a] p-2 rounded\" v-html=\"renderHtmlContent(rule.formula)\"></div>\n                          </div>\n\n                          <div v-if=\"rule.description\" class=\"mb-2\">\n                            <div class=\"text-sm text-gray-600 dark:text-gray-400\" v-html=\"renderHtmlContent(rule.description)\"></div>\n                          </div>\n\n                          <div v-if=\"rule.examples && rule.examples.length > 0\" class=\"mb-2\">\n                            <p class=\"text-sm font-medium text-gray-700 dark:text-gray-300 mb-1\">\n                              {{ t('grammar.manager.examples', 'Examples') }}:\n                            </p>\n                            <ul class=\"text-sm text-gray-600 dark:text-gray-400 space-y-2\">\n                              <li v-for=\"example in rule.examples\" :key=\"example\" class=\"flex items-start justify-between\">\n                                <div class=\"flex items-start flex-1\">\n                                  <span class=\"text-gray-400 mr-2 mt-0.5\">•</span>\n                                  <span class=\"flex-1\">{{ example }}</span>\n                                </div>\n                                <!-- Speaker button -->\n                                <button\n                                  @click=\"playExampleAudio(example)\"\n                                  :disabled=\"isPlayingAudio === example\"\n                                  class=\"ml-2 p-1 rounded-full hover:bg-gray-100 dark:hover:bg-[#0a0a0a] transition-colors duration-200 flex-shrink-0\"\n                                  :class=\"{\n                                    'text-blue-500 dark:text-blue-400': isPlayingAudio !== example,\n                                    'text-orange-500 dark:text-orange-400 animate-pulse': isPlayingAudio === example\n                                  }\"\n                                  :title=\"t('grammar.examples.playAudio', 'Play example audio')\"\n                                >\n                                  <!-- Speaker icon -->\n                                  <svg v-if=\"isPlayingAudio !== example\" class=\"w-4 h-4\" fill=\"none\" stroke=\"currentColor\" viewBox=\"0 0 24 24\">\n                                    <path stroke-linecap=\"round\" stroke-linejoin=\"round\" stroke-width=\"2\" d=\"M15.536 8.464a5 5 0 010 7.072m2.828-9.9a9 9 0 010 12.728M6 10l4-4v12l-4-4H3a1 1 0 01-1-1v-2a1 1 0 011-1h3z\"></path>\n                                  </svg>\n                                  <!-- Loading icon -->\n                                  <svg v-else class=\"w-4 h-4\" fill=\"none\" stroke=\"currentColor\" viewBox=\"0 0 24 24\">\n                                    <path stroke-linecap=\"round\" stroke-linejoin=\"round\" stroke-width=\"2\" d=\"M9 19V6l12-3v13M9 19c0 1.105-1.343 2-3 2s-3-.895-3-2 1.343-2 3-2 3 .895 3 2zm12-3c0 1.105-1.343 2-3 2s-3-.895-3-2 1.343-2 3-2 3 .895 3 2zM9 10l12-3\"></path>\n                                  </svg>\n                                </button>\n                              </li>\n                            </ul>\n                          </div>\n\n                          <p class=\"text-xs text-gray-500 dark:text-gray-400\">\n                            {{ t('grammar.manager.createdAt', 'Created') }}: {{ formatDate(rule.createdAt) }}\n                          </p>\n                        </div>\n\n                        <!-- Actions -->\n                        <div class=\"flex items-center space-x-2 ml-4\">\n                          <button\n                            @click=\"editGrammar(rule)\"\n                            class=\"text-blue-600 hover:text-blue-800 dark:text-blue-400 dark:hover:text-blue-300 p-1 rounded-full hover:bg-blue-50 dark:hover:bg-blue-900/20 transition-all duration-300 hover:scale-110\"\n                            :title=\"t('common.edit', 'Edit')\"\n                          >\n                            <svg class=\"w-4 h-4\" fill=\"none\" stroke=\"currentColor\" viewBox=\"0 0 24 24\">\n                              <path stroke-linecap=\"round\" stroke-linejoin=\"round\" stroke-width=\"2\" d=\"M11 5H6a2 2 0 00-2 2v11a2 2 0 002 2h11a2 2 0 002-2v-5m-1.414-9.414a2 2 0 112.828 2.828L11.828 15H9v-2.828l8.586-8.586z\"></path>\n                            </svg>\n                          </button>\n                          <button\n                            @click=\"deleteGrammar(rule.id)\"\n                            class=\"text-red-600 hover:text-red-800 dark:text-red-400 dark:hover:text-red-300 p-1 rounded-full hover:bg-red-50 dark:hover:bg-red-900/20 transition-all duration-300 hover:scale-110\"\n                            :title=\"t('common.delete', 'Delete')\"\n                          >\n                            <svg class=\"w-4 h-4\" fill=\"none\" stroke=\"currentColor\" viewBox=\"0 0 24 24\">\n                              <path stroke-linecap=\"round\" stroke-linejoin=\"round\" stroke-width=\"2\" d=\"M19 7l-.867 12.142A2 2 0 0016.138 21H7.862a2 2 0 01-1.995-1.858L5 7m5 4v6m4-6v6m1-10V4a1 1 0 00-1-1h-4a1 1 0 00-1 1v3M4 7h16\"></path>\n                            </svg>\n                          </button>\n                        </div>\n                      </div>\n                    </div>\n                  </div>\n\n                  <!-- Empty State -->\n                  <div v-else class=\"text-center py-8 animate-fade-in-up\" style=\"animation-delay: 1.0s\">\n                    <svg class=\"w-12 h-12 text-gray-400 mx-auto mb-4\" fill=\"none\" stroke=\"currentColor\" viewBox=\"0 0 24 24\">\n                      <path stroke-linecap=\"round\" stroke-linejoin=\"round\" stroke-width=\"2\" d=\"M9 12h6m-6 4h6m2 5H7a2 2 0 01-2-2V5a2 2 0 012-2h5.586a1 1 0 01.707.293l5.414 5.414a1 1 0 01.293.707V19a2 2 0 01-2 2z\"></path>\n                    </svg>\n                    <p class=\"text-gray-500 dark:text-gray-400\">\n                      {{ t('grammar.manager.noRules', 'No grammar rules found') }}\n                    </p>\n                  </div>\n                </div>\n              </div>\n\n              <!-- Footer -->\n              <div class=\"px-6 py-4 border-t border-gray-200 dark:border-gray-700 bg-gradient-to-r from-gray-50 to-blue-50 dark:from-[#0a0a0a] dark:to-[#0a0a0a]\">\n                <div class=\"flex justify-end\">\n                  <button\n                    @click=\"closeModal\"\n                    class=\"px-4 py-2 bg-gray-100 dark:bg-dark-bg-mute hover:bg-gray-200 dark:hover:bg-dark-bg-soft text-gray-700 dark:text-gray-300 rounded-lg transition-all duration-300 transform hover:scale-105 hover:shadow-md\"\n                  >\n                    {{ t('common.close', 'Close') }}\n                  </button>\n                </div>\n              </div>\n            </div>\n          </div>\n        </Transition>\n      </div>\n    </Transition>\n  </div>\n</template>\n\n<script setup lang=\"ts\">\nimport { ref, computed, watch, onMounted, onUnmounted, defineAsyncComponent } from 'vue'\nimport { useI18n } from 'vue-i18n'\nimport { useToast } from 'vue-toastification'\nimport { useVocabularyStore } from '../../../composables/useVocabularyStore'\nimport { getDateKey } from '../../../utils/dateUtils'\nimport { getTopicName } from '../../../utils/topicUtils'\n\nconst ConfirmToast = defineAsyncComponent(() => import('../../../components/common/ConfirmToast.vue'))\n\nconst { t } = useI18n()\nconst toast = useToast()\nconst { allVocabularies } = useVocabularyStore()\n\n// Text-to-speech state (temporarily disabled)\nconst isPlayingAudio = ref<string | null>(null)\n\ninterface GrammarRule {\n  id: string\n  title: string\n  category: string\n  level: string\n  formula: string\n  description?: string\n  examples: string[]\n  createdAt: Date\n  updatedAt: Date\n  dateGroup?: string // Optional date group for per-date management\n}\n\ninterface Props {\n  modelValue: boolean\n  selectedDate?: string | null\n}\n\nconst props = withDefaults(defineProps<Props>(), {\n  selectedDate: null\n})\n\nconst emit = defineEmits<{\n  'update:modelValue': [value: boolean]\n}>()\n\n// State\nconst grammarRules = ref<GrammarRule[]>([])\nconst isEditing = ref(false)\nconst editingId = ref<string | null>(null)\nconst filterCategory = ref('')\nconst perDateMode = ref(false) // Toggle for per-date grammar management\nconst showVocabularyDropdown = ref(false) // Control vocabulary dropdown visibility\n\n// Form data\nconst formData = ref({\n  title: '',\n  category: '',\n  level: '',\n  formula: '',\n  description: '',\n  examples: ['']\n})\n\n// Computed\nconst filteredGrammarRules = computed(() => {\n  let filtered = grammarRules.value\n  \n  // Filter by per-date mode\n  if (perDateMode.value) {\n    // Show only rules for the selected date\n    filtered = filtered.filter(rule => rule.dateGroup === props.selectedDate)\n  } else {\n    // Show only global rules (no dateGroup)\n    filtered = filtered.filter(rule => !rule.dateGroup)\n  }\n  \n  // Filter by category\n  if (filterCategory.value) {\n    filtered = filtered.filter(rule => rule.category === filterCategory.value)\n  }\n  \n  return filtered\n})\n\n// Filter vocabulary for the selected date\nconst vocabulariesForSelectedDate = computed(() => {\n  if (!props.selectedDate) return []\n  \n  return allVocabularies.value.filter(vocab => {\n    const vocabDateKey = getDateKey(vocab.createdAt)\n    return vocabDateKey === props.selectedDate\n  })\n})\n\n// Convert <br> and </br> tags to line breaks\nconst renderHtmlContent = (content: string): string => {\n  if (!content) return ''\n  return content\n    .replace(/<\\/br>/gi, '<br>')\n    .replace(/<br\\s*\\/?>/gi, '<br>')\n    .replace(/\\n/g, '<br>')\n}\n\nconst formulaPreview = computed(() => renderHtmlContent(formData.value.formula))\nconst descriptionPreview = computed(() => renderHtmlContent(formData.value.description))\n\n// Text-to-speech for examples with voice settings from localStorage\nconst playExampleAudio = async (example: string) => {\n  if (isPlayingAudio.value === example) return\n  \n  try {\n    isPlayingAudio.value = example\n    \n    if ('speechSynthesis' in window) {\n      return new Promise((resolve, reject) => {\n        const utterance = new SpeechSynthesisUtterance(example)\n        \n        // Load voice settings from localStorage (same as voiceStore)\n        const savedSettings = localStorage.getItem('voice-settings')\n        let voiceSettings = {\n          rate: 0.8,\n          pitch: 1.0,\n          volume: 1.0\n        }\n        \n        if (savedSettings) {\n          try {\n            const settings = JSON.parse(savedSettings)\n            const currentVoiceType = localStorage.getItem('current-voice-type') || 'female-sweet'\n            if (settings[currentVoiceType]) {\n              voiceSettings = settings[currentVoiceType]\n            }\n          } catch (e) {\n            console.warn('Failed to parse voice settings')\n          }\n        }\n        \n        utterance.lang = 'en-US'\n        utterance.rate = Math.max(0.1, Math.min(10, voiceSettings.rate))\n        utterance.pitch = Math.max(0, Math.min(2, voiceSettings.pitch))\n        utterance.volume = Math.max(0, Math.min(1, voiceSettings.volume))\n        \n        // Find appropriate voice based on current voice type\n        const voices = speechSynthesis.getVoices()\n        const currentVoiceType = localStorage.getItem('current-voice-type') || 'female-sweet'\n        \n        let targetVoice = null\n        if (currentVoiceType.includes('female')) {\n          targetVoice = voices.find(voice => \n            voice.lang.includes('en') && voice.name.toLowerCase().includes('female')\n          ) || voices.find(voice => \n            voice.lang.includes('en') && !voice.name.toLowerCase().includes('male')\n          )\n        } else {\n          targetVoice = voices.find(voice => \n            voice.lang.includes('en') && voice.name.toLowerCase().includes('male')\n          )\n        }\n        \n        if (!targetVoice) {\n          targetVoice = voices.find(voice => voice.lang.includes('en'))\n        }\n        \n        if (targetVoice) {\n          utterance.voice = targetVoice\n        }\n        \n        utterance.onend = () => resolve(void 0)\n        utterance.onerror = (event) => reject(event.error)\n        \n        speechSynthesis.speak(utterance)\n      })\n    } else {\n      console.warn('Speech synthesis not supported')\n    }\n    \n  } catch (error) {\n    console.error('Error playing audio:', error)\n  } finally {\n    isPlayingAudio.value = null\n  }\n}\n\n// Methods\nconst closeModal = () => {\n  resetForm()\n  emit('update:modelValue', false)\n}\n\nconst resetForm = () => {\n  formData.value = {\n    title: '',\n    category: '',\n    level: '',\n    formula: '',\n    description: '',\n    examples: ['']\n  }\n  isEditing.value = false\n  editingId.value = null\n}\n\nconst addExample = () => {\n  formData.value.examples.push('')\n}\n\nconst removeExample = (index: number) => {\n  if (formData.value.examples.length > 1) {\n    formData.value.examples.splice(index, 1)\n  }\n}\n\nconst submitForm = () => {\n  const now = new Date()\n  let ruleId = '';\n  \n  if (isEditing.value) {\n    // Update existing rule\n    const index = grammarRules.value.findIndex(rule => rule.id === editingId.value)\n    if (index !== -1) {\n      grammarRules.value[index] = {\n        ...grammarRules.value[index],\n        title: formData.value.title,\n        category: formData.value.category,\n        level: formData.value.level,\n        formula: formData.value.formula,\n        description: formData.value.description,\n        examples: formData.value.examples.filter(ex => ex.trim()),\n        updatedAt: now\n      }\n      ruleId = editingId.value || '';\n    }\n  } else {\n    // Add new rule\n    const newRule: GrammarRule = {\n      id: Date.now().toString(),\n      title: formData.value.title,\n      category: formData.value.category,\n      level: formData.value.level,\n      formula: formData.value.formula,\n      description: formData.value.description,\n      examples: formData.value.examples.filter(ex => ex.trim()),\n      createdAt: now,\n      updatedAt: now,\n      dateGroup: perDateMode.value ? props.selectedDate || undefined : undefined\n    }\n    grammarRules.value.push(newRule)\n    ruleId = newRule.id;\n  }\n  \n  saveToLocalStorage()\n  \n  // Trigger auto-save event\n  const event = new CustomEvent('grammar-rules-updated', {\n    detail: {\n      action: isEditing.value ? 'updated' : 'added',\n      ruleId: ruleId,\n      dateGroup: perDateMode.value ? props.selectedDate || undefined : undefined\n    }\n  });\n  window.dispatchEvent(event);\n  \n  resetForm()\n}\n\nconst editGrammar = (rule: GrammarRule) => {\n  formData.value = {\n    title: rule.title,\n    category: rule.category,\n    level: rule.level,\n    formula: rule.formula,\n    description: rule.description || '',\n    examples: rule.examples.length > 0 ? [...rule.examples] : ['']\n  }\n  isEditing.value = true\n  editingId.value = rule.id\n}\n\nconst deleteGrammar = (id: string) => {\n  const rule = grammarRules.value.find(r => r.id === id)\n  if (!rule) return\n  \n  const toastId = toast({\n    component: ConfirmToast,\n    props: {\n      message: t('grammar.manager.confirmDelete', 'Are you sure you want to delete this grammar rule?'),\n      confirmText: t('common.delete', 'Delete'),\n      cancelText: t('common.cancel', 'Cancel'),\n      onConfirm: () => {\n        grammarRules.value = grammarRules.value.filter(rule => rule.id !== id)\n        saveToLocalStorage()\n        \n        // Trigger auto-save event\n        const event = new CustomEvent('grammar-rules-updated', {\n          detail: {\n            action: 'deleted',\n            ruleId: id,\n            dateGroup: rule.dateGroup\n          }\n        });\n        window.dispatchEvent(event);\n        \n        toast.success(t('grammar.manager.ruleDeleted', 'Grammar rule deleted successfully'))\n        toast.dismiss(toastId)\n      },\n      onCancel: () => {\n        toast.dismiss(toastId)\n      }\n    }\n  }, {\n    timeout: false,\n    closeOnClick: false,\n    closeButton: false,\n    draggable: false\n  })\n}\n\nconst formatDate = (date: Date) => {\n  return new Date(date).toLocaleDateString()\n}\n\nconst saveToLocalStorage = () => {\n  localStorage.setItem('grammar-rules', JSON.stringify(grammarRules.value))\n}\n\nconst saveToggleState = () => {\n  localStorage.setItem('grammar-manager-per-date-mode', JSON.stringify(perDateMode.value))\n}\n\nconst loadToggleState = () => {\n  const stored = localStorage.getItem('grammar-manager-per-date-mode')\n  if (stored) {\n    try {\n      const parsed = JSON.parse(stored)\n      perDateMode.value = typeof parsed === 'boolean' ? parsed : false\n    } catch (error) {\n      console.error('Error loading toggle state:', error)\n      perDateMode.value = false\n    }\n  }\n}\n\nconst loadFromLocalStorage = () => {\n  const stored = localStorage.getItem('grammar-rules')\n  if (stored) {\n    try {\n      const parsed = JSON.parse(stored)\n      grammarRules.value = parsed.map((rule: any) => ({\n        ...rule,\n        createdAt: new Date(rule.createdAt),\n        updatedAt: new Date(rule.updatedAt)\n      }))\n    } catch (error) {\n      console.error('Error loading grammar rules:', error)\n    }\n  }\n}\n\n// Handle vocabulary import refresh\nconst handleVocabularyImport = () => {\n  console.log('Vocabulary import detected, refreshing grammar rules')\n  loadFromLocalStorage()\n}\n\n// Initialize\nonMounted(() => {\n  loadFromLocalStorage()\n  loadToggleState()\n  // Listen for vocabulary import events to refresh grammar rules\n  window.addEventListener('vocabularyImportComplete', handleVocabularyImport)\n})\n\n// Cleanup\nonUnmounted(() => {\n  window.removeEventListener('vocabularyImportComplete', handleVocabularyImport)\n  unlockBodyScroll()\n})\n\n// Body scroll lock functions\nconst lockBodyScroll = () => {\n  document.body.style.overflow = 'hidden'\n}\n\nconst unlockBodyScroll = () => {\n  document.body.style.overflow = ''\n}\n\n// Watch for modal open/close\nwatch(() => props.modelValue, (newValue) => {\n  if (newValue) {\n    loadFromLocalStorage()\n    lockBodyScroll()\n  } else {\n    resetForm()\n    unlockBodyScroll()\n  }\n})\n\n// Watch for per-date mode toggle\nwatch(perDateMode, (newValue) => {\n  // Reset form when switching modes\n  resetForm()\n  // Reset filter category when switching modes\n  filterCategory.value = ''\n  // Save toggle state to localStorage\n  saveToggleState()\n  // If switching to per-date mode but no date selected, show warning\n  if (newValue && !props.selectedDate) {\n    console.warn('Per-date mode enabled but no date selected')\n  }\n})\n\n</script>\n\n<style scoped>\n/* Custom scrollbar for webkit browsers */\n.overflow-y-auto::-webkit-scrollbar {\n  width: 6px;\n}\n\n.overflow-y-auto::-webkit-scrollbar-track {\n  background-color: #f3f4f6;\n}\n\n.dark .overflow-y-auto::-webkit-scrollbar-track {\n  background-color: #0f0f0f;\n}\n\n.overflow-y-auto::-webkit-scrollbar-thumb {\n  background-color: #d1d5db;\n  border-radius: 9999px;\n}\n\n.dark .overflow-y-auto::-webkit-scrollbar-thumb {\n  background-color: #0a0a0a;\n}\n\n.overflow-y-auto::-webkit-scrollbar-thumb:hover {\n  background-color: #9ca3af;\n}\n\n.dark .overflow-y-auto::-webkit-scrollbar-thumb:hover {\n  background-color: #6b7280;\n}\n\n/* Fade in up animation */\n@keyframes fadeInUp {\n  from {\n    opacity: 0;\n    transform: translateY(20px);\n  }\n  to {\n    opacity: 1;\n    transform: translateY(0);\n  }\n}\n\n.animate-fade-in-up {\n  animation: fadeInUp 0.6s ease-out forwards;\n  opacity: 0;\n}\n\n/* Enhanced hover effects for form inputs */\ninput:focus, textarea:focus, select:focus {\n  transform: scale(1.02);\n  box-shadow: 0 0 0 3px rgba(59, 130, 246, 0.1);\n}\n\n/* Smooth transitions for all interactive elements */\n* {\n  transition-property: all;\n  transition-timing-function: cubic-bezier(0.4, 0, 0.2, 1);\n}\n\n/* Enhanced button hover effects */\nbutton:hover {\n  transform: translateY(-1px);\n}\n\n/* Loading animation for submit button */\n@keyframes pulse {\n  0%, 100% {\n    opacity: 1;\n  }\n  50% {\n    opacity: 0.5;\n  }\n}\n\n.animate-pulse {\n  animation: pulse 2s cubic-bezier(0.4, 0, 0.6, 1) infinite;\n}\n\n/* Stagger animation delays for form fields */\n.animate-fade-in-up:nth-child(1) { animation-delay: 0.1s; }\n.animate-fade-in-up:nth-child(2) { animation-delay: 0.2s; }\n.animate-fade-in-up:nth-child(3) { animation-delay: 0.3s; }\n.animate-fade-in-up:nth-child(4) { animation-delay: 0.4s; }\n.animate-fade-in-up:nth-child(5) { animation-delay: 0.5s; }\n.animate-fade-in-up:nth-child(6) { animation-delay: 0.6s; }\n.animate-fade-in-up:nth-child(7) { animation-delay: 0.7s; }\n.animate-fade-in-up:nth-child(8) { animation-delay: 0.8s; }\n.animate-fade-in-up:nth-child(9) { animation-delay: 0.9s; }\n.animate-fade-in-up:nth-child(10) { animation-delay: 1.0s; }\n.animate-fade-in-up:nth-child(11) { animation-delay: 1.1s; }\n.animate-fade-in-up:nth-child(12) { animation-delay: 1.2s; }\n\n/* Enhanced backdrop blur effect */\n.backdrop-blur-sm {\n  backdrop-filter: blur(8px);\n  -webkit-backdrop-filter: blur(8px);\n}\n\n/* Smooth dialog entrance */\n.dialog-enter-active {\n  transition: all 0.5s cubic-bezier(0.4, 0, 0.2, 1);\n}\n\n.dialog-enter-from {\n  opacity: 0;\n  transform: scale(0.9) translateY(20px) rotate(1deg);\n}\n\n.dialog-enter-to {\n  opacity: 1;\n  transform: scale(1) translateY(0) rotate(0deg);\n}\n\n/* Enhanced shadow effects */\n.shadow-2xl {\n  box-shadow: 0 25px 50px -12px rgba(0, 0, 0, 0.25);\n}\n\n/* Enhanced focus states */\ninput:focus, textarea:focus, select:focus {\n  outline: none;\n  border-color: transparent;\n  box-shadow: 0 0 0 3px rgba(59, 130, 246, 0.1), 0 4px 6px -1px rgba(0, 0, 0, 0.1);\n}\n\n/* Smooth scale transitions */\n.transform {\n  transition: transform 0.3s cubic-bezier(0.4, 0, 0.2, 1);\n}\n\n/* Enhanced button states */\nbutton:active {\n  transform: scale(0.95);\n}\n\n/* Loading spinner enhancement */\n@keyframes spin {\n  to {\n    transform: rotate(360deg);\n  }\n}\n\n.animate-spin {\n  animation: spin 1s linear infinite;\n}\n\n/* Enhanced checkbox styling */\ninput[type=\"checkbox\"] {\n  transition: all 0.3s ease;\n}\n\ninput[type=\"checkbox\"]:checked {\n  transform: scale(1.1);\n}\n\n/* Smooth color transitions */\n.transition-colors {\n  transition: color 0.3s ease, background-color 0.3s ease, border-color 0.3s ease;\n}\n\n/* Enhanced border radius */\n.rounded-lg {\n  border-radius: 0.5rem;\n}\n\n.rounded-xl {\n  border-radius: 0.75rem;\n}\n\n/* Gradient backgrounds */\n.bg-gradient-to-r {\n  background-image: linear-gradient(to right, var(--tw-gradient-stops));\n}\n\n/* Enhanced hover effects for interactive elements */\n.hover\\:scale-\\[1\\.02\\]:hover {\n  transform: scale(1.02);\n}\n\n.hover\\:scale-105:hover {\n  transform: scale(1.05);\n}\n\n.hover\\:scale-110:hover {\n  transform: scale(1.1);\n}\n\n/* Smooth rotation effects */\n.hover\\:rotate-90:hover {\n  transform: rotate(90deg);\n}\n\n/* Enhanced shadow on hover */\n.hover\\:shadow-lg:hover {\n  box-shadow: 0 10px 15px -3px rgba(0, 0, 0, 0.1), 0 4px 6px -2px rgba(0, 0, 0, 0.05);\n}\n\n/* Disabled state styling */\n.disabled\\:cursor-not-allowed:disabled {\n  cursor: not-allowed;\n}\n\n.disabled\\:opacity-50:disabled {\n  opacity: 0.5;\n}\n\n/* Custom scrollbar styling */\n.scrollbar-custom::-webkit-scrollbar {\n  width: 8px;\n}\n\n.scrollbar-custom::-webkit-scrollbar-track {\n  background-color: #f3f4f6;\n  border-radius: 4px;\n}\n\n.dark .scrollbar-custom::-webkit-scrollbar-track {\n  background-color: #0f0f0f;\n}\n\n.scrollbar-custom::-webkit-scrollbar-thumb {\n  background-color: #d1d5db;\n  border-radius: 4px;\n}\n\n.dark .scrollbar-custom::-webkit-scrollbar-thumb {\n  background-color: #0a0a0a;\n}\n\n.scrollbar-custom::-webkit-scrollbar-thumb:hover {\n  background-color: #9ca3af;\n}\n\n.dark .scrollbar-custom::-webkit-scrollbar-thumb:hover {\n  background-color: #000000;\n}\n</style>\n"],"file":"assets/GrammarManagerModal-D3AuGgO5.js"}