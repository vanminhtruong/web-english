{"version":3,"file":"FlashcardDateFilter-D3D-TU19.js","sources":["../../src/views/practice/components/FlashcardDateFilter.vue"],"sourcesContent":["<template>\n  <div class=\"bg-white dark:bg-[#0f0f0f] border-b border-gray-200 dark:border-dark-bg-mute\">\n    <div class=\"max-w-4xl mx-auto px-4 sm:px-6 lg:px-8 py-4\">\n      <div class=\"flex flex-col sm:flex-row items-start sm:items-center justify-between gap-4\">\n        <!-- Date Filter Section (always enabled) -->\n        <div class=\"flex flex-col sm:flex-row items-start sm:items-center gap-4\">\n          <div class=\"flex items-center gap-2\">\n            <svg class=\"w-4 h-4 text-gray-500 dark:text-white/60\" fill=\"currentColor\" viewBox=\"0 0 20 20\">\n              <path fill-rule=\"evenodd\" d=\"M6 2a1 1 0 00-1 1v1H4a2 2 0 00-2 2v10a2 2 0 002 2h12a2 2 0 002-2V6a2 2 0 00-2-2h-1V3a1 1 0 10-2 0v1H7V3a1 1 0 00-1-1zm0 5a1 1 0 000 2h8a1 1 0 100-2H6z\" clip-rule=\"evenodd\"/>\n            </svg>\n            <!-- Custom Dropdown vá»›i Scroll -->\n            <div class=\"relative\">\n              <button\n                type=\"button\"\n                @click=\"toggleDropdown\"\n                :disabled=\"practiceStarted\"\n                :aria-disabled=\"practiceStarted ? 'true' : 'false'\"\n                :title=\"practiceStarted ? t('flashcard.dateFilter.disabledDuringPractice', 'Date filter is disabled during practice') : ''\"\n                class=\"px-3 py-1.5 text-sm border border-gray-300 dark:border-dark-bg-soft dark:border-2 rounded-md bg-white dark:bg-dark-bg text-gray-900 dark:text-white focus:ring-2 focus:ring-blue-500 focus:border-blue-400 disabled:opacity-50 disabled:cursor-not-allowed flex items-center justify-between min-w-[200px] sm:min-w-[240px]\"\n              >\n                <span class=\"truncate\">\n                  {{ getSelectedDateDisplay() }}\n                </span>\n                <svg \n                  class=\"w-4 h-4 ml-2 transition-transform duration-200\" \n                  :class=\"{ 'rotate-180': isDropdownOpen }\"\n                  fill=\"currentColor\" \n                  viewBox=\"0 0 20 20\"\n                >\n                  <path fill-rule=\"evenodd\" d=\"M5.293 7.293a1 1 0 011.414 0L10 10.586l3.293-3.293a1 1 0 111.414 1.414l-4 4a1 1 0 01-1.414 0l-4-4a1 1 0 010-1.414z\" clip-rule=\"evenodd\" />\n                </svg>\n              </button>\n              \n              <!-- Dropdown Menu -->\n              <transition\n                enter-active-class=\"transform transition duration-100 ease-out\"\n                enter-from-class=\"scale-95 opacity-0 translate-y-2\"\n                enter-to-class=\"scale-100 opacity-100 translate-y-0\"\n                leave-active-class=\"transform transition duration-75 ease-in\"\n                leave-from-class=\"scale-100 opacity-100 translate-y-0\"\n                leave-to-class=\"scale-95 opacity-0 translate-y-2\"\n              >\n                <div \n                  v-if=\"isDropdownOpen && !practiceStarted\"\n                  class=\"absolute bottom-full mb-1 w-full bg-white dark:bg-dark-bg border border-gray-300 dark:border-dark-bg-soft dark:border-2 rounded-md shadow-xl ring-1 ring-black ring-opacity-5 max-h-60 overflow-y-auto origin-bottom\"\n                  style=\"z-index: 99999 !important;\"\n                >\n                <!-- All Dates Option -->\n                <button\n                  type=\"button\"\n                  @click=\"selectDate('')\"\n                  class=\"w-full px-3 py-2 text-left text-sm hover:bg-gray-100 dark:hover:bg-dark-bg-mute transition-colors duration-150\"\n                  :class=\"{\n                    'bg-blue-50 dark:bg-blue-900/30 text-blue-600 dark:text-blue-400': localSelectedDate === ''\n                  }\"\n                >\n                  {{ t('flashcard.dateFilter.allDates', 'All dates') }}\n                </button>\n                \n                <!-- Date Options -->\n                <button\n                  v-for=\"group in availableDates\"\n                  :key=\"group.date\"\n                  type=\"button\"\n                  @click=\"selectDate(group.date)\"\n                  class=\"w-full px-3 py-2 text-left text-sm hover:bg-gray-100 dark:hover:bg-dark-bg-mute transition-colors duration-150 flex items-center justify-between\"\n                  :class=\"{\n                    'bg-blue-50 dark:bg-blue-900/30 text-blue-600 dark:text-blue-400': localSelectedDate === group.date\n                  }\"\n                >\n                  <span class=\"truncate\">{{ group.displayDate }}</span>\n                  <span class=\"ml-2 text-xs text-gray-500 dark:text-white/60 flex-shrink-0\">\n                    ({{ group.count }})\n                  </span>\n                </button>\n                </div>\n              </transition>\n            </div>\n          </div>\n        </div>\n\n        <!-- Info Section -->\n        <div v-if=\"localSelectedDate\" class=\"text-sm text-gray-600 dark:text-white/70\">\n          <span class=\"flex items-center gap-1\">\n            <svg class=\"w-4 h-4\" fill=\"currentColor\" viewBox=\"0 0 20 20\">\n              <path fill-rule=\"evenodd\" d=\"M18 10a8 8 0 11-16 0 8 8 0 0116 0zm-7-4a1 1 0 11-2 0 1 1 0 012 0zM9 9a1 1 0 000 2v3a1 1 0 001 1h1a1 1 0 100-2v-3a1 1 0 00-1-1H9z\" clip-rule=\"evenodd\"/>\n            </svg>\n            {{ getFilterInfo() }}\n          </span>\n        </div>\n      </div>\n    </div>\n  </div>\n</template>\n\n<script setup lang=\"ts\">\nimport { computed, ref, watch, onMounted, onUnmounted } from 'vue'\nimport { useI18n } from 'vue-i18n'\nimport { groupVocabulariesByDate, getGroupDisplayDate } from '../../../utils/dateUtils'\nimport type { Vocabulary } from '../../../composables/useVocabularyStore'\n\ninterface Props {\n  vocabularies: Vocabulary[]\n  // enabled remains for backward-compat but is ignored (filter is always enabled)\n  enabled?: boolean\n  selectedDate: string\n  practiceStarted?: boolean\n}\n\ninterface DateGroup {\n  date: string\n  displayDate: string\n  count: number\n}\n\nconst props = defineProps<Props>()\n\nconst emit = defineEmits<{\n  // keep event signature for parent compatibility; not emitted anymore for enabled\n  'update:enabled': [value: boolean]\n  'update:selectedDate': [value: string]\n}>()\n\nconst { t, locale } = useI18n()\n\n// Dropdown state\nconst isDropdownOpen = ref(false)\n\n// Filter is always enabled\nconst localEnabled = computed(() => true)\n\nconst localSelectedDate = computed({\n  get: () => props.selectedDate,\n  set: (value) => emit('update:selectedDate', value)\n})\n\n// Get available dates from vocabularies\nconst availableDates = computed((): DateGroup[] => {\n  if (!props.vocabularies.length) return []\n  \n  const grouped = groupVocabulariesByDate(props.vocabularies, locale.value)\n  \n  return grouped.map(group => ({\n    date: group.date,\n    displayDate: group.displayDate,\n    count: group.vocabularies.length\n  }))\n})\n\n// Dropdown functions\nconst toggleDropdown = () => {\n  if (props.practiceStarted) return\n  isDropdownOpen.value = !isDropdownOpen.value\n}\n\nconst selectDate = (date: string) => {\n  if (props.practiceStarted) return\n  localSelectedDate.value = date\n  isDropdownOpen.value = false\n}\n\nconst getSelectedDateDisplay = () => {\n  if (!localSelectedDate.value) {\n    return t('flashcard.dateFilter.allDates', 'All dates')\n  }\n  \n  const selectedGroup = availableDates.value.find(g => g.date === localSelectedDate.value)\n  if (!selectedGroup) {\n    return t('flashcard.dateFilter.allDates', 'All dates')\n  }\n  \n  return `${selectedGroup.displayDate} (${selectedGroup.count})`\n}\n\n// Close dropdown when clicking outside\nconst handleClickOutside = (event: Event) => {\n  const target = event.target as HTMLElement\n  if (!target.closest('.relative')) {\n    isDropdownOpen.value = false\n  }\n}\n\n// Get filter info text\nconst getFilterInfo = () => {\n  if (!localSelectedDate.value) return ''\n  \n  const selectedGroup = availableDates.value.find(g => g.date === localSelectedDate.value)\n  if (!selectedGroup) return ''\n  \n  return t(\n    'flashcard.dateFilter.info',\n    { count: selectedGroup.count, date: selectedGroup.displayDate },\n    `Showing ${selectedGroup.count} words from ${selectedGroup.displayDate}`\n  )\n}\n\n// No need to watch enabled state since the filter is always enabled\n\n// Reset selected date if it becomes unavailable\nwatch(availableDates, (newDates) => {\n  if (localSelectedDate.value && !newDates.some(d => d.date === localSelectedDate.value)) {\n    localSelectedDate.value = ''\n  }\n})\n\n// Always enabled: no-op watcher removed\n\n// Setup click outside listener\nonMounted(() => {\n  document.addEventListener('click', handleClickOutside)\n})\n\nonUnmounted(() => {\n  document.removeEventListener('click', handleClickOutside)\n})\n</script>\n"],"names":["_openBlock","_createElementBlock","_createElementVNode","practiceStarted","_unref","_toDisplayString","_normalizeClass","_createVNode","_Transition","_Fragment","_renderList","_createTextVNode"],"mappings":"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"}