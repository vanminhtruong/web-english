const __vite__mapDeps=(i,m=__vite__mapDeps,d=(m.f||(m.f=["/web-english/assets/ConfirmToast-Kx7tg3SX.js","/web-english/assets/vue-vendor-Bt65BSdi.js"])))=>i.map(i=>d[i]);
import{_ as e}from"./index-DmJNupMF.js";import{d as a,A as r,C as t,I as l,J as o,D as s,c as n,v as i,y as d,w as u,e as c,Y as m,f as g,i as p,t as v,u as b,M as x,a0 as y,g as f,n as h,F as k,j as w,_ as C,$ as M,a as j,N as D}from"./vue-vendor-Bt65BSdi.js";import{u as V,a as S}from"./ui-vendor-D-J_fEQ5.js";import{u as A}from"./useVocabularyStore-CJz0zgKu.js";import{a as L}from"./dateUtils-N7QR9R2r.js";import{a as E}from"./topicUtils-CuplmVBM.js";import{_ as I}from"./_plugin-vue_export-helper-BCo6x5W8.js";const P={key:0,class:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center p-4 z-50 backdrop-blur-sm"},_={class:"w-full max-w-4xl"},T={class:"px-6 py-4 border-b border-gray-200 dark:border-gray-700 bg-gradient-to-r from-blue-50 to-indigo-50 dark:from-[#0a0a0a] dark:to-[#0a0a0a]"},G={class:"flex items-center justify-between"},B={class:"text-lg sm:text-xl md:text-2xl font-semibold text-gray-900 dark:text-white flex items-center space-x-2"},U={class:"flex items-center space-x-4"},H={class:"flex items-center space-x-3"},N={class:"text-sm font-medium text-gray-700 dark:text-gray-300"},z={class:"relative inline-flex items-center cursor-pointer"},O={class:"text-sm font-medium text-gray-700 dark:text-gray-300"},F={key:0,class:"mt-3 p-2 bg-blue-50 dark:bg-gray-custom rounded-lg"},J={class:"flex items-center justify-between"},R={class:"text-sm text-blue-700 dark:text-blue-300 flex items-center"},$={key:0,class:"relative"},q={class:"bg-green-200 dark:bg-green-800 text-green-800 dark:text-green-200 px-2 py-0.5 rounded-full text-xs font-bold"},K={key:0,class:"absolute right-0 top-full mt-2 w-80 bg-white dark:bg-[#0a0a0a] border border-gray-200 dark:border-gray-700 rounded-lg shadow-xl z-50 max-h-64 overflow-y-auto"},Y={class:"p-3 border-b border-gray-200 dark:border-gray-700"},Q={class:"text-sm font-semibold text-gray-900 dark:text-white flex items-center"},W={key:0,class:"p-4 text-center text-gray-500 dark:text-gray-400 text-sm"},X={key:1,class:"divide-y divide-gray-200 dark:divide-gray-700"},Z={class:"flex items-start justify-between"},ee={class:"flex-1 min-w-0"},ae={class:"text-sm font-medium text-gray-900 dark:text-white truncate"},re={class:"text-xs text-gray-600 dark:text-gray-300 mt-1 line-clamp-2"},te={class:"flex items-center space-x-2 mt-2"},le={class:"inline-flex items-center px-2 py-0.5 rounded text-xs font-medium bg-blue-100 dark:bg-blue-900/30 text-blue-800 dark:text-blue-200"},oe={class:"inline-flex items-center px-2 py-0.5 rounded text-xs font-medium bg-purple-100 dark:bg-purple-900/30 text-purple-800 dark:text-purple-200"},se={class:"px-6 py-4 max-h-[70vh] overflow-y-auto"},ne={class:"mb-6 p-4 bg-gray-50 dark:bg-dark-bg-mute rounded-lg border border-gray-200 dark:border-dark-bg-mute animate-fade-in-up",style:{"animation-delay":"0.1s"}},ie={class:"text-md font-medium text-gray-900 dark:text-white mb-4 flex items-center"},de={class:"animate-fade-in-up",style:{"animation-delay":"0.2s"}},ue={class:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2 flex items-center"},ce=["placeholder"],me={class:"animate-fade-in-up",style:{"animation-delay":"0.3s"}},ge={class:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2 flex items-center"},pe={value:""},ve={value:"tenses"},be={value:"conditionals"},xe={value:"passive"},ye={value:"modals"},fe={value:"articles"},he={value:"prepositions"},ke={value:"conjunctions"},we={value:"other"},Ce={class:"animate-fade-in-up",style:{"animation-delay":"0.4s"}},Me={class:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2 flex items-center"},je={value:""},De={value:"beginner"},Ve={value:"intermediate"},Se={value:"advanced"},Ae={class:"animate-fade-in-up",style:{"animation-delay":"0.5s"}},Le={class:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2 flex items-center"},Ee={class:"space-y-2"},Ie=["placeholder"],Pe={key:0,class:"p-2 bg-yellow-50 dark:bg-[#0a0a0a] border border-yellow-200 dark:border-yellow-600 rounded text-sm"},_e={class:"text-yellow-700 dark:text-yellow-400 font-medium mb-1"},Te=["innerHTML"],Ge={class:"animate-fade-in-up",style:{"animation-delay":"0.6s"}},Be={class:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2 flex items-center"},Ue={class:"space-y-2"},He=["placeholder"],Ne={key:0,class:"p-2 bg-teal-50 dark:bg-[#0a0a0a] border border-teal-200 dark:border-teal-600 rounded text-sm"},ze={class:"text-teal-700 dark:text-teal-400 font-medium mb-1"},Oe=["innerHTML"],Fe={class:"animate-fade-in-up",style:{"animation-delay":"0.7s"}},Je={class:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2 flex items-center"},Re={class:"space-y-2"},$e=["onUpdate:modelValue","placeholder"],qe=["onClick"],Ke={class:"flex justify-end space-x-3 pt-4 animate-fade-in-up",style:{"animation-delay":"0.8s"}},Ye={type:"submit",class:"px-4 py-2 bg-blue-600 hover:bg-blue-700 text-white rounded-lg transition-all duration-300 transform hover:scale-105 hover:shadow-lg"},Qe={class:"animate-fade-in-up",style:{"animation-delay":"0.9s"}},We={class:"flex items-center justify-between mb-4"},Xe={class:"text-md font-medium text-gray-900 dark:text-white flex items-center"},Ze={value:""},ea={value:"tenses"},aa={value:"conditionals"},ra={value:"passive"},ta={value:"modals"},la={value:"articles"},oa={value:"prepositions"},sa={value:"conjunctions"},na={value:"other"},ia={key:0,class:"space-y-4 max-h-96 overflow-y-auto scrollbar-custom"},da={class:"flex items-start justify-between"},ua={class:"flex-1"},ca={class:"flex items-center space-x-2 mb-2"},ma={class:"font-medium text-gray-900 dark:text-white"},ga={class:"px-2 py-1 text-xs bg-blue-100 dark:bg-blue-900/50 text-blue-800 dark:text-blue-300 rounded-full"},pa={class:"px-2 py-1 text-xs bg-green-100 dark:bg-green-900/50 text-green-800 dark:text-green-300 rounded-full"},va={class:"mb-2"},ba={class:"text-sm font-medium text-gray-700 dark:text-gray-300 mb-1"},xa=["innerHTML"],ya={key:0,class:"mb-2"},fa=["innerHTML"],ha={key:1,class:"mb-2"},ka={class:"text-sm font-medium text-gray-700 dark:text-gray-300 mb-1"},wa={class:"text-sm text-gray-600 dark:text-gray-400 space-y-2"},Ca={class:"flex items-start flex-1"},Ma={class:"flex-1"},ja=["onClick","disabled","title"],Da={key:0,class:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},Va={key:1,class:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},Sa={class:"text-xs text-gray-500 dark:text-gray-400"},Aa={class:"flex items-center space-x-2 ml-4"},La=["onClick","title"],Ea=["onClick","title"],Ia={key:1,class:"text-center py-8 animate-fade-in-up",style:{"animation-delay":"1.0s"}},Pa={class:"text-gray-500 dark:text-gray-400"},_a={class:"px-6 py-4 border-t border-gray-200 dark:border-gray-700 bg-gradient-to-r from-gray-50 to-blue-50 dark:from-[#0a0a0a] dark:to-[#0a0a0a]"},Ta={class:"flex justify-end"},Ga=I(a({__name:"GrammarManagerModal",props:{modelValue:{type:Boolean},selectedDate:{default:null}},emits:["update:modelValue"],setup(a,{emit:I}){const Ga=D(()=>e(()=>import("./ConfirmToast-Kx7tg3SX.js"),__vite__mapDeps([0,1]),import.meta.url)),{t:Ba}=V(),Ua=S(),{allVocabularies:Ha}=A(),Na=r(null),za=a,Oa=I,Fa=r([]),Ja=r(!1),Ra=r(null),$a=r(""),qa=r(!1),Ka=r(!1),Ya=r({title:"",category:"",level:"",formula:"",description:"",examples:[""]}),Qa=t(()=>{let e=Fa.value;return e=qa.value?e.filter(e=>e.dateGroup===za.selectedDate):e.filter(e=>!e.dateGroup),$a.value&&(e=e.filter(e=>e.category===$a.value)),e}),Wa=t(()=>za.selectedDate?Ha.value.filter(e=>L(e.createdAt)===za.selectedDate):[]),Xa=e=>e?e.replace(/<\/br>/gi,"<br>").replace(/<br\s*\/?>/gi,"<br>").replace(/\n/g,"<br>"):"",Za=t(()=>Xa(Ya.value.formula)),er=t(()=>Xa(Ya.value.description)),ar=()=>{rr(),Oa("update:modelValue",!1)},rr=()=>{Ya.value={title:"",category:"",level:"",formula:"",description:"",examples:[""]},Ja.value=!1,Ra.value=null},tr=()=>{Ya.value.examples.push("")},lr=()=>{const e=new Date;let a="";if(Ja.value){const r=Fa.value.findIndex(e=>e.id===Ra.value);-1!==r&&(Fa.value[r]={...Fa.value[r],title:Ya.value.title,category:Ya.value.category,level:Ya.value.level,formula:Ya.value.formula,description:Ya.value.description,examples:Ya.value.examples.filter(e=>e.trim()),updatedAt:e},a=Ra.value||"")}else{const r={id:Date.now().toString(),title:Ya.value.title,category:Ya.value.category,level:Ya.value.level,formula:Ya.value.formula,description:Ya.value.description,examples:Ya.value.examples.filter(e=>e.trim()),createdAt:e,updatedAt:e,dateGroup:qa.value&&za.selectedDate||void 0};Fa.value.push(r),a=r.id}or();const r=new CustomEvent("grammar-rules-updated",{detail:{action:Ja.value?"updated":"added",ruleId:a,dateGroup:qa.value&&za.selectedDate||void 0}});window.dispatchEvent(r),rr()},or=()=>{localStorage.setItem("grammar-rules",JSON.stringify(Fa.value))},sr=()=>{const e=localStorage.getItem("grammar-rules");if(e)try{const a=JSON.parse(e);Fa.value=a.map(e=>({...e,createdAt:new Date(e.createdAt),updatedAt:new Date(e.updatedAt)}))}catch(a){console.error("Error loading grammar rules:",a)}},nr=()=>{console.log("Vocabulary import detected, refreshing grammar rules"),sr()};l(()=>{sr(),(()=>{const e=localStorage.getItem("grammar-manager-per-date-mode");if(e)try{const a=JSON.parse(e);qa.value="boolean"==typeof a&&a}catch(a){console.error("Error loading toggle state:",a),qa.value=!1}})(),window.addEventListener("vocabularyImportComplete",nr)}),o(()=>{window.removeEventListener("vocabularyImportComplete",nr),ir()});const ir=()=>{document.body.style.overflow=""};return s(()=>za.modelValue,e=>{e?(sr(),document.body.style.overflow="hidden"):(rr(),ir())}),s(qa,e=>{rr(),$a.value="",localStorage.setItem("grammar-manager-per-date-mode",JSON.stringify(qa.value)),e&&!za.selectedDate&&console.warn("Per-date mode enabled but no date selected")}),(e,a)=>(i(),n("div",null,[d(m,{"enter-active-class":"transition-all duration-500 ease-out","enter-from-class":"opacity-0","enter-to-class":"opacity-100","leave-active-class":"transition-all duration-300 ease-in","leave-from-class":"opacity-100","leave-to-class":"opacity-0"},{default:u(()=>[za.modelValue?(i(),n("div",P,[d(m,{"enter-active-class":"transition-all duration-500 ease-out","enter-from-class":"opacity-0 scale-90 translate-y-8 rotate-1","enter-to-class":"opacity-100 scale-100 translate-y-0 rotate-0","leave-active-class":"transition-all duration-300 ease-in","leave-from-class":"opacity-100 scale-100 translate-y-0 rotate-0","leave-to-class":"opacity-0 scale-90 translate-y-8 rotate-1"},{default:u(()=>[g("div",_,[g("div",{class:"bg-white dark:bg-[#0a0a0a] shadow-2xl rounded-xl border border-gray-200 dark:border-gray-700 transform overflow-hidden",onClick:a[8]||(a[8]=p(()=>{},["stop"]))},[g("div",T,[g("div",G,[g("h3",B,[a[9]||(a[9]=g("span",{class:"w-2 h-2 bg-blue-500 rounded-full animate-pulse"},null,-1)),g("span",null,v(b(Ba)("grammar.manager.title","Grammar Manager")),1)]),g("div",U,[g("div",H,[g("span",N,v(b(Ba)("grammar.manager.globalMode","Global")),1),g("label",z,[x(g("input",{"onUpdate:modelValue":a[0]||(a[0]=e=>qa.value=e),type:"checkbox",class:"sr-only peer"},null,512),[[y,qa.value]]),a[10]||(a[10]=g("div",{class:"w-11 h-6 bg-gray-200 peer-focus:outline-none peer-focus:ring-4 peer-focus:ring-blue-300 dark:peer-focus:ring-blue-800 rounded-full peer dark:bg-gray-700 peer-checked:after:translate-x-full peer-checked:after:border-white after:content-[''] after:absolute after:top-[2px] after:left-[2px] after:bg-white after:border-gray-300 after:border after:rounded-full after:h-5 after:w-5 after:transition-all dark:border-gray-600 peer-checked:bg-blue-600"},null,-1))]),g("span",O,v(b(Ba)("grammar.manager.perDateMode","Per Date")),1)]),g("button",{onClick:ar,class:"text-gray-400 hover:text-gray-600 dark:hover:text-gray-200 transition-all duration-300 hover:scale-110 hover:rotate-90 p-1 rounded-full hover:bg-gray-100 dark:hover:bg-gray-800"},a[11]||(a[11]=[g("svg",{class:"w-6 h-6",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[g("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M6 18L18 6M6 6l12 12"})],-1)]))])]),qa.value?(i(),n("div",F,[g("div",J,[g("p",R,[a[12]||(a[12]=g("svg",{class:"w-4 h-4 mr-2",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[g("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M13 16h-1v-4h-1m1-4h.01M21 12a9 9 0 11-18 0 9 9 0 0118 0z"})],-1)),f(" "+v(e.selectedDate?b(Ba)("grammar.manager.perDateDescription",{date:e.selectedDate})||`Managing grammar rules for date: ${e.selectedDate}`:b(Ba)("grammar.manager.noDateSelected")||"No date selected for per-date mode"),1)]),e.selectedDate?(i(),n("div",$,[g("button",{onClick:a[1]||(a[1]=e=>Ka.value=!Ka.value),class:"flex items-center space-x-2 px-3 py-1.5 bg-green-100 dark:bg-green-900/30 text-green-800 dark:text-green-200 rounded-md hover:bg-green-200 dark:hover:bg-green-900/50 transition-all duration-200 text-sm font-medium"},[a[14]||(a[14]=g("svg",{class:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[g("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M12 6.253v13m0-13C10.832 5.477 9.246 5 7.5 5S4.168 5.477 3 6.253v13C4.168 18.477 5.754 18 7.5 18s3.332.477 4.5 1.253m0-13C13.168 5.477 14.754 5 16.5 5c1.746 0 3.332.477 4.5 1.253v13C19.832 18.477 18.246 18 16.5 18c-1.746 0-3.332.477-4.5 1.253"})],-1)),g("span",null,v(b(Ba)("grammar.manager.showVocabulary","Show Vocabulary")),1),g("span",q,v(Wa.value.length),1),(i(),n("svg",{class:h(["w-4 h-4 transition-transform duration-200",{"rotate-180":Ka.value}]),fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},a[13]||(a[13]=[g("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M19 9l-7 7-7-7"},null,-1)]),2))]),d(m,{"enter-active-class":"transition-all duration-300 ease-out","enter-from-class":"opacity-0 scale-95 translate-y-2","enter-to-class":"opacity-100 scale-100 translate-y-0","leave-active-class":"transition-all duration-200 ease-in","leave-from-class":"opacity-100 scale-100 translate-y-0","leave-to-class":"opacity-0 scale-95 translate-y-2"},{default:u(()=>[Ka.value?(i(),n("div",K,[g("div",Y,[g("h4",Q,[a[15]||(a[15]=g("svg",{class:"w-4 h-4 mr-2 text-green-500",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[g("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M12 6.253v13m0-13C10.832 5.477 9.246 5 7.5 5S4.168 5.477 3 6.253v13C4.168 18.477 5.754 18 7.5 18s3.332.477 4.5 1.253m0-13C13.168 5.477 14.754 5 16.5 5c1.746 0 3.332.477 4.5 1.253v13C19.832 18.477 18.246 18 16.5 18c-1.746 0-3.332.477-4.5 1.253"})],-1)),f(" "+v(b(Ba)("grammar.manager.vocabularyForDate",{date:e.selectedDate})||`Vocabulary for ${e.selectedDate}`),1)])]),0===Wa.value.length?(i(),n("div",W,v(b(Ba)("grammar.manager.noVocabularyFound","No vocabulary found for this date")),1)):(i(),n("div",X,[(i(!0),n(k,null,w(Wa.value,e=>(i(),n("div",{key:e.id,class:"p-3 hover:bg-gray-50 dark:hover:bg-gray-custom cursor-pointer transition-colors duration-150"},[g("div",Z,[g("div",ee,[g("h5",ae,v(e.word),1),g("p",re,v(e.meaning),1),g("div",te,[g("span",le,v(b(E)(e.category)),1),g("span",oe,v(e.level),1)])])])]))),128))]))])):c("",!0)]),_:1})])):c("",!0)])])):c("",!0)]),g("div",se,[g("div",ne,[g("h4",ie,[a[16]||(a[16]=g("span",{class:"w-1 h-4 bg-blue-500 rounded mr-2"},null,-1)),f(" "+v(Ja.value?b(Ba)("grammar.manager.editGrammar","Edit Grammar Rule"):b(Ba)("grammar.manager.addNew","Add New Grammar Rule")),1)]),g("form",{onSubmit:p(lr,["prevent"]),class:"space-y-4"},[g("div",de,[g("label",ue,[a[17]||(a[17]=g("span",{class:"w-1 h-4 bg-green-500 rounded mr-2"},null,-1)),f(" "+v(b(Ba)("grammar.manager.title","Title"))+" ",1),a[18]||(a[18]=g("span",{class:"text-red-500 ml-1"},"*",-1))]),x(g("input",{"onUpdate:modelValue":a[2]||(a[2]=e=>Ya.value.title=e),type:"text",required:"",class:"w-full px-3 py-2 border border-gray-300 dark:border-dark-bg-mute rounded-lg bg-white dark:bg-dark-bg-soft text-gray-900 dark:text-white focus:outline-none focus:ring-2 focus:ring-green-500 focus:border-transparent transition-all duration-300 hover:border-green-400 dark:hover:border-green-500 transform hover:scale-[1.02]",placeholder:b(Ba)("grammar.manager.titlePlaceholder","e.g., Present Perfect Tense")},null,8,ce),[[C,Ya.value.title]])]),g("div",me,[g("label",ge,[a[19]||(a[19]=g("span",{class:"w-1 h-4 bg-purple-500 rounded mr-2"},null,-1)),f(" "+v(b(Ba)("grammar.manager.category","Category"))+" ",1),a[20]||(a[20]=g("span",{class:"text-red-500 ml-1"},"*",-1))]),x(g("select",{"onUpdate:modelValue":a[3]||(a[3]=e=>Ya.value.category=e),required:"",class:"w-full px-3 py-2 border border-gray-300 dark:border-dark-bg-mute rounded-lg bg-white dark:bg-dark-bg-soft text-gray-900 dark:text-white focus:outline-none focus:ring-2 focus:ring-purple-500 focus:border-transparent transition-all duration-300 hover:border-purple-400 dark:hover:border-purple-500 transform hover:scale-[1.02] cursor-pointer"},[g("option",pe,v(b(Ba)("grammar.manager.selectCategory","Select Category")),1),g("option",ve,v(b(Ba)("grammar.categories.tenses","Tenses")),1),g("option",be,v(b(Ba)("grammar.categories.conditionals","Conditionals")),1),g("option",xe,v(b(Ba)("grammar.categories.passive","Passive Voice")),1),g("option",ye,v(b(Ba)("grammar.categories.modals","Modal Verbs")),1),g("option",fe,v(b(Ba)("grammar.categories.articles","Articles")),1),g("option",he,v(b(Ba)("grammar.categories.prepositions","Prepositions")),1),g("option",ke,v(b(Ba)("grammar.categories.conjunctions","Conjunctions")),1),g("option",we,v(b(Ba)("grammar.categories.other","Other")),1)],512),[[M,Ya.value.category]])]),g("div",Ce,[g("label",Me,[a[21]||(a[21]=g("span",{class:"w-1 h-4 bg-orange-500 rounded mr-2"},null,-1)),f(" "+v(b(Ba)("grammar.manager.level","Level"))+" ",1),a[22]||(a[22]=g("span",{class:"text-red-500 ml-1"},"*",-1))]),x(g("select",{"onUpdate:modelValue":a[4]||(a[4]=e=>Ya.value.level=e),required:"",class:"w-full px-3 py-2 border border-gray-300 dark:border-dark-bg-mute rounded-lg bg-white dark:bg-dark-bg-soft text-gray-900 dark:text-white focus:outline-none focus:ring-2 focus:ring-orange-500 focus:border-transparent transition-all duration-300 hover:border-orange-400 dark:hover:border-orange-500 transform hover:scale-[1.02] cursor-pointer"},[g("option",je,v(b(Ba)("grammar.manager.selectLevel","Select Level")),1),g("option",De,v(b(Ba)("grammar.levels.beginner","Beginner")),1),g("option",Ve,v(b(Ba)("grammar.levels.intermediate","Intermediate")),1),g("option",Se,v(b(Ba)("grammar.levels.advanced","Advanced")),1)],512),[[M,Ya.value.level]])]),g("div",Ae,[g("label",Le,[a[23]||(a[23]=g("span",{class:"w-1 h-4 bg-yellow-500 rounded mr-2"},null,-1)),f(" "+v(b(Ba)("grammar.manager.formula","Grammar Formula"))+" ",1),a[24]||(a[24]=g("span",{class:"text-red-500 ml-1"},"*",-1))]),g("div",Ee,[x(g("textarea",{"onUpdate:modelValue":a[5]||(a[5]=e=>Ya.value.formula=e),required:"",rows:"3",class:"w-full px-3 py-2 border border-gray-300 dark:border-dark-bg-mute rounded-lg bg-white dark:bg-dark-bg-soft text-gray-900 dark:text-white focus:outline-none focus:ring-2 focus:ring-yellow-500 focus:border-transparent transition-all duration-300 hover:border-yellow-400 dark:hover:border-yellow-500 transform hover:scale-[1.02] resize-none",placeholder:b(Ba)("grammar.manager.formulaPlaceholder","e.g., Subject + have/has + past participle + <br> or </br> for line break")},null,8,Ie),[[C,Ya.value.formula]]),Ya.value.formula.trim()?(i(),n("div",Pe,[g("div",_e,v(b(Ba)("grammar.manager.preview","Preview"))+":",1),g("div",{class:"text-gray-900 dark:text-white",innerHTML:Za.value},null,8,Te)])):c("",!0)])]),g("div",Ge,[g("label",Be,[a[25]||(a[25]=g("span",{class:"w-1 h-4 bg-teal-500 rounded mr-2"},null,-1)),f(" "+v(b(Ba)("grammar.manager.description","Description")),1)]),g("div",Ue,[x(g("textarea",{"onUpdate:modelValue":a[6]||(a[6]=e=>Ya.value.description=e),rows:"3",class:"w-full px-3 py-2 border border-gray-300 dark:border-dark-bg-mute rounded-lg bg-white dark:bg-dark-bg-soft text-gray-900 dark:text-white focus:outline-none focus:ring-2 focus:ring-teal-500 focus:border-transparent transition-all duration-300 hover:border-teal-400 dark:hover:border-teal-500 transform hover:scale-[1.02] resize-none",placeholder:b(Ba)("grammar.manager.descriptionPlaceholder","Explain when and how to use this grammar rule + <br> or </br> for line break")},null,8,He),[[C,Ya.value.description]]),Ya.value.description.trim()?(i(),n("div",Ne,[g("div",ze,v(b(Ba)("grammar.manager.preview","Preview"))+":",1),g("div",{class:"text-gray-900 dark:text-white",innerHTML:er.value},null,8,Oe)])):c("",!0)])]),g("div",Fe,[g("label",Je,[a[26]||(a[26]=g("span",{class:"w-1 h-4 bg-pink-500 rounded mr-2"},null,-1)),f(" "+v(b(Ba)("grammar.manager.examples","Examples")),1)]),g("div",Re,[(i(!0),n(k,null,w(Ya.value.examples,(e,r)=>(i(),n("div",{key:r,class:"flex items-center space-x-2"},[x(g("input",{"onUpdate:modelValue":e=>Ya.value.examples[r]=e,type:"text",class:"flex-1 px-3 py-2 border border-gray-300 dark:border-dark-bg-mute rounded-lg bg-white dark:bg-dark-bg-soft text-gray-900 dark:text-white focus:outline-none focus:ring-2 focus:ring-pink-500 focus:border-transparent transition-all duration-300 hover:border-pink-400 dark:hover:border-pink-500 transform hover:scale-[1.02]",placeholder:b(Ba)("grammar.manager.examplePlaceholder","e.g., I have finished my homework.")},null,8,$e),[[C,Ya.value.examples[r]]]),g("button",{type:"button",onClick:e=>(e=>{Ya.value.examples.length>1&&Ya.value.examples.splice(e,1)})(r),class:"text-red-500 hover:text-red-700 p-1 rounded-full hover:bg-red-50 dark:hover:bg-red-900/20 transition-all duration-300 hover:scale-110"},a[27]||(a[27]=[g("svg",{class:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[g("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M6 18L18 6M6 6l12 12"})],-1)]),8,qe)]))),128)),g("button",{type:"button",onClick:tr,class:"text-blue-600 hover:text-blue-800 dark:text-blue-400 dark:hover:text-blue-300 text-sm font-medium transition-all duration-300 hover:scale-105"}," + "+v(b(Ba)("grammar.manager.addExample","Add Example")),1)])]),g("div",Ke,[g("button",{type:"button",onClick:rr,class:"px-4 py-2 text-gray-700 dark:text-gray-300 bg-gray-100 dark:bg-gray-700 hover:bg-gray-200 dark:hover:bg-gray-600 rounded-lg transition-all duration-300 transform hover:scale-105 hover:shadow-md"},v(b(Ba)("common.cancel","Cancel")),1),g("button",Ye,v(Ja.value?b(Ba)("common.update","Update"):b(Ba)("common.add","Add")),1)])],32)]),g("div",Qe,[g("div",We,[g("h4",Xe,[a[28]||(a[28]=g("span",{class:"w-1 h-4 bg-indigo-500 rounded mr-2"},null,-1)),f(" "+v(b(Ba)("grammar.manager.existingRules","Grammar Rules")),1)]),x(g("select",{"onUpdate:modelValue":a[7]||(a[7]=e=>$a.value=e),class:"px-3 py-1 border border-gray-300 dark:border-dark-bg-mute rounded-lg bg-white dark:bg-dark-bg-soft text-gray-900 dark:text-white text-sm focus:outline-none focus:ring-2 focus:ring-indigo-500 focus:border-transparent transition-all duration-300 hover:border-indigo-400 dark:hover:border-indigo-500 cursor-pointer"},[g("option",Ze,v(b(Ba)("common.all","All Categories")),1),g("option",ea,v(b(Ba)("grammar.categories.tenses","Tenses")),1),g("option",aa,v(b(Ba)("grammar.categories.conditionals","Conditionals")),1),g("option",ra,v(b(Ba)("grammar.categories.passive","Passive Voice")),1),g("option",ta,v(b(Ba)("grammar.categories.modals","Modal Verbs")),1),g("option",la,v(b(Ba)("grammar.categories.articles","Articles")),1),g("option",oa,v(b(Ba)("grammar.categories.prepositions","Prepositions")),1),g("option",sa,v(b(Ba)("grammar.categories.conjunctions","Conjunctions")),1),g("option",na,v(b(Ba)("grammar.categories.other","Other")),1)],512),[[M,$a.value]])]),Qa.value.length>0?(i(),n("div",ia,[(i(!0),n(k,null,w(Qa.value,(e,r)=>{return i(),n("div",{key:e.id,class:"p-4 border border-gray-200 dark:border-dark-bg-mute rounded-lg bg-white dark:bg-dark-bg-mute animate-fade-in-up transition-all duration-300 hover:shadow-lg hover:scale-[1.02]",style:j(`animation-delay: ${1+.1*r}s`)},[g("div",da,[g("div",ua,[g("div",ca,[g("h5",ma,v(e.title),1),g("span",ga,v(b(Ba)(`grammar.categories.${e.category}`,e.category)),1),g("span",pa,v(b(Ba)(`grammar.levels.${e.level}`,e.level)),1)]),g("div",va,[g("p",ba,v(b(Ba)("grammar.manager.formula","Formula"))+": ",1),g("div",{class:"text-sm text-gray-600 dark:text-gray-400 font-mono bg-gray-50 dark:bg-[#0a0a0a] p-2 rounded",innerHTML:Xa(e.formula)},null,8,xa)]),e.description?(i(),n("div",ya,[g("div",{class:"text-sm text-gray-600 dark:text-gray-400",innerHTML:Xa(e.description)},null,8,fa)])):c("",!0),e.examples&&e.examples.length>0?(i(),n("div",ha,[g("p",ka,v(b(Ba)("grammar.manager.examples","Examples"))+": ",1),g("ul",wa,[(i(!0),n(k,null,w(e.examples,e=>(i(),n("li",{key:e,class:"flex items-start justify-between"},[g("div",Ca,[a[29]||(a[29]=g("span",{class:"text-gray-400 mr-2 mt-0.5"},"•",-1)),g("span",Ma,v(e),1)]),g("button",{onClick:a=>(async e=>{if(Na.value!==e)try{if(Na.value=e,"speechSynthesis"in window)return new Promise((a,r)=>{const t=new SpeechSynthesisUtterance(e),l=localStorage.getItem("voice-settings");let o={rate:.8,pitch:1,volume:1};if(l)try{const e=JSON.parse(l),a=localStorage.getItem("current-voice-type")||"female-sweet";e[a]&&(o=e[a])}catch(i){console.warn("Failed to parse voice settings")}t.lang="en-US",t.rate=Math.max(.1,Math.min(10,o.rate)),t.pitch=Math.max(0,Math.min(2,o.pitch)),t.volume=Math.max(0,Math.min(1,o.volume));const s=speechSynthesis.getVoices();let n=null;n=(localStorage.getItem("current-voice-type")||"female-sweet").includes("female")?s.find(e=>e.lang.includes("en")&&e.name.toLowerCase().includes("female"))||s.find(e=>e.lang.includes("en")&&!e.name.toLowerCase().includes("male")):s.find(e=>e.lang.includes("en")&&e.name.toLowerCase().includes("male")),n||(n=s.find(e=>e.lang.includes("en"))),n&&(t.voice=n),t.onend=()=>a(void 0),t.onerror=e=>r(e.error),speechSynthesis.speak(t)});console.warn("Speech synthesis not supported")}catch(a){console.error("Error playing audio:",a)}finally{Na.value=null}})(e),disabled:Na.value===e,class:h(["ml-2 p-1 rounded-full hover:bg-gray-100 dark:hover:bg-[#0a0a0a] transition-colors duration-200 flex-shrink-0",{"text-blue-500 dark:text-blue-400":Na.value!==e,"text-orange-500 dark:text-orange-400 animate-pulse":Na.value===e}]),title:b(Ba)("grammar.examples.playAudio","Play example audio")},[Na.value!==e?(i(),n("svg",Da,a[30]||(a[30]=[g("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M15.536 8.464a5 5 0 010 7.072m2.828-9.9a9 9 0 010 12.728M6 10l4-4v12l-4-4H3a1 1 0 01-1-1v-2a1 1 0 011-1h3z"},null,-1)]))):(i(),n("svg",Va,a[31]||(a[31]=[g("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M9 19V6l12-3v13M9 19c0 1.105-1.343 2-3 2s-3-.895-3-2 1.343-2 3-2 3 .895 3 2zm12-3c0 1.105-1.343 2-3 2s-3-.895-3-2 1.343-2 3-2 3 .895 3 2zM9 10l12-3"},null,-1)])))],10,ja)]))),128))])])):c("",!0),g("p",Sa,v(b(Ba)("grammar.manager.createdAt","Created"))+": "+v((t=e.createdAt,new Date(t).toLocaleDateString())),1)]),g("div",Aa,[g("button",{onClick:a=>(e=>{Ya.value={title:e.title,category:e.category,level:e.level,formula:e.formula,description:e.description||"",examples:e.examples.length>0?[...e.examples]:[""]},Ja.value=!0,Ra.value=e.id})(e),class:"text-blue-600 hover:text-blue-800 dark:text-blue-400 dark:hover:text-blue-300 p-1 rounded-full hover:bg-blue-50 dark:hover:bg-blue-900/20 transition-all duration-300 hover:scale-110",title:b(Ba)("common.edit","Edit")},a[32]||(a[32]=[g("svg",{class:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[g("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M11 5H6a2 2 0 00-2 2v11a2 2 0 002 2h11a2 2 0 002-2v-5m-1.414-9.414a2 2 0 112.828 2.828L11.828 15H9v-2.828l8.586-8.586z"})],-1)]),8,La),g("button",{onClick:a=>(e=>{const a=Fa.value.find(a=>a.id===e);if(!a)return;const r=Ua({component:Ga,props:{message:Ba("grammar.manager.confirmDelete","Are you sure you want to delete this grammar rule?"),confirmText:Ba("common.delete","Delete"),cancelText:Ba("common.cancel","Cancel"),onConfirm:()=>{Fa.value=Fa.value.filter(a=>a.id!==e),or();const t=new CustomEvent("grammar-rules-updated",{detail:{action:"deleted",ruleId:e,dateGroup:a.dateGroup}});window.dispatchEvent(t),Ua.success(Ba("grammar.manager.ruleDeleted","Grammar rule deleted successfully")),Ua.dismiss(r)},onCancel:()=>{Ua.dismiss(r)}}},{timeout:!1,closeOnClick:!1,closeButton:!1,draggable:!1})})(e.id),class:"text-red-600 hover:text-red-800 dark:text-red-400 dark:hover:text-red-300 p-1 rounded-full hover:bg-red-50 dark:hover:bg-red-900/20 transition-all duration-300 hover:scale-110",title:b(Ba)("common.delete","Delete")},a[33]||(a[33]=[g("svg",{class:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[g("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M19 7l-.867 12.142A2 2 0 0016.138 21H7.862a2 2 0 01-1.995-1.858L5 7m5 4v6m4-6v6m1-10V4a1 1 0 00-1-1h-4a1 1 0 00-1 1v3M4 7h16"})],-1)]),8,Ea)])])],4);var t}),128))])):(i(),n("div",Ia,[a[34]||(a[34]=g("svg",{class:"w-12 h-12 text-gray-400 mx-auto mb-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[g("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M9 12h6m-6 4h6m2 5H7a2 2 0 01-2-2V5a2 2 0 012-2h5.586a1 1 0 01.707.293l5.414 5.414a1 1 0 01.293.707V19a2 2 0 01-2 2z"})],-1)),g("p",Pa,v(b(Ba)("grammar.manager.noRules","No grammar rules found")),1)]))])]),g("div",_a,[g("div",Ta,[g("button",{onClick:ar,class:"px-4 py-2 bg-gray-100 dark:bg-dark-bg-mute hover:bg-gray-200 dark:hover:bg-dark-bg-soft text-gray-700 dark:text-gray-300 rounded-lg transition-all duration-300 transform hover:scale-105 hover:shadow-md"},v(b(Ba)("common.close","Close")),1)])])])])]),_:1})])):c("",!0)]),_:1})]))}}),[["__scopeId","data-v-cbcef1c1"]]);export{Ga as default};
