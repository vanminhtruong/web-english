const __vite__mapDeps=(i,m=__vite__mapDeps,d=(m.f||(m.f=["/web-english/assets/LazyLoadComponent-BObhRYWc.js","/web-english/assets/vue-vendor-Bt65BSdi.js","/web-english/assets/_plugin-vue_export-helper-BCo6x5W8.js","/web-english/assets/LazyLoadComponent-Cp5nP-fj.css","/web-english/assets/VoiceSelector-NMc1IGA3.js","/web-english/assets/index-DmJNupMF.js","/web-english/assets/ui-vendor-D-J_fEQ5.js","/web-english/assets/index-Dhc0zPkL.css","/web-english/assets/voiceStore-o6lhlGgY.js","/web-english/assets/FlashcardHeader-DaSBgdW1.js","/web-english/assets/FlashcardProgress-CfPuRfGN.js","/web-english/assets/FlashcardDateFilter-DNXM8Kex.js","/web-english/assets/dateUtils-N7QR9R2r.js","/web-english/assets/FlashcardCard-Cfo8rR1t.js","/web-english/assets/topicUtils-CuplmVBM.js","/web-english/assets/FlashcardCard-DI7zdUD-.css","/web-english/assets/FlashcardQuiz-B0zkmjlz.js","/web-english/assets/FlashcardTyping-BRafBheI.js","/web-english/assets/FlashcardImage-DBpGX7ik.js","/web-english/assets/FlashcardControls-ChYxlCi4.js","/web-english/assets/PracticeTimer-BcChhRmH.js","/web-english/assets/PracticeTimer-BwvfjdoQ.css","/web-english/assets/ExitWarningModal-DHw7ltby.js","/web-english/assets/CompletionModal-COwK3XxI.js","/web-english/assets/CompletionModal-Cv886SUp.css","/web-english/assets/HistoryModal-CndR4AwL.js","/web-english/assets/SessionDetailModal-BmY9V5aJ.js","/web-english/assets/SettingsModal-ClAB3zbx.js","/web-english/assets/useVocabularyStore-CJz0zgKu.js","/web-english/assets/PronunciationMode-Bsyq0FEk.js","/web-english/assets/ListeningMode-DjDz6J6p.js","/web-english/assets/ListeningMode-DsOsorkT.css","/web-english/assets/PracticeStats-DYBEt1Eq.js","/web-english/assets/FlashcardEmptyState-DE5uGVi1.js","/web-english/assets/PictionaryMode-ByGj_M7u.js","/web-english/assets/PictionaryMode-06apVjv3.css","/web-english/assets/FlipTileMode-Dd3o-He8.js","/web-english/assets/FlipTileMode-Clp79rex.css","/web-english/assets/BubbleShooterMode-CvfcxyNa.js","/web-english/assets/useAudioSystem-zpNfV08l.js","/web-english/assets/BubbleShooterMode-CC0advGT.css","/web-english/assets/SnakeGameMode-CBANmI2i.js","/web-english/assets/SnakeGameMode-CJm5KjVO.css","/web-english/assets/ConfirmToast-Kx7tg3SX.js"])))=>i.map(i=>d[i]);
import{_ as e,u as a}from"./index-DmJNupMF.js";import{N as t,V as r,A as l,D as i,C as n,I as o,d as s,J as u,l as d,c,v,Z as m,y as p,f as g,u as w,w as h,e as f,b as y,F as b,t as A}from"./vue-vendor-Bt65BSdi.js";import{u as S,a as C}from"./ui-vendor-D-J_fEQ5.js";import{u as _}from"./useVocabularyStore-CJz0zgKu.js";import{a as z}from"./dateUtils-N7QR9R2r.js";import{u as k}from"./voiceStore-o6lhlGgY.js";import{u as T}from"./useFlashcardHistory--VfpBBh-.js";import{a as x}from"./topicUtils-CuplmVBM.js";import{_ as E}from"./_plugin-vue_export-helper-BCo6x5W8.js";const D=t(()=>e(()=>import("./LazyLoadComponent-BObhRYWc.js"),__vite__mapDeps([0,1,2,3]),import.meta.url)),M=t(()=>e(()=>import("./VoiceSelector-NMc1IGA3.js"),__vite__mapDeps([4,5,1,6,7,8]),import.meta.url)),I=t(()=>e(()=>import("./FlashcardHeader-DaSBgdW1.js"),__vite__mapDeps([9,1,6]),import.meta.url)),Q=t(()=>e(()=>import("./FlashcardProgress-CfPuRfGN.js"),__vite__mapDeps([10,1]),import.meta.url)),L=t(()=>e(()=>import("./FlashcardDateFilter-DNXM8Kex.js"),__vite__mapDeps([11,1,6,12]),import.meta.url)),P=t(()=>e(()=>import("./FlashcardCard-Cfo8rR1t.js"),__vite__mapDeps([13,5,1,6,7,14,8,2,15]),import.meta.url)),F=t(()=>e(()=>import("./FlashcardQuiz-B0zkmjlz.js"),__vite__mapDeps([16,5,1,6,7,14]),import.meta.url)),O=t(()=>e(()=>import("./FlashcardTyping-BRafBheI.js"),__vite__mapDeps([17,5,1,6,7,14]),import.meta.url)),q=t(()=>e(()=>import("./FlashcardImage-DBpGX7ik.js"),__vite__mapDeps([18,5,1,6,7,14]),import.meta.url)),R=t(()=>e(()=>import("./FlashcardControls-ChYxlCi4.js"),__vite__mapDeps([19,6,1]),import.meta.url)),V=t(()=>e(()=>import("./PracticeTimer-BcChhRmH.js"),__vite__mapDeps([20,6,1,2,21]),import.meta.url)),j=t(()=>e(()=>import("./ExitWarningModal-DHw7ltby.js"),__vite__mapDeps([22,6,1]),import.meta.url)),U=t(()=>e(()=>import("./CompletionModal-COwK3XxI.js"),__vite__mapDeps([23,1,6,2,24]),import.meta.url)),B=t(()=>e(()=>import("./HistoryModal-CndR4AwL.js"),__vite__mapDeps([25,1,6]),import.meta.url)),G=t(()=>e(()=>import("./SessionDetailModal-BmY9V5aJ.js"),__vite__mapDeps([26,5,1,6,7]),import.meta.url)),H=t(()=>e(()=>import("./SettingsModal-ClAB3zbx.js"),__vite__mapDeps([27,1,6,28,14]),import.meta.url)),W=t(()=>e(()=>import("./PronunciationMode-Bsyq0FEk.js"),__vite__mapDeps([29,5,1,6,7]),import.meta.url)),N=t(()=>e(()=>import("./ListeningMode-DjDz6J6p.js"),__vite__mapDeps([30,5,1,6,7,2,31]),import.meta.url)),J=t(()=>e(()=>import("./PracticeStats-DYBEt1Eq.js"),__vite__mapDeps([32,6,1]),import.meta.url)),$=t(()=>e(()=>import("./FlashcardEmptyState-DE5uGVi1.js"),__vite__mapDeps([33,6,1]),import.meta.url)),K=t(()=>e(()=>import("./PictionaryMode-ByGj_M7u.js"),__vite__mapDeps([34,5,1,6,7,8,2,35]),import.meta.url)),X=t(()=>e(()=>import("./FlipTileMode-Dd3o-He8.js"),__vite__mapDeps([36,5,1,6,7,8,2,37]),import.meta.url)),Z=t(()=>e(()=>import("./BubbleShooterMode-CvfcxyNa.js"),__vite__mapDeps([38,1,6,8,39,2,40]),import.meta.url)),Y=t(()=>e(()=>import("./SnakeGameMode-CBANmI2i.js"),__vite__mapDeps([41,1,6,8,2,42]),import.meta.url));function ee(e){const a=r(),t="flashcard-practice-mode",o=()=>{try{const e=localStorage.getItem(t);if(e&&["flashcard","quiz","typing","image","listening","pronunciation","pictionary","flip-tile","bubble-shooter","snake-game"].includes(e))return e}catch(e){console.error("Error loading practice mode from localStorage:",e)}return"flashcard"},s=l(0),u=l(!1),d=l(o()),c=l(!1),v=l(!1),m=l(!1),p=l({cardCount:20,difficulty:"all",autoFlip:!1,flipDelay:3,showDefinition:!0,showExample:!0,showPronunciation:!0,shuffleCards:!1,voiceType:"female",practiceMode:o()}),g=l({easy:0,difficult:0,reviewed:0,correct:0,incorrect:0,total:0,startTime:new Date,endTime:null,mode:"flashcard"});g.value.mode=d.value,i(d,e=>{g.value.mode=e});const w=n(()=>0===e.value.length?null:e.value[s.value]),h=()=>{s.value<e.value.length-1?(s.value++,y()):b()},f=()=>{u.value=!u.value},y=()=>{u.value=!1},b=()=>{m.value=!0,g.value.endTime=new Date,v.value=!0};let A=null;i([s,u],()=>{A&&clearTimeout(A),p.value.autoFlip&&!u.value&&(A=window.setTimeout(()=>{u.value||f()},1e3*p.value.flipDelay))});return{currentIndex:s,isFlipped:u,practiceMode:d,showSettings:c,showCompletionModal:v,isCompleted:m,settings:p,stats:g,flashcards:e,currentCard:w,nextCard:h,previousCard:()=>{s.value>0&&(s.value--,y())},flipCard:f,resetCurrentCard:y,completeSession:b,restartSession:()=>{s.value=0,m.value=!1,v.value=!1,g.value={easy:0,difficult:0,reviewed:0,correct:0,incorrect:0,total:0,startTime:new Date,endTime:null,mode:d.value},y()},changePracticeMode:e=>{d.value=e,p.value.practiceMode=e,(e=>{try{localStorage.setItem(t,e)}catch(a){console.error("Error saving practice mode to localStorage:",a)}})(e),y()},applySettings:()=>{c.value=!1},goBack:()=>{a.push("/")},goToVocabulary:()=>{a.push("/practice/flashcard")},markEasy:()=>{h()},markDifficult:()=>{h()},cleanup:()=>{A&&clearTimeout(A)}}}function ae(){const e=l(!1),a={cardCount:20,difficulty:"all",autoFlip:!1,flipDelay:3,showDefinition:!0,showExample:!0,showPronunciation:!0,shuffleCards:!1,voiceType:"female",practiceMode:"flashcard",category:"",level:"",useFlipTileHints:!0},t=l({...a}),r=l({...a}),n=()=>{localStorage.setItem("flashcard-settings",JSON.stringify(t.value))},s=()=>({beginner:{...a,cardCount:10,difficulty:"easy",autoFlip:!0,flipDelay:5,showDefinition:!0,showExample:!0,showPronunciation:!0},intermediate:{...a,cardCount:20,difficulty:"medium",autoFlip:!1,showDefinition:!0,showExample:!0,showPronunciation:!1},advanced:{...a,cardCount:50,difficulty:"hard",autoFlip:!1,showDefinition:!1,showExample:!1,showPronunciation:!1}});return i(t,()=>{n()},{deep:!0}),o(()=>{(()=>{const e=localStorage.getItem("flashcard-settings");if(e)try{const l=JSON.parse(e);t.value={...a,...l},r.value={...t.value}}catch(l){console.error("Error loading settings:",l),t.value={...a},r.value={...a}}})()}),{showSettings:e,settings:t,localSettings:r,applySettings:()=>{t.value={...r.value},n(),e.value=!1},resetSettings:()=>{t.value={...a},r.value={...a},n()},cancelSettings:()=>{r.value={...t.value},e.value=!1},openSettings:()=>{r.value={...t.value},e.value=!0},validateSettings:e=>{const a=[];return(e.cardCount<1||e.cardCount>100)&&a.push("Số lượng thẻ phải từ 1 đến 100"),(e.flipDelay<1||e.flipDelay>10)&&a.push("Thời gian lật thẻ phải từ 1 đến 10 giây"),a},getDifficultyLevels:()=>[{value:"all",label:"Tất cả"},{value:"easy",label:"Dễ"},{value:"medium",label:"Trung bình"},{value:"hard",label:"Khó"}],getFlipDelayOptions:()=>[{value:1,label:"1 giây"},{value:2,label:"2 giây"},{value:3,label:"3 giây"},{value:4,label:"4 giây"},{value:5,label:"5 giây"},{value:10,label:"10 giây"}],getCardCountOptions:()=>[{value:10,label:"10 thẻ"},{value:20,label:"20 thẻ"},{value:30,label:"30 thẻ"},{value:50,label:"50 thẻ"},{value:100,label:"100 thẻ"}],getVoiceTypeOptions:()=>[{value:"female",label:"Giọng nữ",icon:"👩"},{value:"male",label:"Giọng nam",icon:"👨"}],getSettingsPresets:s,applyPreset:e=>{const a=s();r.value={...a[e]}}}}const te=e=>`flashcard-session-details:${e}`;const re={class:"min-h-screen overflow-x-hidden bg-gradient-to-br from-blue-50 to-indigo-100 dark:from-dark-bg-soft dark:to-dark-bg-mute relative"},le={class:"max-w-4xl mx-auto px-3 sm:px-4 md:px-6 py-2 sm:py-3 md:py-4"},ie={class:"group bg-white/80 dark:bg-dark-bg-soft/80 backdrop-blur-md rounded-2xl shadow-xl hover:shadow-2xl border border-white/20 dark:border-dark-bg-mute transition-all duration-500 hover:scale-[1.01] hover:-translate-y-0.5 p-3 sm:p-4 md:p-5"},ne={class:"max-w-4xl mx-auto px-3 sm:px-4 md:px-6 py-2 sm:py-3 md:py-4"},oe={class:"group relative overflow-visible bg-white/80 dark:bg-dark-bg-soft/80 backdrop-blur-md rounded-2xl shadow-xl hover:shadow-2xl border border-white/20 dark:border-dark-bg-mute transition-all duration-500 hover:scale-[1.01] hover:-translate-y-0.5 p-3 sm:p-4 md:p-5"},se={class:"max-w-4xl mx-auto px-3 sm:px-4 md:px-6 py-4 sm:py-6 md:py-8"},ue={key:0,class:"relative"},de={class:"group relative overflow-hidden bg-white/80 dark:bg-dark-bg-soft/80 backdrop-blur-md rounded-2xl shadow-xl hover:shadow-2xl border border-white/20 dark:border-dark-bg-mute transition-all duration-500 p-3 sm:p-4 md:p-6"},ce={class:"space-y-4 sm:space-y-5 md:space-y-6"},ve={class:"flex justify-center max-w-md mx-auto"},me={key:0},pe="flashcard-date-filter",ge=E(s({components:{LazyLoadComponent:D,VoiceSelector:M,FlashcardHeader:I,FlashcardProgress:Q,FlashcardDateFilter:L,FlashcardCard:P,FlashcardQuiz:F,FlashcardTyping:O,FlashcardImage:q,FlashcardControls:R,PracticeTimer:V,ExitWarningModal:j,CompletionModal:U,HistoryModal:B,SessionDetailModal:G,SettingsModal:H,PronunciationMode:W,ListeningMode:N,PracticeStats:J,FlashcardEmptyState:$,PictionaryMode:K,FlipTileMode:X,BubbleShooterMode:Z,SnakeGameMode:Y},__name:"FlashcardView",setup(s){const E=t(()=>e(()=>import("./ConfirmToast-Kx7tg3SX.js"),__vite__mapDeps([43,1]),import.meta.url)),{t:D}=S(),M=r(),I=C(),{allVocabularies:Q}=_(),L=a(),{startSessionDetails:P,appendAnswer:F,loadDetails:O}=function(){const e=l(null),a=l("");return{currentSessionId:e,currentMode:a,startSessionDetails:(t,r)=>{e.value=t,a.value=r;const l={sessionId:t,mode:r,total:0,correct:0,incorrect:0,entries:[]};try{localStorage.setItem(te(t),JSON.stringify(l))}catch{}},appendAnswer:t=>{if(!e.value)return;const r=te(e.value);let l=null;try{const e=localStorage.getItem(r);l=e?JSON.parse(e):null}catch{}l||(l={sessionId:e.value,mode:a.value,total:0,correct:0,incorrect:0,entries:[]});const i={...t,timestamp:t.timestamp||(new Date).toISOString()};l.entries.push(i),l.total+=1,i.isCorrect?l.correct+=1:l.incorrect+=1;try{localStorage.setItem(r,JSON.stringify(l))}catch{}},loadDetails:e=>{try{const a=localStorage.getItem(te(e));return a?JSON.parse(a):null}catch{return null}},clearDetails:e=>{try{localStorage.removeItem(te(e))}catch{}}}}(),q=l(null),R=l(!1),V=l(null),j=l(null),U=e=>{j.value=e},B=e=>{const a=O(e);V.value=a,R.value=!0},G=e=>{const a=I({component:E,props:{message:D("flashcard.history.confirmDelete.message","Are you sure you want to delete this practice session? This action cannot be undone."),confirmText:D("flashcard.history.confirmDelete.confirm","Delete"),cancelText:D("flashcard.history.confirmDelete.cancel","Cancel"),onConfirm:()=>{Je(e),I.success(D("flashcard.history.confirmDelete.success","Session deleted successfully")),I.dismiss(a)},onCancel:()=>{I.dismiss(a)}}},{timeout:0,closeOnClick:!1,showCloseButtonOnHover:!1,hideProgressBar:!0})},H=()=>{try{const e={selectedDate:J.value};localStorage.setItem(pe,JSON.stringify(e))}catch(e){console.error("Error saving date filter state:",e)}},W=(()=>{try{const e=localStorage.getItem(pe);if(e){return{selectedDate:JSON.parse(e).selectedDate||""}}}catch(e){console.error("Error loading date filter state:",e)}return{selectedDate:""}})(),N=l(!0),J=l(W.selectedDate);i(J,()=>{H()});const $=l(!1),K=l(!1),X=l(!1),Z=l(!1),Y=l(!1);$.value=(()=>{try{const e=localStorage.getItem("pe_bubbleShooterVietnameseMode");return null!==e&&"true"===e}catch{return!1}})(),K.value=(()=>{try{const e=localStorage.getItem("pe_snakeDoubleBaitMode");return null!==e&&"true"===e}catch{return!1}})(),X.value=(()=>{try{const e=localStorage.getItem("pe_pictionaryDefinitionMode");return null!==e&&"true"===e}catch{return!1}})(),Z.value=(()=>{try{const e=localStorage.getItem("pe_scrambleWordsEnabled");return null!==e&&"true"===e}catch{return!1}})(),Y.value=(()=>{try{const e=localStorage.getItem("pe_wordsCrushEnabled");return null!==e&&"true"===e}catch{return!1}})(),i($,e=>{(e=>{try{localStorage.setItem("pe_bubbleShooterVietnameseMode",String(e))}catch{}})(e)}),i(K,e=>{(e=>{try{localStorage.setItem("pe_snakeDoubleBaitMode",String(e))}catch{}})(e)}),i(X,e=>{(e=>{try{localStorage.setItem("pe_pictionaryDefinitionMode",String(e))}catch{}})(e)}),i(Z,e=>{(e=>{try{localStorage.setItem("pe_scrambleWordsEnabled",String(e))}catch{}})(e)}),i(Y,e=>{(e=>{try{localStorage.setItem("pe_wordsCrushEnabled",String(e))}catch{}})(e)});const{showSettings:ge,settings:we,localSettings:he,applySettings:fe,cancelSettings:ye}=ae(),be=n(()=>{let e=Q.value;return J.value&&(e=e.filter(e=>z(e.createdAt)===J.value)),we.value.category&&(e=e.filter(e=>e.category===we.value.category)),e}),Ae=n(()=>be.value.filter(e=>{const a=we.value.category,t=we.value.difficulty,r=!a||e.category===a,l=!t||"all"===t||e.level===t;return r&&l})),Se=n(()=>{const e=Ae.value;return 0!==e.length&&e.every(e=>{const a=e.image;if(null==a)return!1;return("string"==typeof a?a:String(a)).trim().length>0})}),Ce=n(()=>{const e=Ae.value;return 0!==e.length&&e.every(e=>{const a=e.image;if(null==a)return!1;return("string"==typeof a?a:String(a)).trim().length>0})}),_e=n(()=>{const e=Ae.value;return 0!==e.length&&e.every(e=>{const a=e.image;if(null==a)return!1;return("string"==typeof a?a:String(a)).trim().length>0})}),ze=n(()=>{if(!J.value)return be.value.length<=8;return Q.value.filter(e=>z(e.createdAt)===J.value).length<=8}),ke=l(!1),Te=l(),xe=l(!1),Ee=l(!1),De=()=>{ke.value=!0,console.log("Practice started!"),q.value=`${Date.now()}`,P(q.value,Xe.value)},Me=()=>{ke.value&&!Ee.value?xe.value=!0:M.push("/practice/flashcard")},Ie=()=>{console.log("Time out for current card!")},Qe=()=>{console.log("Timer restarted: restarting from the first card"),ke.value=!0,we.value.shuffleCards&&Ae.value.length>0&&ha(),ft.value={},$e.value=0,xt(),Te.value&&Te.value.startTimer()},Le=()=>{console.log("Skip current card"),ke.value=!1,Te.value&&Te.value.resetPractice(),ia(),M.push("/practice/flashcard")},Pe=()=>{xe.value=!1},Fe=()=>{Ee.value=!0,xe.value=!1,ke.value=!1,Te.value&&Te.value.resetPractice(),qe(),M.push("/practice/flashcard")};let Oe=null;const qe=()=>{Oe&&(Oe(),Oe=null)},Re=()=>{ja(),ca(Va.value),ke.value&&"undefined"!=typeof window&&window.innerWidth<768&&setTimeout(()=>{Dt()},2100)},Ve=e=>{if(ke.value&&!Ee.value)return e.preventDefault(),e.returnValue="",""},{showHistory:je,practiceHistory:Ue,saveSessionToHistory:Be,getModeColor:Ge,getModeText:He,formatDate:We,formatDuration:Ne,deleteSession:Je}=T(),{currentIndex:$e,isFlipped:Ke,practiceMode:Xe,showCompletionModal:Ze,settings:Ye,stats:ea,flashcards:aa,nextCard:ta,flipCard:ra,completeSession:la,restartSession:ia,changePracticeMode:na,goBack:oa,goToVocabulary:sa,cleanup:ua}=ee(Ae);i(Se,e=>{if("image"===Xe.value&&!e){if(ke.value)return void console.log("[Flashcard] Image mode became unavailable but practice is active; not switching mode.");console.log("[Flashcard] Image mode unavailable for current filter; switching to flashcard mode."),na("flashcard")}},{immediate:!0}),i(Ce,e=>{if("pictionary"===Xe.value&&!e){if(ke.value)return void console.log("[Flashcard] Pictionary mode became unavailable but practice is active; not switching mode.");console.log("[Flashcard] Pictionary mode unavailable for current filter; switching to flashcard mode."),na("flashcard")}},{immediate:!0});const{initializeStats:da,recordAnswer:ca}=function(e){const a=l({totalCards:0,currentCard:0,correctAnswers:0,incorrectAnswers:0,accuracy:0,streak:0,maxStreak:0,timeSpent:0,averageTimePerCard:0,score:0}),t=l(0),r=l(0),i=l(null),o=l([]),s=()=>{e.value.reviewed++,a.value.currentCard++,i.value=new Date},u=n(()=>{const e=a.value.accuracy;return e>=90?{level:"Xuất sắc",color:"text-green-600 dark:text-green-400"}:e>=80?{level:"Tốt",color:"text-blue-600 dark:text-blue-400"}:e>=70?{level:"Khá",color:"text-yellow-600 dark:text-yellow-400"}:e>=60?{level:"Trung bình",color:"text-orange-600 dark:text-orange-400"}:{level:"Cần cải thiện",color:"text-red-600 dark:text-red-400"}}),d=n(()=>{const e=t.value;return 0===e?"":e<3?"Bắt đầu tốt!":e<5?"Đang tiến bộ!":e<10?"Tuyệt vời!":"Xuất sắc!"}),c=n(()=>{const e=a.value.averageTimePerCard/1e3;return 0===e?{rating:"",color:""}:e<2?{rating:"Rất nhanh",color:"text-green-600 dark:text-green-400"}:e<4?{rating:"Nhanh",color:"text-blue-600 dark:text-blue-400"}:e<6?{rating:"Trung bình",color:"text-yellow-600 dark:text-yellow-400"}:e<10?{rating:"Chậm",color:"text-orange-600 dark:text-orange-400"}:{rating:"Rất chậm",color:"text-red-600 dark:text-red-400"}}),v=e=>{const a=Math.floor(e/1e3),t=Math.floor(a/60),r=a%60;return t>0?`${t}:${r.toString().padStart(2,"0")}`:`${r}s`},m=n(()=>({...a.value,performanceLevel:u.value,streakMessage:d.value,speedRating:c.value,timeSpentFormatted:v(a.value.timeSpent),averageTimeFormatted:v(a.value.averageTimePerCard),completion:a.value.totalCards>0?Math.round(a.value.currentCard/a.value.totalCards*100):0}));return{sessionStats:a,currentStreak:t,maxStreak:r,initializeStats:e=>{a.value={totalCards:e,currentCard:0,correctAnswers:0,incorrectAnswers:0,accuracy:0,streak:0,maxStreak:0,timeSpent:0,averageTimePerCard:0,score:0},t.value=0,r.value=0,o.value=[],i.value=new Date},recordAnswer:l=>{if(l?(a.value.correctAnswers++,e.value.correct++,t.value++,t.value>r.value&&(r.value=t.value)):(a.value.incorrectAnswers++,e.value.incorrect++,t.value=0),e.value.total++,i.value){const e=(new Date).getTime()-i.value.getTime();o.value.push(e),i.value=new Date}s()},nextCardStats:s,getPerformanceLevel:u,getStreakMessage:d,getSpeedRating:c,formatTime:v,getDetailedStats:m}}(ea),va=n(()=>we.value.shuffleCards&&wa.value.length>0?wa.value:Ae.value),ma=n(()=>0===va.value.length?null:va.value[$e.value]),pa=n(()=>0===va.value.length||"number"!=typeof $e.value||isNaN($e.value)?0:$e.value>=va.value.length?100:($e.value+1)/va.value.length*100),ga=n(()=>we.value.shuffleCards),wa=l([]),ha=(e=Ae.value)=>{const a=[...e];for(let t=a.length-1;t>0;t--){const e=Math.floor(Math.random()*(t+1));[a[t],a[e]]=[a[e],a[t]]}wa.value=a},{quizOptions:fa,selectedAnswer:ya,quizAnswered:ba,generateQuizOptions:Aa,selectQuizAnswer:Sa,typingAnswer:Ca,typingAnswered:_a,typingCorrect:za,checkTypingAnswer:ka,typingQuizEnabled:Ta,typingQuizOptions:xa,typingQuizSelected:Ea,typingQuizAnswered:Da,generateTypingQuizOptions:Ma,selectTypingQuizAnswer:Ia,listeningAnswer:Qa,listeningAnswered:La,listeningCorrect:Pa,checkListeningAnswer:Fa,playAudio:Oa,imageAnswer:qa,imageAnswered:Ra,imageCorrect:Va,checkImageAnswer:ja,resetImageMode:Ua,pictionaryAnswer:Ba,pictionaryAnswered:Ga,pictionaryCorrect:Ha,checkPictionaryAnswer:Wa,flipTileAnswer:Na,flipTileAnswered:Ja,flipTileCorrect:$a,checkFlipTileAnswer:Ka,imageQuizEnabled:Xa,imageQuizOptions:Za,imageQuizSelected:Ya,imageQuizAnswered:et,generateImageQuizOptions:at,selectImageQuizAnswer:tt,resetAllModes:rt,getCanProceed:lt,getShortMeaning:it,isRecording:nt,pronunciationResult:ot,pronunciationAnswered:st,pronunciationCorrect:ut,isSpeechRecognitionSupported:dt,startRecording:ct,listeningQuizEnabled:vt,listeningQuizOptions:mt,listeningQuizSelected:pt,listeningQuizAnswered:gt,generateListeningQuizOptions:wt,selectListeningQuizAnswer:ht}=function(e,a,t){const{playAudio:r}=k(),n=l([]),o=l(""),s=l(!1),u=l(""),d=l(!1),c=l(!1),v=l(!1),m=l([]),p=l(""),g=l(!1),w=l(""),h=l(!1),f=l(!1),y=l(!1),b=l([]),A=l(""),S=l(!1),C=l(""),_=l(!1),z=l(!1),T=l(!1),x=l([]),E=l(""),D=l(!1),M=l(""),I=l(!1),Q=l(!1),L=l(""),P=l(!1),F=l(!1),O=l(!1),q="pe_imageQuizEnabled",R="pe_listeningQuizEnabled",V="pe_typingQuizEnabled",j="pe_bubbleShooterVietnameseMode",U="pe_imageQuiz_correct_pos",B="pe_listeningQuiz_correct_pos",G="pe_typingQuiz_correct_pos",H=(e,a=!1)=>{try{const t=localStorage.getItem(e);return null===t?a:"true"===t}catch{return a}};T.value=H(q,!1),y.value=H(R,!1),v.value=H(V,!1),O.value=H(j,!1);const W=(e,a)=>{try{localStorage.setItem(e,String(a))}catch{}},N=(e,a=0)=>{try{const t=localStorage.getItem(e),r=null===t?a:Number(t);return Number.isFinite(r)&&r>=0?r:a}catch{return a}},J=(e,a)=>{try{localStorage.setItem(e,String(a))}catch{}};i(T,e=>W(q,e)),i(y,e=>W(R,e)),i(v,e=>W(V,e)),i(O,e=>W(j,e));const $=l(N(U,Math.floor(4*Math.random()))),K=l(N(B,Math.floor(4*Math.random()))),X=l(N(G,Math.floor(4*Math.random())));i($,e=>J(U,e)),i(K,e=>J(B,e)),i(X,e=>J(G,e));const Z=(e,a,t)=>{const r=new Array(4),l=t.value%4;r[l]=e;const i=[...a].sort(()=>Math.random()-.5);let n=0;for(let o=0;o<4;o++)o!==l&&(r[o]=i[n++]??"");return t.value=(t.value+1)%4,r},Y=l(!1),ee=l(""),ae=l(!1),te=l(!1);let re=null;const le=window.SpeechRecognition||window.webkitSpeechRecognition,ie=!!le;ie&&(re=new le,re.continuous=!1,re.lang="en-US",re.interimResults=!1,re.maxAlternatives=1,re.onresult=e=>{const a=e.results[0][0].transcript;ee.value=a,ne(a)},re.onerror=e=>{console.error("Speech recognition error",e.error),Y.value=!1},re.onend=()=>{Y.value=!1});const ne=a=>{if(!e.value)return!1;ae.value=!0;const t=a.toLowerCase().trim().replace(/[.,/#!$%^&*;:{}=\-_`~()]/g,""),r=e.value.word.toLowerCase().trim().replace(/[.,/#!$%^&*;:{}=\-_`~()]/g,"");return te.value=t===r,te.value,te.value},oe=()=>{n.value=[],o.value="",s.value=!1},se=()=>{u.value="",d.value=!1,c.value=!1,m.value=[],p.value="",g.value=!1},ue=()=>{w.value="",h.value=!1,f.value=!1,b.value=[],A.value="",S.value=!1},de=()=>{C.value="",_.value=!1,z.value=!1,x.value=[],E.value="",D.value=!1},ce=()=>{M.value="",I.value=!1,Q.value=!1},ve=()=>{L.value="",P.value=!1,F.value=!1},me=()=>{re&&Y.value&&re.stop(),Y.value=!1,ee.value="",ae.value=!1,te.value=!1},pe=e=>e.split(" - ")[0].trim();return{quizOptions:n,selectedAnswer:o,quizAnswered:s,generateQuizOptions:()=>{if(!e.value)return;const a=pe(e.value.meaning),r=t.value.filter(a=>a.id!==e.value?.id).map(e=>pe(e.meaning)).filter(e=>e!==a).sort(()=>Math.random()-.5).slice(0,3),l=r.length>=3?r.slice(0,3):r;n.value=[a,...l].sort(()=>Math.random()-.5)},selectQuizAnswer:a=>{if(!s.value)return o.value=a,s.value=!0,a===(e.value?pe(e.value.meaning):"")},resetQuizMode:oe,typingAnswer:u,typingAnswered:d,typingCorrect:c,checkTypingAnswer:()=>{if(!e.value||d.value)return;d.value=!0;const a=u.value.toLowerCase().trim(),t=e.value.word.toLowerCase().trim();return c.value=a===t,c.value,c.value},resetTypingMode:se,typingQuizEnabled:v,typingQuizOptions:m,typingQuizSelected:p,typingQuizAnswered:g,generateTypingQuizOptions:()=>{if(!e.value)return;const a=e.value.word.trim(),r=t.value.filter(a=>a.id!==e.value?.id).map(e=>e.word.trim()).filter(e=>e.toLowerCase()!==a.toLowerCase()).sort(()=>Math.random()-.5).slice(0,3),l=r.length>=3?r.slice(0,3):r,i=[...new Set(l)];for(;i.length<3;)i.push("");m.value=Z(a,i,X)},selectTypingQuizAnswer:a=>{if(g.value)return;p.value=a,g.value=!0;const t=e.value?e.value.word.trim().toLowerCase():"",r=a.trim().toLowerCase()===t;return d.value=!0,c.value=r,r},listeningAnswer:w,listeningAnswered:h,listeningCorrect:f,checkListeningAnswer:()=>{if(!e.value||h.value)return;h.value=!0;const a=w.value.toLowerCase().trim(),t=e.value.word.toLowerCase().trim();return f.value=a===t,f.value,f.value},playAudio:async()=>{if(e.value)try{await r(e.value.word)}catch(a){console.error("Error playing audio:",a);const t=new SpeechSynthesisUtterance(e.value.word);t.lang="en-US",t.rate=.8,speechSynthesis.speak(t)}},resetListeningMode:ue,listeningQuizEnabled:y,listeningQuizOptions:b,listeningQuizSelected:A,listeningQuizAnswered:S,generateListeningQuizOptions:()=>{if(!e.value)return;const a=e.value.word.trim(),r=t.value.filter(a=>a.id!==e.value?.id).map(e=>e.word.trim()).filter(e=>e.toLowerCase()!==a.toLowerCase()).sort(()=>Math.random()-.5).slice(0,3),l=r.length>=3?r.slice(0,3):r,i=[...new Set(l)];for(;i.length<3;)i.push("");b.value=Z(a,i,K)},selectListeningQuizAnswer:a=>{if(S.value)return;A.value=a,S.value=!0;const t=e.value?e.value.word.trim().toLowerCase():"",r=a.trim().toLowerCase()===t;return h.value=!0,f.value=r,r},imageAnswer:C,imageAnswered:_,imageCorrect:z,checkImageAnswer:()=>{if(!e.value||_.value)return;_.value=!0;const a=C.value.toLowerCase().trim(),t=e.value.word.toLowerCase().trim();return z.value=a===t,z.value,z.value},resetImageMode:de,imageQuizEnabled:T,imageQuizOptions:x,imageQuizSelected:E,imageQuizAnswered:D,generateImageQuizOptions:()=>{if(!e.value)return;const a=e.value.word.trim(),r=t.value.filter(a=>a.id!==e.value?.id).map(e=>e.word.trim()).filter(e=>e.toLowerCase()!==a.toLowerCase()).sort(()=>Math.random()-.5).slice(0,3),l=r.length>=3?r.slice(0,3):r,i=[...new Set(l)];for(;i.length<3;)i.push("");x.value=Z(a,i,$)},selectImageQuizAnswer:a=>{if(D.value)return;E.value=a,D.value=!0;const t=e.value?e.value.word.trim().toLowerCase():"",r=a.trim().toLowerCase()===t;return _.value=!0,z.value=r,r},pictionaryAnswer:M,pictionaryAnswered:I,pictionaryCorrect:Q,checkPictionaryAnswer:()=>{if(!e.value||I.value)return;I.value=!0;const a=M.value.toLowerCase().trim(),t=e.value.word.toLowerCase().trim();return Q.value=a===t,Q.value,Q.value},resetPictionaryMode:ce,flipTileAnswer:L,flipTileAnswered:P,flipTileCorrect:F,checkFlipTileAnswer:()=>{if(!e.value||P.value)return;P.value=!0;const a=L.value.toLowerCase().trim(),t=e.value.word.toLowerCase().trim();return F.value=a===t,F.value,F.value},resetFlipTileMode:ve,bubbleShooterVietnameseMode:O,isRecording:Y,pronunciationResult:ee,pronunciationAnswered:ae,pronunciationCorrect:te,isSpeechRecognitionSupported:ie,startRecording:()=>{!Y.value&&ie&&(ee.value="",ae.value=!1,te.value=!1,Y.value=!0,re.start())},resetPronunciationMode:me,resetAllModes:()=>{oe(),se(),ue(),de(),me(),ce(),ve()},getCanProceed:()=>({flashcard:!0,quiz:s.value,typing:d.value,listening:h.value,image:_.value,pronunciation:ae.value,pictionary:I.value,"flip-tile":P.value,"snake-game":!0,"bubble-shooter":!0}),getShortMeaning:pe}}(ma,0,Q),ft=l({}),yt=()=>{if(!ma.value)return;const e=ma.value.id;ft.value[e]={quizAnswer:ya.value,quizAnswered:ba.value,quizOptions:fa.value,typingAnswer:Ca.value||void 0,typingAnswered:_a.value||void 0,typingCorrect:za.value||void 0,typingQuizOptions:xa.value||void 0,typingQuizSelected:Ea.value||void 0,typingQuizAnswered:Da.value||void 0,listeningAnswer:Qa.value||void 0,listeningAnswered:La.value||void 0,listeningCorrect:Pa.value||void 0,listeningQuizOptions:mt.value||void 0,listeningQuizSelected:pt.value||void 0,listeningQuizAnswered:gt.value||void 0,imageAnswer:qa.value||void 0,imageAnswered:Ra.value||void 0,imageCorrect:Va.value||void 0,imageQuizOptions:Za.value&&Za.value.length?Za.value:void 0,imageQuizSelected:Ya.value||void 0,imageQuizAnswered:et.value||void 0,pronunciationResult:ot.value||void 0,pronunciationAnswered:st.value||void 0,pronunciationCorrect:ut.value||void 0,pictionaryAnswer:Ba.value||void 0,pictionaryAnswered:Ga.value||void 0,pictionaryCorrect:Ha.value||void 0,flipTileAnswer:Na.value||void 0,flipTileAnswered:Ja.value||void 0,flipTileCorrect:$a.value||void 0}},bt=e=>{const a=Sa(e);ca(!!a),ma.value&&q.value&&F({cardId:ma.value.id,word:ma.value.word,meaningShort:it(ma.value.meaning),userAnswer:e,correctAnswer:it(ma.value.meaning),isCorrect:!!a,mode:"quiz"}),ke.value&&"undefined"!=typeof window&&window.innerWidth<768&&setTimeout(()=>{Dt()},2100)},At=()=>{ka(),ca(za.value),ma.value&&q.value&&F({cardId:ma.value.id,word:ma.value.word,meaningShort:it(ma.value.meaning),userAnswer:Ca.value,correctAnswer:ma.value.word,isCorrect:!!za.value,mode:"typing"}),ke.value&&"undefined"!=typeof window&&window.innerWidth<768&&setTimeout(()=>{Dt()},2100)},St=()=>{Fa(),ca(Pa.value),ma.value&&q.value&&F({cardId:ma.value.id,word:ma.value.word,meaningShort:it(ma.value.meaning),userAnswer:Qa.value,correctAnswer:ma.value.word,isCorrect:!!Pa.value,mode:"listening"}),ke.value&&"undefined"!=typeof window&&window.innerWidth<768&&setTimeout(()=>{Dt()},2100)},Ct=()=>{Ka(),ca($a.value),ma.value&&q.value&&F({cardId:ma.value.id,word:ma.value.word,meaningShort:it(ma.value.meaning),userAnswer:Na.value||"",correctAnswer:ma.value.word,isCorrect:!!$a.value,mode:"flip-tile"}),ke.value&&"undefined"!=typeof window&&window.innerWidth<768&&setTimeout(()=>{Dt()},2100)},_t=()=>{Wa(),ca(Ha.value),ma.value&&q.value&&(F({cardId:ma.value.id,word:ma.value.word,meaningShort:it(ma.value.meaning),userAnswer:Ba.value||"",correctAnswer:ma.value.word,isCorrect:!!Ha.value,mode:"pictionary",extra:{pictionary:{image:ma.value.image,slots:j.value?.slots||[]}}}),j.value=null),ke.value&&"undefined"!=typeof window&&window.innerWidth<768&&setTimeout(()=>{Dt()},2100)},zt=e=>{ca(e),ma.value&&q.value&&F({cardId:ma.value.id,word:ma.value.word,meaningShort:it(ma.value.meaning),userAnswer:"scrambled",correctAnswer:ma.value.word,isCorrect:e,mode:"scramble-words"})},kt=()=>{ca(!0),ma.value&&q.value&&F({cardId:ma.value.id,word:ma.value.word,meaningShort:it(ma.value.meaning),userAnswer:"completed",correctAnswer:ma.value.word,isCorrect:!0,mode:"bubble-shooter"}),Lt()},Tt=e=>{ca(e),ma.value&&q.value&&F({cardId:ma.value.id,word:ma.value.word,meaningShort:it(ma.value.meaning),userAnswer:e?ma.value.word:"incomplete",correctAnswer:ma.value.word,isCorrect:e,mode:"words-crush"}),st.value=!0,ut.value=e;window.innerWidth<768&&setTimeout(()=>{ta()},2e3)},xt=()=>{if(rt(),(()=>{if(!ma.value)return;const e=ma.value.id,a=ft.value[e];a&&(a.quizOptions&&(fa.value=a.quizOptions),void 0!==a.quizAnswer&&(ya.value=a.quizAnswer),void 0!==a.quizAnswered&&(ba.value=a.quizAnswered),void 0!==a.typingAnswer&&(Ca.value=a.typingAnswer),void 0!==a.typingAnswered&&(_a.value=a.typingAnswered),void 0!==a.typingCorrect&&(za.value=a.typingCorrect),void 0!==a.typingQuizOptions&&(xa.value=a.typingQuizOptions),void 0!==a.typingQuizSelected&&(Ea.value=a.typingQuizSelected),void 0!==a.typingQuizAnswered&&(Da.value=a.typingQuizAnswered),void 0!==a.listeningAnswer&&(Qa.value=a.listeningAnswer),void 0!==a.listeningAnswered&&(La.value=a.listeningAnswered),void 0!==a.listeningCorrect&&(Pa.value=a.listeningCorrect),void 0!==a.listeningQuizOptions&&(mt.value=a.listeningQuizOptions),void 0!==a.listeningQuizSelected&&(pt.value=a.listeningQuizSelected),void 0!==a.listeningQuizAnswered&&(gt.value=a.listeningQuizAnswered),void 0!==a.imageAnswer&&(qa.value=a.imageAnswer),void 0!==a.imageAnswered&&(Ra.value=a.imageAnswered),void 0!==a.imageCorrect&&(Va.value=a.imageCorrect),void 0!==a.imageQuizOptions&&(Za.value=a.imageQuizOptions),void 0!==a.imageQuizSelected&&(Ya.value=a.imageQuizSelected),void 0!==a.imageQuizAnswered&&(et.value=a.imageQuizAnswered),void 0!==a.pronunciationResult&&(ot.value=a.pronunciationResult),void 0!==a.pronunciationAnswered&&(st.value=a.pronunciationAnswered),void 0!==a.pronunciationCorrect&&(ut.value=a.pronunciationCorrect),void 0!==a.pictionaryAnswer&&(Ba.value=a.pictionaryAnswer),void 0!==a.pictionaryAnswered&&(Ga.value=a.pictionaryAnswered),void 0!==a.pictionaryCorrect&&(Ha.value=a.pictionaryCorrect),void 0!==a.flipTileAnswer&&(Na.value=a.flipTileAnswer),void 0!==a.flipTileAnswered&&(Ja.value=a.flipTileAnswered),void 0!==a.flipTileCorrect&&($a.value=a.flipTileCorrect))})(),"quiz"===Xe.value&&ma.value){const e=ma.value.id,a=ft.value[e];a&&void 0!==a.quizAnswer||Aa()}"image"===Xe.value&&Xa.value&&ma.value&&(Za.value&&0!==Za.value.length||at()),"typing"===Xe.value&&Ta.value&&ma.value&&(xa.value&&0!==xa.value.length||Ma()),"listening"===Xe.value&&vt.value&&ma.value&&(mt.value&&0!==mt.value.length||wt())},Et=()=>{we.value.shuffleCards=!we.value.shuffleCards,we.value.shuffleCards?ha():wa.value=[],ft.value={},$e.value=0,xt()},Dt=()=>{yt(),"pronunciation"===Xe.value&&st.value&&(ca(ut.value),ma.value&&q.value&&F({cardId:ma.value.id,word:ma.value.word,meaningShort:it(ma.value.meaning),userAnswer:ot.value,correctAnswer:ma.value.word,isCorrect:!!ut.value,mode:"pronunciation"})),$e.value<va.value.length-1?($e.value++,xt(),ke.value&&Te.value&&Te.value.nextCard()):Lt()},Mt=()=>{yt(),$e.value>0&&($e.value--,xt(),ke.value&&Te.value&&Te.value.stopTimer())},It=()=>{ca(!0),Dt()},Qt=()=>{ca(!1),Dt()},Lt=()=>{la();const e=va.value.length,a=Be(ea.value,e,q.value||void 0);q.value||(q.value=a)},Pt=()=>{ia(),ke.value=!1,ft.value={},L.setCompletionModal(!1),we.value.shuffleCards&&Ae.value.length>0&&ha(),xt(),Te.value&&Te.value.resetPractice()},Ft=()=>{L.setCompletionModal(!1),oa()},Ot=()=>{const e=va.value.length;ea.value.correct<e&&ca(!0),Lt()},qt=e=>{console.log("[DEBUG] Snake correct food eaten, recording answer true"),console.log("[DEBUG] Stats before:",{correct:ea.value.correct,incorrect:ea.value.incorrect,total:ea.value.total}),ca(!0),console.log("[DEBUG] Stats after:",{correct:ea.value.correct,incorrect:ea.value.incorrect,total:ea.value.total}),e&&q.value&&(console.log("[DEBUG] FlashcardView - Recording snake correct food:",e),console.log("[DEBUG] FlashcardView - Snake body to save:",e.snakeBody),console.log("[DEBUG] FlashcardView - Snake direction to save:",e.direction),F({cardId:Date.now(),word:e.word,meaningShort:e.meaningShort,userAnswer:e.word,correctAnswer:e.word,isCorrect:!0,mode:"snake-game",extra:{snakeGame:{position:e.position,wasCorrect:!0,foodType:"primary",snakeLength:e.snakeLength,gameScore:e.gameScore,wordsCompleted:e.wordsCompleted,wrongEatenCount:e.wrongEatenCount,snakeBody:e.snakeBody,direction:e.direction,timelineFrames:e.timelineFrames}}}))},Rt=e=>{ca(!1),e&&q.value&&F({cardId:Date.now(),word:e.word,meaningShort:e.meaningShort,userAnswer:e.word,correctAnswer:"",isCorrect:!1,mode:"snake-game",extra:{snakeGame:{position:e.position,wasCorrect:!1,foodType:"secondary",snakeLength:e.snakeLength,gameScore:e.gameScore,wordsCompleted:e.wordsCompleted,wrongEatenCount:e.wrongEatenCount,snakeBody:e.snakeBody,direction:e.direction,timelineFrames:e.timelineFrames}}})};let Vt=null;i([$e,Ke],()=>{Vt&&clearTimeout(Vt),we.value.autoFlip&&!Ke.value&&(Vt=setTimeout(()=>{Ke.value=!0},3e3))}),i(Xe,()=>{xt(),we.value.shuffleCards&&0===wa.value.length&&ha()}),i(Ze,e=>{e?(Te.value&&Te.value.stopTimer(),L.setCompletionModal(!0)):L.setCompletionModal(!1)}),i(je,e=>{e?document.body.classList.add("modal-open"):document.body.classList.remove("modal-open")}),i(R,e=>{e?document.body.classList.add("modal-open"):document.body.classList.remove("modal-open")}),i(ge,e=>{e?document.body.classList.add("modal-open"):document.body.classList.remove("modal-open")}),i(N,()=>{H()}),i(J,()=>{H()}),i(Ae,e=>{we.value.shuffleCards&&e.length>0?(ha(e),$e.value=0,xt()):we.value.shuffleCards&&0===e.length&&(wa.value=[],$e.value=0)},{immediate:!1});const jt=e=>{we.value.useFlipTileHints=e};return o(()=>{console.log("FlashcardView mounted"),da(va.value.length),"quiz"===Xe.value&&Aa(),we.value.shuffleCards&&ha(),Oe&&Oe(),Oe=M.beforeEach((e,a,t)=>{if(ke.value&&!Ee.value&&a.path.includes("/practice/flashcard"))return xe.value=!0,!1;t()}),window.addEventListener("beforeunload",Ve)}),u(()=>{document.body.classList.remove("modal-open"),ua(),qe(),window.removeEventListener("beforeunload",Ve)}),(e,a)=>{const t=d("FlashcardHeader"),r=d("FlashcardProgress"),l=d("LazyLoadComponent"),i=d("VoiceSelector"),n=d("FlashcardDateFilter"),o=d("PracticeTimer"),s=d("FlashcardCard"),u=d("PictionaryMode"),S=d("FlashcardQuiz"),C=d("FlashcardTyping"),_=d("FlashcardImage"),z=d("ListeningMode"),k=d("PronunciationMode"),T=d("BubbleShooterMode"),E=d("SnakeGameMode"),M=d("FlipTileMode"),I=d("FlashcardControls"),L=d("PracticeStats"),P=d("FlashcardEmptyState"),O=d("SettingsModal"),j=d("HistoryModal"),H=d("SessionDetailModal"),W=d("CompletionModal"),ee=d("ExitWarningModal");return v(),c("div",re,[a[24]||(a[24]=m('<div class="absolute inset-0 overflow-hidden pointer-events-none" data-v-b1cf9130><div class="floating-shapes" data-v-b1cf9130><div class="absolute top-24 left-8 w-64 h-64 bg-blue-300 dark:bg-blue-500 rounded-full mix-blend-multiply dark:mix-blend-normal filter blur-xl opacity-30 animate-blob" data-v-b1cf9130></div><div class="absolute top-40 right-10 w-72 h-72 bg-purple-300 dark:bg-purple-500 rounded-full mix-blend-multiply dark:mix-blend-normal filter blur-xl opacity-30 animate-blob animation-delay-2000" data-v-b1cf9130></div><div class="absolute -bottom-10 left-24 w-80 h-80 bg-pink-300 dark:bg-pink-500 rounded-full mix-blend-multiply dark:mix-blend-normal filter blur-xl opacity-30 animate-blob animation-delay-4000" data-v-b1cf9130></div></div></div>',1)),p(t,{"current-index":w($e),"total-cards":va.value.length,"practice-mode":w(Xe),"shuffle-enabled":ga.value,"practice-started":ke.value,"image-quiz-enabled":w(Xa),"listening-quiz-enabled":w(vt),"typing-quiz-enabled":w(Ta),"image-mode-available":Se.value,"pictionary-mode-available":Ce.value,"flip-tile-mode-available":_e.value,"bubble-shooter-mode-available":ze.value,"bubble-shooter-vietnamese-mode":$.value,"snake-double-bait-enabled":K.value,"pictionary-definition-mode":X.value,"scramble-words-enabled":Z.value,"words-crush-enabled":Y.value,"use-flip-tile-hints":w(we).useFlipTileHints,onGoBack:w(oa),onShowHistory:a[0]||(a[0]=e=>je.value=!0),onChangePracticeMode:a[1]||(a[1]=e=>w(na)(e)),onShowSettings:a[2]||(a[2]=e=>ge.value=!0),onToggleShuffle:Et,"onUpdate:imageQuizEnabled":a[3]||(a[3]=e=>Xa.value=e),"onUpdate:listeningQuizEnabled":a[4]||(a[4]=e=>vt.value=e),"onUpdate:typingQuizEnabled":a[5]||(a[5]=e=>Ta.value=e),"onUpdate:bubbleShooterVietnameseMode":a[6]||(a[6]=e=>$.value=e),"onUpdate:snakeDoubleBaitEnabled":a[7]||(a[7]=e=>K.value=e),"onUpdate:pictionaryDefinitionMode":a[8]||(a[8]=e=>X.value=e),"onUpdate:scrambleWordsEnabled":a[9]||(a[9]=e=>Z.value=e),"onUpdate:wordsCrushEnabled":a[10]||(a[10]=e=>Y.value=e),"onUpdate:useFlipTileHints":jt},null,8,["current-index","total-cards","practice-mode","shuffle-enabled","practice-started","image-quiz-enabled","listening-quiz-enabled","typing-quiz-enabled","image-mode-available","pictionary-mode-available","flip-tile-mode-available","bubble-shooter-mode-available","bubble-shooter-vietnamese-mode","snake-double-bait-enabled","pictionary-definition-mode","scramble-words-enabled","words-crush-enabled","use-flip-tile-hints","onGoBack"]),p(l,{"animation-type":"slide-left",threshold:.1,"root-margin":"-50px"},{default:h(()=>[p(r,{"progress-percentage":pa.value},null,8,["progress-percentage"])]),_:1}),p(l,{"animation-type":"scale",threshold:.1,"root-margin":"-50px"},{default:h(()=>[g("div",le,[g("div",ie,[p(i,{"show-voice-info":!1})])])]),_:1}),p(l,{"animation-type":"slide-right",threshold:.1,"root-margin":"-50px"},{default:h(()=>[g("div",ne,[g("div",oe,[p(n,{vocabularies:w(Q),selectedDate:J.value,"practice-started":ke.value,"onUpdate:selectedDate":a[11]||(a[11]=e=>J.value=e)},null,8,["vocabularies","selectedDate","practice-started"])])])]),_:1}),g("div",se,[va.value.length>0?(v(),c("div",ue,[g("div",de,[g("div",ce,[p(l,{"animation-type":"fade-up",threshold:.1,"root-margin":"-50px"},{default:h(()=>[g("div",ve,["bubble-shooter"===w(Xe)||"snake-game"===w(Xe)?(v(),c(b,{key:0},[ke.value?f("",!0):(v(),c("button",{key:0,onClick:De,class:"px-8 py-4 bg-gradient-to-r from-purple-600 to-pink-600 hover:from-purple-700 hover:to-pink-700 dark:from-purple-700 dark:to-pink-700 dark:hover:from-purple-800 dark:hover:to-pink-800 text-white font-semibold rounded-xl shadow-lg hover:shadow-xl transform hover:scale-105 transition-all duration-200"},A(w(D)("practice.startGame","Start Game")),1))],64)):(v(),y(o,{key:1,ref_key:"practiceTimerRef",ref:Te,"max-time":30,onStart:De,onTimeout:Ie,onRestart:Qe,onSkip:Le},null,512))])]),_:1}),ke.value?(v(),c("div",me,[p(l,{"animation-type":"scale",threshold:.1,"root-margin":"-50px"},{default:h(()=>["flashcard"===w(Xe)?(v(),y(s,{key:0,"current-card":ma.value,"is-flipped":w(Ke),"scramble-words-enabled":Z.value,"current-index":w($e),"total-cards":va.value.length,onFlipCard:w(ra),onNextCard:Dt,onShowResults:w(la),onScrambleAnswer:zt},null,8,["current-card","is-flipped","scramble-words-enabled","current-index","total-cards","onFlipCard","onShowResults"])):"pictionary"===w(Xe)?(v(),y(u,{key:1,card:ma.value,"pictionary-answer":w(Ba),"pictionary-answered":w(Ga),"pictionary-correct":w(Ha),"definition-mode":X.value,"get-topic-name":w(x),"onUpdate:pictionaryAnswer":a[12]||(a[12]=e=>Ba.value=e),onCheckAnswer:_t,onPictionarySnapshot:U},null,8,["card","pictionary-answer","pictionary-answered","pictionary-correct","definition-mode","get-topic-name"])):"quiz"===w(Xe)?(v(),y(S,{key:2,"current-card":ma.value,"quiz-options":w(fa),"selected-answer":w(ya),"quiz-answered":w(ba),onSelectAnswer:bt},null,8,["current-card","quiz-options","selected-answer","quiz-answered"])):"typing"===w(Xe)?(v(),y(C,{key:3,"current-card":ma.value,"typing-answer":w(Ca),"typing-answered":w(_a),"typing-correct":w(za),"typing-quiz-enabled":w(Ta),"typing-quiz-options":w(xa),"typing-quiz-selected":w(Ea),"typing-quiz-answered":w(Da),"onUpdate:typingAnswer":a[13]||(a[13]=e=>Ca.value=e),onCheckAnswer:At,onSelectTypingQuizAnswer:a[14]||(a[14]=e=>(e=>{const a=Ia(e);ca(!!a),ma.value&&q.value&&F({cardId:ma.value.id,word:ma.value.word,meaningShort:it(ma.value.meaning),userAnswer:e,correctAnswer:ma.value.word,isCorrect:!!a,mode:"typing-quiz"}),ke.value&&"undefined"!=typeof window&&window.innerWidth<768&&setTimeout(()=>{Dt()},2100)})(e))},null,8,["current-card","typing-answer","typing-answered","typing-correct","typing-quiz-enabled","typing-quiz-options","typing-quiz-selected","typing-quiz-answered"])):"image"===w(Xe)?(v(),y(_,{key:4,"current-card":ma.value,"image-answer":w(qa),"image-answered":w(Ra),"image-correct":w(Va),"image-quiz-enabled":w(Xa),"image-quiz-options":w(Za),"image-quiz-selected":w(Ya),"image-quiz-answered":w(et),"onUpdate:imageAnswer":a[15]||(a[15]=e=>qa.value=e),onCheckAnswer:Re,"onUpdate:imageQuizEnabled":a[16]||(a[16]=e=>{return a=e,Xa.value=a,Ua(),void(a&&at());var a}),onSelectImageQuizAnswer:a[17]||(a[17]=e=>(e=>{const a=tt(e);ca(!!a),ma.value&&q.value&&F({cardId:ma.value.id,word:ma.value.word,meaningShort:it(ma.value.meaning),userAnswer:e,correctAnswer:ma.value.word,isCorrect:!!a,mode:"image-quiz"}),ke.value&&"undefined"!=typeof window&&window.innerWidth<768&&setTimeout(()=>{Dt()},2100)})(e))},null,8,["current-card","image-answer","image-answered","image-correct","image-quiz-enabled","image-quiz-options","image-quiz-selected","image-quiz-answered"])):"listening"===w(Xe)?(v(),y(z,{key:5,card:ma.value,"listening-answer":w(Qa),"onUpdate:listeningAnswer":a[18]||(a[18]=e=>Qa.value=e),"listening-answered":w(La),"listening-correct":w(Pa),"listening-quiz-enabled":w(vt),"listening-quiz-options":w(mt),"listening-quiz-selected":w(pt),"listening-quiz-answered":w(gt),"get-topic-name":w(x),onCheckAnswer:St,onPlayAudio:w(Oa),onSelectListeningQuizAnswer:a[19]||(a[19]=e=>(e=>{const a=ht(e);ca(!!a),ma.value&&q.value&&F({cardId:ma.value.id,word:ma.value.word,meaningShort:it(ma.value.meaning),userAnswer:e,correctAnswer:ma.value.word,isCorrect:!!a,mode:"listening-quiz"}),ke.value&&"undefined"!=typeof window&&window.innerWidth<768&&setTimeout(()=>{Dt()},2100)})(e))},null,8,["card","listening-answer","listening-answered","listening-correct","listening-quiz-enabled","listening-quiz-options","listening-quiz-selected","listening-quiz-answered","get-topic-name","onPlayAudio"])):"pronunciation"===w(Xe)?(v(),y(k,{key:6,card:ma.value,"is-recording":w(nt),"pronunciation-result":w(ot),"pronunciation-answered":w(st),"pronunciation-correct":w(ut),"is-speech-recognition-supported":w(dt),"get-topic-name":w(x),"words-crush-enabled":Y.value,onStartRecording:w(ct),onGameCompleted:Tt,onPlayAudio:w(Oa)},null,8,["card","is-recording","pronunciation-result","pronunciation-answered","pronunciation-correct","is-speech-recognition-supported","get-topic-name","words-crush-enabled","onStartRecording","onPlayAudio"])):"bubble-shooter"===w(Xe)?(v(),y(T,{key:7,words:va.value,"vietnamese-mode":$.value,onGameComplete:kt},null,8,["words","vietnamese-mode"])):"snake-game"===w(Xe)?(v(),y(E,{key:8,words:va.value,"vietnamese-mode":$.value,"double-bait-mode":K.value,"record-timeline":!0,onGameComplete:Ot,onCorrectFoodEaten:qt,onWrongFoodEaten:Rt},null,8,["words","vietnamese-mode","double-bait-mode"])):"flip-tile"===w(Xe)?(v(),y(M,{key:9,card:ma.value,"flip-tile-answer":w(Na),"flip-tile-answered":w(Ja),"flip-tile-correct":w($a),"get-topic-name":w(x),"use-hints":w(we).useFlipTileHints,"onUpdate:flipTileAnswer":a[20]||(a[20]=e=>Na.value=e),onCheckAnswer:Ct},null,8,["card","flip-tile-answer","flip-tile-answered","flip-tile-correct","get-topic-name","use-hints"])):f("",!0)]),_:1}),p(l,{"animation-type":"slide-left",threshold:.1,"root-margin":"-50px"},{default:h(()=>[p(I,{"practice-mode":w(Xe),"current-index":w($e),"total-cards":va.value.length,"can-proceed":w(lt)()[w(Xe)],"practice-started":ke.value,"scramble-words-enabled":Z.value,"typing-answer":w(Ca),"typing-answered":w(_a),"listening-answer":w(Qa),"listening-answered":w(La),"image-answer":w(qa),"image-answered":w(Ra),onMarkDifficult:Qt,onMarkEasy:It,onPreviousCard:Mt,onNextCard:Dt,onCheckTypingAnswer:At,onCheckListeningAnswer:St,onCheckImageAnswer:Re,onExitPractice:Me},null,8,["practice-mode","current-index","total-cards","can-proceed","practice-started","scramble-words-enabled","typing-answer","typing-answered","listening-answer","listening-answered","image-answer","image-answered"])]),_:1}),p(l,{"animation-type":"scale",threshold:.1,"root-margin":"-50px"},{default:h(()=>[p(L,{stats:w(ea),mode:w(Xe)},null,8,["stats","mode"])]),_:1})])):f("",!0)])])])):f("",!0),p(l,{"animation-type":"fade-up",threshold:.1,"root-margin":"-50px"},{default:h(()=>[0===va.value.length?(v(),y(P,{key:0,onGoToVocabulary:w(sa)},null,8,["onGoToVocabulary"])):f("",!0)]),_:1})]),p(O,{show:w(ge),settings:w(Ye),"local-settings":w(he),"date-filter-enabled":N.value,"selected-date":J.value,"onUpdate:localSettings":a[21]||(a[21]=e=>he.value=e),onCancel:w(ye),onApply:w(fe)},null,8,["show","settings","local-settings","date-filter-enabled","selected-date","onCancel","onApply"]),p(j,{show:w(je),history:w(Ue),"get-mode-color":w(Ge),"get-mode-text":w(He),"format-date":w(We),"format-duration":w(Ne),onClose:a[22]||(a[22]=e=>je.value=!1),onOpenDetails:B,onDeleteSession:G},null,8,["show","history","get-mode-color","get-mode-text","format-date","format-duration"]),p(H,{show:R.value,details:V.value,onClose:a[23]||(a[23]=e=>R.value=!1)},null,8,["show","details"]),p(W,{show:w(Ze),stats:w(ea),"card-count":w(aa).length,onRestart:Pt,onGoBack:Ft},null,8,["show","stats","card-count"]),p(ee,{show:xe.value,onContinue:Pe,onConfirm:Fe},null,8,["show"])])}}}),[["__scopeId","data-v-b1cf9130"]]);export{ge as default};
