import{d as e,A as a,C as t,D as l,I as r,J as s,c as d,v as i,f as o,e as n,y as c,u,t as b,n as v,w as p,F as f,j as m,Y as g,g as x}from"./vue-vendor-Bt65BSdi.js";import{u as y}from"./ui-vendor-D-J_fEQ5.js";import{b as k}from"./dateUtils-N7QR9R2r.js";const h={class:"bg-white dark:bg-[#0f0f0f] border-b border-gray-200 dark:border-dark-bg-mute"},w={class:"max-w-4xl mx-auto px-4 sm:px-6 lg:px-8 py-4"},D={class:"flex flex-col sm:flex-row items-start sm:items-center justify-between gap-4"},C={class:"flex flex-col sm:flex-row items-start sm:items-center gap-4"},F={class:"flex items-center gap-2"},S={class:"relative"},j=["disabled","aria-disabled","title"],z={class:"truncate"},B={key:0,class:"absolute bottom-full mb-1 w-full bg-white dark:bg-dark-bg border border-gray-300 dark:border-dark-bg-soft dark:border-2 rounded-md shadow-xl ring-1 ring-black ring-opacity-5 max-h-60 overflow-y-auto origin-bottom",style:{"z-index":"99999 !important"}},A=["onClick"],H={class:"truncate"},M={class:"ml-2 text-xs text-gray-500 dark:text-white/60 flex-shrink-0"},$={key:0,class:"text-sm text-gray-600 dark:text-white/70"},L={class:"flex items-center gap-1"},V=e({__name:"FlashcardDateFilter",props:{vocabularies:{},enabled:{type:Boolean},selectedDate:{},practiceStarted:{type:Boolean}},emits:["update:enabled","update:selectedDate"],setup(e,{emit:V}){const _=e,E=V,{t:I,locale:J}=y(),P=a(!1);t(()=>!0);const U=t({get:()=>_.selectedDate,set:e=>E("update:selectedDate",e)}),Y=t(()=>{if(!_.vocabularies.length)return[];return k(_.vocabularies,J.value).map(e=>({date:e.date,displayDate:e.displayDate,count:e.vocabularies.length}))}),q=()=>{_.practiceStarted||(P.value=!P.value)},G=e=>{_.practiceStarted||(U.value=e,P.value=!1)},K=()=>{if(!U.value)return I("flashcard.dateFilter.allDates","All dates");const e=Y.value.find(e=>e.date===U.value);return e?`${e.displayDate} (${e.count})`:I("flashcard.dateFilter.allDates","All dates")},N=e=>{e.target.closest(".relative")||(P.value=!1)},O=()=>{if(!U.value)return"";const e=Y.value.find(e=>e.date===U.value);return e?I("flashcard.dateFilter.info",{count:e.count,date:e.displayDate},`Showing ${e.count} words from ${e.displayDate}`):""};return l(Y,e=>{U.value&&!e.some(e=>e.date===U.value)&&(U.value="")}),r(()=>{document.addEventListener("click",N)}),s(()=>{document.removeEventListener("click",N)}),(e,a)=>(i(),d("div",h,[o("div",w,[o("div",D,[o("div",C,[o("div",F,[a[2]||(a[2]=o("svg",{class:"w-4 h-4 text-gray-500 dark:text-white/60",fill:"currentColor",viewBox:"0 0 20 20"},[o("path",{"fill-rule":"evenodd",d:"M6 2a1 1 0 00-1 1v1H4a2 2 0 00-2 2v10a2 2 0 002 2h12a2 2 0 002-2V6a2 2 0 00-2-2h-1V3a1 1 0 10-2 0v1H7V3a1 1 0 00-1-1zm0 5a1 1 0 000 2h8a1 1 0 100-2H6z","clip-rule":"evenodd"})],-1)),o("div",S,[o("button",{type:"button",onClick:q,disabled:e.practiceStarted,"aria-disabled":e.practiceStarted?"true":"false",title:e.practiceStarted?u(I)("flashcard.dateFilter.disabledDuringPractice","Date filter is disabled during practice"):"",class:"px-3 py-1.5 text-sm border border-gray-300 dark:border-dark-bg-soft dark:border-2 rounded-md bg-white dark:bg-dark-bg text-gray-900 dark:text-white focus:ring-2 focus:ring-blue-500 focus:border-blue-400 disabled:opacity-50 disabled:cursor-not-allowed flex items-center justify-between min-w-[200px] sm:min-w-[240px]"},[o("span",z,b(K()),1),(i(),d("svg",{class:v(["w-4 h-4 ml-2 transition-transform duration-200",{"rotate-180":P.value}]),fill:"currentColor",viewBox:"0 0 20 20"},a[1]||(a[1]=[o("path",{"fill-rule":"evenodd",d:"M5.293 7.293a1 1 0 011.414 0L10 10.586l3.293-3.293a1 1 0 111.414 1.414l-4 4a1 1 0 01-1.414 0l-4-4a1 1 0 010-1.414z","clip-rule":"evenodd"},null,-1)]),2))],8,j),c(g,{"enter-active-class":"transform transition duration-100 ease-out","enter-from-class":"scale-95 opacity-0 translate-y-2","enter-to-class":"scale-100 opacity-100 translate-y-0","leave-active-class":"transform transition duration-75 ease-in","leave-from-class":"scale-100 opacity-100 translate-y-0","leave-to-class":"scale-95 opacity-0 translate-y-2"},{default:p(()=>[P.value&&!e.practiceStarted?(i(),d("div",B,[o("button",{type:"button",onClick:a[0]||(a[0]=e=>G("")),class:v(["w-full px-3 py-2 text-left text-sm hover:bg-gray-100 dark:hover:bg-dark-bg-mute transition-colors duration-150",{"bg-blue-50 dark:bg-blue-900/30 text-blue-600 dark:text-blue-400":""===U.value}])},b(u(I)("flashcard.dateFilter.allDates","All dates")),3),(i(!0),d(f,null,m(Y.value,e=>(i(),d("button",{key:e.date,type:"button",onClick:a=>G(e.date),class:v(["w-full px-3 py-2 text-left text-sm hover:bg-gray-100 dark:hover:bg-dark-bg-mute transition-colors duration-150 flex items-center justify-between",{"bg-blue-50 dark:bg-blue-900/30 text-blue-600 dark:text-blue-400":U.value===e.date}])},[o("span",H,b(e.displayDate),1),o("span",M," ("+b(e.count)+") ",1)],10,A))),128))])):n("",!0)]),_:1})])])]),U.value?(i(),d("div",$,[o("span",L,[a[3]||(a[3]=o("svg",{class:"w-4 h-4",fill:"currentColor",viewBox:"0 0 20 20"},[o("path",{"fill-rule":"evenodd",d:"M18 10a8 8 0 11-16 0 8 8 0 0116 0zm-7-4a1 1 0 11-2 0 1 1 0 012 0zM9 9a1 1 0 000 2v3a1 1 0 001 1h1a1 1 0 100-2v-3a1 1 0 00-1-1H9z","clip-rule":"evenodd"})],-1)),x(" "+b(O()),1)])])):n("",!0)])])]))}});export{V as default};
