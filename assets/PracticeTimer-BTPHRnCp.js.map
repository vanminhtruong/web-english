{"version":3,"file":"PracticeTimer-BTPHRnCp.js","sources":["../../src/views/practice/components/PracticeTimer.vue"],"sourcesContent":["<template>\n  <div class=\"practice-timer\">\n    <!-- Timer Display -->\n    <div v-if=\"isActive\" class=\"flex items-center justify-center gap-1 sm:gap-2 md:gap-3 mb-3 sm:mb-4 md:mb-5\">\n      <div class=\"timer-display\" :class=\"getTimerClass()\">\n        <svg class=\"w-4 h-4 sm:w-5 sm:h-5 md:w-6 md:h-6\" fill=\"currentColor\" viewBox=\"0 0 20 20\">\n          <path fill-rule=\"evenodd\" d=\"M10 18a8 8 0 100-16 8 8 0 000 16zm1-12a1 1 0 10-2 0v4a1 1 0 00.293.707l2.828 2.829a1 1 0 101.415-1.415L11 9.586V6z\" clip-rule=\"evenodd\"/>\n        </svg>\n        <span class=\"font-mono font-bold text-sm sm:text-base md:text-lg\">{{ formatTime(remainingTime) }}</span>\n      </div>\n    </div>\n\n    <!-- Start Practice Button -->\n    <div v-if=\"!hasStarted\" class=\"text-center mb-4 sm:mb-5 md:mb-6\">\n      <button\n        @click=\"startPractice\"\n        class=\"bg-blue-500 hover:bg-blue-600 text-white px-4 py-2 sm:px-6 sm:py-3 md:px-8 md:py-4 rounded-lg sm:rounded-xl md:rounded-2xl font-semibold text-sm sm:text-base md:text-lg transition-colors shadow-lg hover:shadow-xl\"\n      >\n        <svg class=\"w-4 h-4 sm:w-5 sm:h-5 md:w-6 md:h-6 inline-block mr-1 sm:mr-2 md:mr-3\" fill=\"currentColor\" viewBox=\"0 0 20 20\">\n          <path fill-rule=\"evenodd\" d=\"M10 18a8 8 0 100-16 8 8 0 000 16zM9.555 7.168A1 1 0 008 8v4a1 1 0 001.555.832l3-2a1 1 0 000-1.664l-3-2z\" clip-rule=\"evenodd\"/>\n        </svg>\n        {{ t('practice.timer.startPractice', 'Start Practice') }}\n      </button>\n      <div class=\"text-xs sm:text-sm md:text-base text-gray-500 dark:text-gray-400 mt-2\">\n        {{ timeLimitText }}\n      </div>\n    </div>\n\n    <!-- Timeout Modal -->\n    <Teleport to=\"body\">\n      <div v-if=\"showTimeoutModal\" class=\"timeout-modal-overlay\" style=\"position: fixed !important; top: 0 !important; left: 0 !important; right: 0 !important; bottom: 0 !important; z-index: 99999 !important; background: rgba(0,0,0,0.5) !important; display: flex !important; align-items: center !important; justify-content: center !important; padding: 12px !important;\">\n        <div style=\"position: relative !important; z-index: 100000 !important;\" class=\"timeout-modal-content flex items-center justify-center z-[9999] p-3 sm:p-4 md:p-6\">\n        <div class=\"bg-white dark:bg-[#0a0a0a] rounded-xl p-4 sm:p-6 md:p-8 max-w-xs sm:max-w-sm md:max-w-md mx-auto text-center w-full\">\n          <div class=\"text-red-500 mb-3 sm:mb-4 md:mb-5\">\n            <svg class=\"w-12 h-12 sm:w-14 sm:h-14 md:w-16 md:h-16 mx-auto\" fill=\"currentColor\" viewBox=\"0 0 20 20\">\n              <path fill-rule=\"evenodd\" d=\"M10 18a8 8 0 100-16 8 8 0 000 16zm1-12a1 1 0 10-2 0v4a1 1 0 00.293.707l2.828 2.829a1 1 0 101.415-1.415L11 9.586V6z\" clip-rule=\"evenodd\"/>\n            </svg>\n          </div>\n          <h3 class=\"text-lg sm:text-xl md:text-2xl font-bold text-gray-900 dark:text-white mb-2 sm:mb-3 md:mb-4\">\n            {{ t('practice.timer.timeUp', 'Time is up!') }}\n          </h3>\n          <p class=\"text-sm sm:text-base md:text-lg text-gray-600 dark:text-gray-300 mb-4 sm:mb-5 md:mb-6 leading-relaxed\">\n            {{ t('practice.timer.timeUpMessage', 'Your time is up. Would you like to try again or skip this card?') }}\n          </p>\n          <div class=\"flex gap-2 sm:gap-3 md:gap-4\">\n            <button\n              @click=\"restartPractice\"\n              class=\"flex-1 bg-blue-500 hover:bg-blue-600 text-white px-3 py-2 sm:px-4 sm:py-2 md:px-5 md:py-3 rounded-lg font-medium transition-colors text-xs sm:text-sm md:text-base\"\n            >\n              {{ t('practice.timer.tryAgain', 'Try Again') }}\n            </button>\n            <button\n              @click=\"skipCard\"\n              class=\"flex-1 bg-gray-500 hover:bg-gray-600 text-white px-3 py-2 sm:px-4 sm:py-2 md:px-5 md:py-3 rounded-lg font-medium transition-colors text-xs sm:text-sm md:text-base\"\n            >\n              {{ t('practice.timer.skip', 'Skip') }}\n            </button>\n          </div>\n        </div>\n        </div>\n      </div>\n    </Teleport>\n  </div>\n</template>\n\n<script setup lang=\"ts\">\nimport { ref, computed, onUnmounted, watch, readonly } from 'vue'\nimport { useI18n } from 'vue-i18n'\n\ninterface Props {\n  maxTime?: number\n  autoStart?: boolean\n  disabled?: boolean\n}\n\nconst props = withDefaults(defineProps<Props>(), {\n  maxTime: 30,\n  autoStart: false,\n  disabled: false\n})\n\nconst emit = defineEmits<{\n  start: []\n  timeout: []\n  tick: [remainingTime: number]\n  restart: []\n  skip: []\n}>()\n\nconst { t } = useI18n()\n\nconst timeLimitText = computed(() => {\n  // First, try to translate. If the key exists, it will be interpolated.\n  const translated = t('practice.timer.timeLimit', { seconds: props.maxTime })\n\n  // If translation fails, t() returns the key. In that case, use a manual fallback.\n  if (translated === 'practice.timer.timeLimit') {\n    return `Time limit: ${props.maxTime} seconds`\n  }\n\n  return translated\n})\n\n// Timer state\nconst remainingTime = ref(props.maxTime)\nconst isActive = ref(false)\nconst hasStarted = ref(false)\nconst showTimeoutModal = ref(false)\nlet timerId: number | null = null\n\n// Computed\nconst isRunning = computed(() => isActive.value && remainingTime.value > 0)\n\n// Methods\nconst startPractice = () => {\n  hasStarted.value = true\n  startTimer()\n  emit('start')\n}\n\nconst startTimer = () => {\n  if (props.disabled) return\n  \n  isActive.value = true\n  remainingTime.value = props.maxTime\n  \n  timerId = setInterval(() => {\n    if (remainingTime.value > 0) {\n      remainingTime.value--\n      emit('tick', remainingTime.value)\n    } else {\n      handleTimeout()\n    }\n  }, 1000)\n}\n\nconst stopTimer = () => {\n  // Only stop the interval but keep isActive true to continue showing the timer\n  if (timerId) {\n    clearInterval(timerId)\n    timerId = null\n  }\n}\n\nconst resetTimer = () => {\n  stopTimer()\n  remainingTime.value = props.maxTime\n}\n\nconst handleTimeout = () => {\n  stopTimer()\n  showTimeoutModal.value = true\n  emit('timeout')\n}\n\nconst restartPractice = () => {\n  showTimeoutModal.value = false\n  resetTimer()\n  startTimer()\n  emit('restart')\n}\n\nconst skipCard = () => {\n  showTimeoutModal.value = false\n  stopTimer()\n  isActive.value = false // hide timer display\n  emit('skip')\n}\n\nconst nextCard = () => {\n  if (hasStarted.value) {\n    resetTimer()\n    startTimer()\n  }\n}\n\nconst resetPractice = () => {\n  stopTimer();\n  isActive.value = false; // Add this line to hide the timer\n  hasStarted.value = false;\n  remainingTime.value = props.maxTime;\n  showTimeoutModal.value = false; // Hide timeout modal if open\n};\n\nconst formatTime = (seconds: number): string => {\n  const mins = Math.floor(seconds / 60)\n  const secs = seconds % 60\n  return `${mins.toString().padStart(2, '0')}:${secs.toString().padStart(2, '0')}`\n}\n\nconst getTimerClass = () => {\n  if (remainingTime.value <= 5) return 'timer-critical'\n  if (remainingTime.value <= 10) return 'timer-warning'\n  return 'timer-normal'\n}\n\n// Watch for props changes\nwatch(() => props.disabled, (disabled) => {\n  if (disabled) {\n    stopTimer()\n  }\n})\n\n// Auto start if enabled\nwatch(() => props.autoStart, (autoStart) => {\n  if (autoStart && !hasStarted.value) {\n    startPractice()\n  }\n})\n\n// Cleanup\n// Watch to lock/unlock body scroll when timeout modal visibility changes\nwatch(showTimeoutModal, (visible) => {\n  if (visible) {\n    document.body.classList.add('modal-open')\n  } else {\n    document.body.classList.remove('modal-open')\n  }\n})\n\n// Cleanup when component unmounts\nonUnmounted(() => {\n  stopTimer()\n})\n\n// Expose methods for parent component\ndefineExpose({\n  startTimer,\n  stopTimer,\n  resetTimer,\n  nextCard,\n  hasStarted,\n  resetPractice,\n})\n</script>\n\n<style scoped>\n.timer-display {\n  @apply flex items-center gap-1 sm:gap-2 md:gap-3 px-2 py-1 sm:px-3 sm:py-2 md:px-4 md:py-3 rounded-lg font-medium;\n}\n\n.timer-normal {\n  @apply bg-green-100 text-green-800 dark:bg-green-900 dark:text-green-200;\n}\n\n.timer-warning {\n  @apply bg-yellow-100 text-yellow-800 dark:bg-yellow-900 dark:text-yellow-200;\n}\n\n.timer-critical {\n  @apply bg-red-100 text-red-800 dark:bg-red-900 dark:text-red-200;\n  animation: pulse 1s infinite;\n}\n\n@keyframes pulse {\n  0%, 100% { opacity: 1; }\n  50% { opacity: 0.7; }\n}\n</style>\n"],"names":["_openBlock","_createElementBlock","_createElementVNode","_normalizeClass","_toDisplayString","_createTextVNode","_unref","_createBlock","_Teleport"],"mappings":"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"}