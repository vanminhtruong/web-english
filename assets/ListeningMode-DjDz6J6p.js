const __vite__mapDeps=(i,m=__vite__mapDeps,d=(m.f||(m.f=["/web-english/assets/FireworkSoundEffect-DS0v3Px0.js","/web-english/assets/utils-vendor-DwIcHP6x.js","/web-english/assets/vue-vendor-Bt65BSdi.js","/web-english/assets/_plugin-vue_export-helper-BCo6x5W8.js","/web-english/assets/FireworkSoundEffect-CV0ieEWB.css"])))=>i.map(i=>d[i]);
import{_ as e}from"./index-DmJNupMF.js";import{d as t,A as r,I as a,D as n,c as s,v as l,f as i,y as d,t as o,u as c,e as g,W as u,F as m,j as p,n as x,N as y,i as w,q as b}from"./vue-vendor-Bt65BSdi.js";import{u as f}from"./ui-vendor-D-J_fEQ5.js";import{_ as k}from"./_plugin-vue_export-helper-BCo6x5W8.js";const h={class:"text-center h-full flex flex-col justify-center"},v={class:"mb-6"},C={class:"px-3 py-1 bg-blue-100 dark:bg-gray-800 text-blue-800 dark:text-blue-300 text-xs sm:text-sm md:text-base font-medium rounded-full"},z={class:"mb-8"},A={key:0,class:"text-base sm:text-lg md:text-xl text-gray-600 dark:text-gray-300 mb-8"},_={key:1,class:"text-base sm:text-lg md:text-xl text-gray-600 dark:text-gray-300 mb-8"},Q={key:2,class:"max-w-md mx-auto"},E=["value","disabled","placeholder"],j={key:0,class:"mt-4"},B={key:0,class:"text-green-600 dark:text-green-400 font-medium"},L={key:1,class:"text-red-600 dark:text-red-400 font-medium"},T={class:"text-sm text-gray-500 dark:text-gray-400 mt-2"},I={key:3,class:"w-full px-2 sm:px-3 md:px-0"},S={class:"grid grid-cols-1 grid-2-cols-480 sm:grid-cols-2 gap-1.5 sm:gap-3 justify-items-stretch w-full max-w-none"},D=["onClick","disabled"],F={class:"inline-flex items-center justify-center w-5 h-5 rounded-full text-xs font-semibold bg-gray-200 text-gray-700 dark:bg-white/10 dark:text-white/80 shrink-0"},N={class:"truncate overflow-hidden min-w-0"},q={key:0,class:"mt-4 text-center"},M={key:0,class:"text-green-600 dark:text-green-400 font-medium"},O={key:1,class:"text-red-600 dark:text-red-400 font-medium"},V={class:"text-sm text-gray-500 dark:text-gray-400 mt-2"},W=k(t({__name:"ListeningMode",props:{card:{},listeningAnswer:{},listeningAnswered:{type:Boolean},listeningCorrect:{type:Boolean},listeningQuizEnabled:{type:Boolean},listeningQuizOptions:{},listeningQuizSelected:{},listeningQuizAnswered:{type:Boolean},getTopicName:{type:Function}},emits:["update:listeningAnswer","check-answer","play-audio","select-listening-quiz-answer"],setup(t,{emit:k}){const W=y(()=>e(()=>import("./FireworkSoundEffect-DS0v3Px0.js"),__vite__mapDeps([0,1,2,3,4]),import.meta.url)),H=r(!1),K=r(!1),P=r(!1),R=r(),G=t,J=k,U=r(null),X=()=>{G.listeningQuizEnabled||G.listeningAnswered||document.activeElement!==U.value&&(async()=>{await b();try{U.value?.focus({preventScroll:!0})}catch{U.value?.focus()}})()},Y=()=>{X()},Z=e=>{const t=e.target,r=t.value.replace(/[ưừứửữự]/g,"w").replace(/[ƯỪỨỬỮỰ]/g,"W").normalize("NFD").replace(/[\u0300-\u036f]/g,"").replace(/đ/g,"d").replace(/Đ/g,"D");r!==t.value&&(t.value=r),J("update:listeningAnswer",r)};a(()=>{X()});const $=()=>{G.listeningAnswered||(J("check-answer"),setTimeout(()=>{P.value=G.listeningCorrect,H.value=!0,K.value=!0},100))},ee=()=>{H.value=!1,K.value=!1};n(()=>G.listeningAnswered,e=>{e&&!H.value&&(P.value=G.listeningCorrect,setTimeout(()=>{H.value=!0,K.value=!0},50))}),n(()=>G.listeningAnswered,e=>{e||X()}),n(()=>G.card,()=>{X()}),n(()=>G.listeningQuizEnabled,e=>{e||X()});const{t:te}=f(),re=e=>G.listeningQuizSelected===e,ae=e=>!!G.card&&e.trim().toLowerCase()===G.card.word.trim().toLowerCase();return(e,t)=>(l(),s("div",{class:"bg-white dark:bg-[#0a0a0a] rounded-xl shadow-2xl border border-gray-200 dark:border-gray-800 p-6 sm:p-8 h-auto sm:h-96 select-none",onCopy:t[1]||(t[1]=w(()=>{},["prevent"])),onCut:t[2]||(t[2]=w(()=>{},["prevent"])),onContextmenu:t[3]||(t[3]=w(()=>{},["prevent"]))},[i("div",h,[i("div",v,[i("span",C,o(e.card?.category?e.getTopicName(e.card.category):""),1)]),i("div",z,[i("button",{onClick:t[0]||(t[0]=e=>J("play-audio")),class:"bg-blue-500 hover:bg-blue-600 text-white p-6 rounded-full transition-colors"},t[4]||(t[4]=[i("svg",{class:"w-8 h-8",fill:"currentColor",viewBox:"0 0 20 20"},[i("path",{"fill-rule":"evenodd",d:"M9.383 3.076A1 1 0 0110 4v12a1 1 0 01-1.617.816L4.846 13H2a1 1 0 01-1-1V8a1 1 0 011-1h2.846l3.537-3.816a1 1 0 011.617.816zM16 8a2 2 0 11-4 0 2 2 0 014 0zm-2 6a4 4 0 100-8 4 4 0 000 8z","clip-rule":"evenodd"})],-1)]))]),e.listeningQuizEnabled?(l(),s("p",_,o(c(te)("flashcard.listening.instructionQuiz","Choose the word you hear:")),1)):(l(),s("p",A,o(c(te)("flashcard.listening.instruction","Listen and type the word you hear:")),1)),e.listeningQuizEnabled?(l(),s("div",I,[i("div",S,[(l(!0),s(m,null,p(e.listeningQuizOptions,(t,r)=>(l(),s("button",{key:r,onClick:e=>(e=>{G.listeningQuizAnswered||J("select-listening-quiz-answer",e)})(t),disabled:e.listeningQuizAnswered,translate:"no",class:x(["notranslate px-3 py-1.5 sm:py-2 rounded-md border text-[13px] sm:text-sm transition-all duration-150 disabled:opacity-70 disabled:cursor-not-allowed text-left flex items-center gap-2 w-full min-w-0",[e.listeningQuizAnswered?ae(t)?"bg-green-100 dark:bg-green-900 text-green-800 dark:text-green-300 border-green-300 dark:border-green-700":re(t)?"bg-red-100 dark:bg-red-900 text-red-800 dark:text-red-300 border-red-300 dark:border-red-700":"bg-white dark:bg-gray-custom text-gray-900 dark:text-white border-gray-300 dark:border-gray-custom/60":"bg-white dark:bg-gray-custom text-gray-900 dark:text-white border-gray-300 dark:border-gray-custom/60 hover:shadow-sm hover:scale-[1.01] dark:hover:bg-white/5"]])},[i("span",F,o(String.fromCharCode(65+r)),1),i("span",N,o(t),1)],10,D))),128))]),e.listeningAnswered?(l(),s("div",q,[e.listeningCorrect?(l(),s("p",M,o(c(te)("flashcard.listening.correct","✓ Correct!")),1)):(l(),s("p",O,o(c(te)("flashcard.listening.incorrect","✗ Correct answer:"))+" "+o(e.card?.word),1)),i("p",V,o(e.card?.meaning),1)])):g("",!0)])):(l(),s("div",Q,[i("input",{ref_key:"listeningInput",ref:U,value:e.listeningAnswer,onInput:Z,onKeyup:u($,["enter"]),type:"text",disabled:e.listeningAnswered,class:"w-full p-4 text-center text-lg sm:text-xl md:text-2xl border border-gray-300 dark:border-gray-600 rounded-lg bg-white dark:bg-gray-800 text-gray-900 dark:text-white focus:outline-none focus:ring-2 focus:ring-blue-500 select-text",placeholder:c(te)("flashcard.listening.placeholder","Type the word you hear..."),inputmode:"text",autocapitalize:"none",autocomplete:"off",spellcheck:"false",onBlur:Y},null,40,E),e.listeningAnswered?(l(),s("div",j,[e.listeningCorrect?(l(),s("p",B,o(c(te)("flashcard.listening.correct","✓ Correct!")),1)):(l(),s("p",L,o(c(te)("flashcard.listening.incorrect","✗ Correct answer:"))+" "+o(e.card?.word),1)),i("p",T,o(e.card?.meaning),1)])):g("",!0)]))]),d(c(W),{ref_key:"fireworkEffect",ref:R,"trigger-firework":H.value,"trigger-sound":K.value,"is-correct":P.value,onEffectComplete:ee},null,8,["trigger-firework","trigger-sound","is-correct"])],32))}}),[["__scopeId","data-v-849d04c0"]]);export{W as default};
