import{u as e,a}from"./ui-vendor-D-J_fEQ5.js";import{u as t}from"./useVocabularyStore-CJz0zgKu.js";import{a as o}from"./index-DmJNupMF.js";import{u as r}from"./voiceStore-o6lhlGgY.js";import{d as l,A as s,D as n,c as i,v as d,f as c,b as u,t as m,u as g,g as f,e as b,a3 as v}from"./vue-vendor-Bt65BSdi.js";const y={class:"bg-white/60 dark:bg-[#0a0a0a]/60 backdrop-blur-sm rounded-xl border border-white/20 dark:border-white/10 p-3 sm:p-4 md:p-5"},x={class:"flex items-center mb-3 sm:mb-4"},p={class:"text-sm sm:text-base font-semibold bg-gradient-to-r from-red-600 to-red-600 dark:from-red-400 dark:to-red-400 bg-clip-text text-transparent"},h={class:"flex flex-col space-y-3"},k={class:"text-xs sm:text-sm text-gray-600 dark:text-gray-300"},w={class:"flex flex-col sm:flex-row gap-2"},S={key:0,class:"fixed inset-0 z-[9999] flex items-center justify-center p-4","aria-labelledby":"modal-title",role:"dialog","aria-modal":"true"},A={class:"relative bg-white dark:bg-[#0a0a0a] rounded-lg shadow-xl w-full max-w-lg mx-auto border border-gray-200 dark:border-dark-bg-mute overflow-hidden p-6"},C={class:"sm:flex sm:items-start"},L={class:"mt-3 text-center sm:mt-0 sm:ml-4 sm:text-left"},j={class:"text-lg leading-6 font-medium text-gray-900 dark:text-white",id:"modal-title"},D={class:"mt-2"},B={class:"text-sm text-gray-500 dark:text-gray-300"},E={class:"mt-3 p-3 bg-red-50 dark:bg-red-900/20 rounded-md border border-red-200 dark:border-red-800"},T={class:"text-sm text-red-800 dark:text-red-300 font-medium"},M={class:"mt-5 sm:mt-4 sm:flex sm:flex-row-reverse"},V={key:0,class:"fixed inset-0 z-[9999] flex items-center justify-center p-4","aria-labelledby":"clear-local-store-modal-title",role:"dialog","aria-modal":"true"},z={class:"relative bg-white dark:bg-[#0a0a0a] rounded-lg shadow-xl w-full max-w-lg mx-auto border border-gray-200 dark:border-dark-bg-mute overflow-hidden p-6"},I={class:"sm:flex sm:items-start"},W={class:"mt-3 text-center sm:mt-0 sm:ml-4 sm:text-left"},H={class:"text-lg leading-6 font-medium text-gray-900 dark:text-white",id:"clear-local-store-modal-title"},P={class:"mt-2"},$={class:"text-sm text-gray-500 dark:text-gray-300"},F={class:"text-sm text-orange-600 dark:text-orange-400 mt-2 font-medium"},R={class:"mt-3 p-3 bg-orange-50 dark:bg-orange-900/20 rounded-md border border-orange-200 dark:border-orange-800"},G={class:"text-sm text-orange-800 dark:text-orange-300 font-medium"},N={class:"mt-5 sm:mt-4 sm:flex sm:flex-row-reverse"},_=l({__name:"DeleteAllVocabulariesPanel",props:{totalCount:{},autoSaveEnabled:{type:Boolean},useGrouping:{type:Boolean}},emits:["vocabularies-deleted","local-store-cleared"],setup(l,{emit:_}){const q=_,{t:J}=e(),U=a(),Y=t(),K=o(),O=r(),Q=s(!1),X=s(!1);n(Q,e=>{e?document.body.classList.add("modal-open"):document.body.classList.remove("modal-open")}),n(X,e=>{e?document.body.classList.add("modal-open"):document.body.classList.remove("modal-open")});const Z=()=>{try{Y.clearAllVocabularies(),Q.value=!1,U.success(J("vocabulary.deleteAll.success","All vocabulary words have been deleted successfully"),{timeout:3e3}),q("vocabularies-deleted"),console.log("All vocabularies deleted successfully")}catch(e){console.error("Error deleting all vocabularies:",e),U.error(J("vocabulary.deleteAll.error","Failed to delete all vocabularies. Please try again."),{timeout:5e3})}},ee=()=>{try{if(Y.clearAllVocabularies(),localStorage.clear(),sessionStorage.clear(),"indexedDB"in window)try{indexedDB.deleteDatabase("vocabulary-db"),indexedDB.deleteDatabase("practice-sessions-db"),indexedDB.deleteDatabase("user-settings-db"),console.log("IndexedDB databases deleted")}catch(e){console.log("IndexedDB not available or error deleting:",e)}document.cookie.split(";").forEach(function(e){document.cookie=e.replace(/^ +/,"").replace(/=.*/,"=;expires="+(new Date).toUTCString()+";path=/")}),"caches"in window&&caches.keys().then(function(e){for(let a of e)caches.delete(a)}),"cacheStorage"in window&&caches.keys().then(function(e){for(let a of e)caches.delete(a)}),"serviceWorker"in navigator&&navigator.serviceWorker.getRegistrations().then(function(e){for(let a of e)a.unregister()}),K.setTheme(!1);["female-sweet","female-clear","female-professional","male-strong","male-gentle","male-deep","korean-female","korean-male"].forEach(e=>O.resetVoiceSettings(e));["vocabulary-data","practice-sessions","user-settings","theme","voice-settings","accordion-state","hover-expand-enabled","auto-save-enabled","move-mode-enabled","grouping-enabled","last-save-time","save-status","google-drive-token","google-drive-refresh-token","google-drive-file-id","auto-save-file-path","vocabulary-notes","grammar-rules","user-preferences","app-settings","vocabulary-filters","search-history","recent-searches","favorite-words","learning-progress","daily-targets","study-sessions","vocabulary-categories","topic-groups","date-grouping","pagination-settings","sort-preferences","display-options","accessibility-settings","performance-settings","debug-settings","error-logs","analytics-data","user-activity","session-data","cache-data","temp-data","backup-data","sync-data","offline-data","pending-changes","auto-save-queue","undo-redo-stack","clipboard-data","drag-drop-state","modal-state","tooltip-state","notification-state","loading-state","error-state","success-state","warning-state","info-state"].forEach(e=>{try{localStorage.removeItem(e),sessionStorage.removeItem(e)}catch(a){console.log(`Error removing key ${e}:`,a)}});let t=localStorage.length;for(;t>0;)try{const e=localStorage.key(0);e&&localStorage.removeItem(e),t=localStorage.length}catch(a){console.log("Error removing dynamic localStorage key:",a);break}let o=sessionStorage.length;for(;o>0;)try{const e=sessionStorage.key(0);e&&sessionStorage.removeItem(e),o=sessionStorage.length}catch(a){console.log("Error removing dynamic sessionStorage key:",a);break}try{localStorage.clear(),sessionStorage.clear()}catch(a){console.log("Error in final clear:",a)}if("gc"in window)try{window.gc()}catch(a){console.log("Garbage collection not available")}X.value=!1,U.success(J("vocabulary.deleteAll.clearLocalStoreSuccess","All local store data has been cleared successfully"),{timeout:3e3}),q("local-store-cleared"),console.log("Local store data cleared successfully - 100% complete"),setTimeout(()=>{const e=localStorage.length,t=sessionStorage.length;if(e>0||t>0){console.log(`Warning: ${e} localStorage items and ${t} sessionStorage items remain`);try{localStorage.clear(),sessionStorage.clear()}catch(a){console.log("Final clear attempt failed:",a)}}console.log("Reloading page to ensure complete reset..."),window.location.reload()},1500)}catch(t){console.error("Error clearing local store data:",t),U.error(J("vocabulary.deleteAll.clearLocalStoreError","Failed to clear local store data. Please try again."),{timeout:5e3})}};return(e,a)=>(d(),i("div",y,[c("div",x,[a[4]||(a[4]=c("div",{class:"animate-pulse-slow"},[c("div",{class:"w-2.5 h-2.5 bg-gradient-to-r from-red-400 to-red-500 rounded-full mr-2.5"})],-1)),c("h3",p,m(g(J)("vocabulary.deleteAll.title","Delete All Vocabularies")),1)]),c("div",h,[c("p",k,m(g(J)("vocabulary.deleteAll.description","This will permanently delete all vocabulary words from your collection. This action cannot be undone.")),1),c("div",w,[c("button",{onClick:a[0]||(a[0]=e=>Q.value=!0),class:"inline-flex items-center justify-center px-2 py-1.5 sm:px-3 sm:py-2 text-xs font-medium text-white bg-red-600 hover:bg-red-700 dark:bg-red-500 dark:hover:bg-red-600 rounded-md transition-colors duration-200 focus:outline-none focus:ring-2 focus:ring-red-500 focus:ring-offset-2 dark:focus:ring-offset-[#0a0a0a] w-fit"},[a[5]||(a[5]=c("svg",{class:"w-3 h-3 mr-1.5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[c("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M19 7l-.867 12.142A2 2 0 0116.138 21H7.862a2 2 0 01-1.995-1.858L5 7m5 4v6m4-6v6m1-10V4a1 1 0 00-1-1h-4a1 1 0 00-1 1v3M4 7h16"})],-1)),f(" "+m(g(J)("vocabulary.deleteAll.button","Delete All Vocabularies")),1)]),c("button",{onClick:a[1]||(a[1]=e=>X.value=!0),class:"inline-flex items-center justify-center px-2 py-1.5 sm:px-3 sm:py-2 text-xs font-medium text-white bg-orange-600 hover:bg-orange-700 dark:bg-orange-500 dark:hover:bg-orange-600 rounded-md transition-colors duration-200 focus:outline-none focus:ring-2 focus:ring-orange-500 focus:ring-offset-2 dark:focus:ring-offset-[#0a0a0a] w-fit"},[a[6]||(a[6]=c("svg",{class:"w-3 h-3 mr-1.5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[c("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M19 7l-.867 12.142A2 2 0 0116.138 21H7.862a2 2 0 01-1.995-1.858L5 7m5 4v6m4-6v6m1-10V4a1 1 0 00-1-1h-4a1 1 0 00-1 1v3M4 7h16"})],-1)),f(" "+m(g(J)("vocabulary.deleteAll.clearLocalStore","Clear Local Store")),1)])])]),(d(),u(v,{to:"body"},[Q.value?(d(),i("div",S,[a[8]||(a[8]=c("div",{class:"fixed inset-0 bg-black bg-opacity-50 backdrop-blur-sm transition-opacity","aria-hidden":"true"},null,-1)),c("div",A,[c("div",C,[a[7]||(a[7]=c("div",{class:"mx-auto flex-shrink-0 flex items-center justify-center h-12 w-12 rounded-full bg-red-100 dark:bg-red-900/30 sm:mx-0 sm:h-10 sm:w-10"},[c("svg",{class:"h-6 w-6 text-red-600 dark:text-red-400",fill:"none",viewBox:"0 0 24 24","stroke-width":"1.5",stroke:"currentColor"},[c("path",{"stroke-linecap":"round","stroke-linejoin":"round",d:"M12 9v3.75m-9.303 3.376c-.866 1.5.217 3.374 1.948 3.374h14.71c1.73 0 2.813-1.874 1.948-3.374L13.949 3.378c-.866-1.5-3.032-1.5-3.898 0L2.697 16.126zM12 15.75h.007v.008H12v-.008z"})])],-1)),c("div",L,[c("h3",j,m(g(J)("vocabulary.deleteAll.confirmTitle","Delete All Vocabularies")),1),c("div",D,[c("p",B,m(g(J)("vocabulary.deleteAll.confirmMessage","Are you sure you want to delete all vocabulary words? This action cannot be undone and will permanently remove all your saved words.")),1),c("div",E,[c("p",T,m(g(J)("vocabulary.deleteAll.warningCount",{count:e.totalCount},`You are about to delete ${e.totalCount} vocabulary words.`)),1)])])])]),c("div",M,[c("button",{onClick:Z,type:"button",class:"w-full inline-flex justify-center rounded-md border border-transparent shadow-sm px-4 py-2 bg-red-600 text-base font-medium text-white hover:bg-red-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-red-500 dark:focus:ring-offset-[#0a0a0a] sm:ml-3 sm:w-auto sm:text-sm transition-colors duration-200"},m(g(J)("vocabulary.deleteAll.confirm","Delete All")),1),c("button",{onClick:a[2]||(a[2]=e=>Q.value=!1),type:"button",class:"mt-3 w-full inline-flex justify-center rounded-md border border-gray-300 dark:border-dark-bg-mute shadow-sm px-4 py-2 bg-white dark:bg-dark-bg-soft text-base font-medium text-gray-700 dark:text-gray-300 hover:bg-gray-50 dark:hover:bg-dark-bg-mute focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-indigo-500 dark:focus:ring-offset-[#0a0a0a] sm:mt-0 sm:w-auto sm:text-sm transition-colors duration-200"},m(g(J)("common.cancel","Cancel")),1)])])])):b("",!0)])),(d(),u(v,{to:"body"},[X.value?(d(),i("div",V,[a[10]||(a[10]=c("div",{class:"fixed inset-0 bg-black bg-opacity-50 backdrop-blur-sm transition-opacity","aria-hidden":"true"},null,-1)),c("div",z,[c("div",I,[a[9]||(a[9]=c("div",{class:"mx-auto flex-shrink-0 flex items-center justify-center h-12 w-12 rounded-full bg-orange-100 dark:bg-orange-900/30 sm:mx-0 sm:h-10 sm:w-10"},[c("svg",{class:"h-6 w-6 text-orange-600 dark:text-orange-400",fill:"none",viewBox:"0 0 24 24","stroke-width":"1.5",stroke:"currentColor"},[c("path",{"stroke-linecap":"round","stroke-linejoin":"round",d:"M12 9v3.75m-9.303 3.376c-.866 1.5.217 3.374 1.948 3.374h14.71c1.73 0 2.813-1.874 1.948-3.374L13.949 3.378c-.866-1.5-3.032-1.5-3.898 0L2.697 16.126zM12 15.75h.007v.008H12v-.008z"})])],-1)),c("div",W,[c("h3",H,m(g(J)("vocabulary.deleteAll.clearLocalStoreTitle","Clear Local Store Data")),1),c("div",P,[c("p",$,m(g(J)("vocabulary.deleteAll.clearLocalStoreMessage","This will clear all data stored in your browser's local storage, including vocabulary words, practice sessions, and user preferences. This action cannot be undone.")),1),c("p",F,m(g(J)("vocabulary.deleteAll.pageReloadNotice","Note: Page will automatically reload after clearing to ensure complete reset.")),1),c("div",R,[c("p",G,m(g(J)("vocabulary.deleteAll.clearLocalStoreWarning","Warning: This will remove all locally stored data and reset the application to its initial state.")),1)])])])]),c("div",N,[c("button",{onClick:ee,type:"button",class:"w-full inline-flex justify-center rounded-md border border-transparent shadow-sm px-4 py-2 bg-orange-600 text-base font-medium text-white hover:bg-orange-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-orange-500 dark:focus:ring-offset-[#0a0a0a] sm:ml-3 sm:w-auto sm:text-sm transition-colors duration-200"},m(g(J)("vocabulary.deleteAll.clearLocalStoreConfirm","Clear All Data")),1),c("button",{onClick:a[3]||(a[3]=e=>X.value=!1),type:"button",class:"mt-3 w-full inline-flex justify-center rounded-md border border-gray-300 dark:border-dark-bg-mute shadow-sm px-4 py-2 bg-white dark:bg-dark-bg-soft text-base font-medium text-gray-700 dark:text-gray-300 hover:bg-gray-50 dark:hover:bg-dark-bg-mute focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-indigo-500 dark:focus:ring-offset-[#0a0a0a] sm:mt-0 sm:w-auto sm:text-sm transition-colors duration-200"},m(g(J)("common.cancel","Cancel")),1)])])])):b("",!0)]))]))}});export{_ as default};
