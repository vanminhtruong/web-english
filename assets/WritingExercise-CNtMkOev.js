import{d as e,A as r,C as t,I as a,J as s,c as i,v as l,f as n,e as o,t as c,F as d,j as m,M as u,n as g,_ as x}from"./vue-vendor-Bt65BSdi.js";import{u as v}from"./ui-vendor-D-J_fEQ5.js";const p={class:"bg-white dark:bg-[#0a0a0a] rounded-xl shadow-lg border border-gray-200 dark:border-white/10 p-6"},h={class:"mb-8"},k={class:"text-lg font-semibold text-gray-900 dark:text-white mb-4"},b={class:"bg-blue-50 dark:bg-blue-900/30 border border-blue-200 dark:border-blue-700 rounded-lg p-4 mb-6"},w={class:"flex items-start space-x-3"},y={class:"font-medium text-blue-800 dark:text-blue-200 mb-2"},f={class:"text-blue-700 dark:text-blue-300 text-sm"},q={key:0,class:"mb-6"},M={class:"text-sm font-medium text-gray-700 dark:text-white/70 mb-2"},C={class:"space-y-1"},j={class:"flex items-center space-x-6 text-sm text-gray-600 dark:text-white/60 mb-4"},W={key:0,class:"flex items-center space-x-1"},S={key:1,class:"flex items-center space-x-1"},T={class:"mb-6"},L={class:"flex items-center justify-between mb-4"},z={class:"text-lg font-medium text-gray-900 dark:text-white"},I={class:"flex items-center space-x-4 text-sm"},V={class:"flex items-center space-x-1"},B={class:"text-gray-500 dark:text-white/60"},P={key:0,class:"text-gray-400 dark:text-white/50"},A={key:0,class:"flex items-center space-x-1"},R={class:"text-gray-500 dark:text-white/60"},E=["disabled","placeholder"],F={class:"mt-4 text-sm text-gray-600 dark:text-white/60"},H={key:0,class:"mt-2 p-3 bg-yellow-50 dark:bg-yellow-900/30 border border-yellow-200 dark:border-yellow-700 rounded-lg"},U={class:"space-y-1"},$={key:0,class:"mb-6"},Q={class:"text-lg font-medium text-gray-900 dark:text-white mb-4"},_={class:"bg-gradient-to-r from-blue-50 to-purple-50 dark:from-blue-900/30 dark:to-purple-900/30 border border-blue-200 dark:border-blue-700 rounded-lg p-4 mb-4"},D={class:"flex items-center justify-between"},G={class:"font-medium text-gray-900 dark:text-white"},J={class:"text-2xl font-bold text-blue-600 dark:text-blue-400"},N={class:"grid grid-cols-2 md:grid-cols-4 gap-4 mt-4"},O={class:"text-center"},Y={class:"text-lg font-semibold text-gray-900 dark:text-white"},K={class:"text-xs text-gray-600 dark:text-white/60"},X={class:"text-center"},Z={class:"text-lg font-semibold text-gray-900 dark:text-white"},ee={class:"text-xs text-gray-600 dark:text-white/60"},re={class:"text-center"},te={class:"text-lg font-semibold text-gray-900 dark:text-white"},ae={class:"text-xs text-gray-600 dark:text-white/60"},se={class:"text-center"},ie={class:"text-lg font-semibold text-gray-900 dark:text-white"},le={class:"text-xs text-gray-600 dark:text-white/60"},ne={class:"space-y-4"},oe={key:0,class:"p-4 bg-green-50 dark:bg-green-900/30 border border-green-200 dark:border-green-700 rounded-lg"},ce={class:"font-medium text-green-800 dark:text-green-200 mb-2"},de={class:"space-y-1"},me={key:1,class:"p-4 bg-orange-50 dark:bg-orange-900/30 border border-orange-200 dark:border-orange-700 rounded-lg"},ue={class:"font-medium text-orange-800 dark:text-orange-200 mb-2"},ge={class:"space-y-1"},xe={key:2,class:"p-4 bg-red-50 dark:bg-red-900/30 border border-red-200 dark:border-red-700 rounded-lg"},ve={class:"font-medium text-red-800 dark:text-red-200 mb-2"},pe={class:"space-y-2"},he={class:"text-red-700 dark:text-red-300"},ke={class:"text-green-700 dark:text-green-300"},be={key:0,class:"text-gray-600 dark:text-white/60 text-xs mt-1"},we={class:"flex justify-between items-center"},ye={class:"flex space-x-4"},fe={class:"flex space-x-4"},qe=["disabled"],Me=e({__name:"WritingExercise",props:{question:{},questionIndex:{},totalQuestions:{}},emits:["answer","next","complete"],setup(e,{emit:Me}){const{t:Ce}=v(),je=(e,r,t)=>{const a=t?Ce(e,t):Ce(e),s="string"==typeof a?a:String(a);return s===e?r:s},We=e,Se=Me,Te=r(""),Le=r(0),ze=r(0),Ie=r(!1),Ve=r(!1),Be=r(!1),Pe=r(!1),Ae=r(null),Re=r(null),Ee=t(()=>Te.value.trim().length>0&&Le.value>=(We.question.minWords||0)&&!Ie.value&&!Be.value),Fe=t(()=>[je("grammar.practice.exercises.writing.tip1","Plan your structure before writing."),je("grammar.practice.exercises.writing.tip2","Use clear and concise sentences."),je("grammar.practice.exercises.writing.tip3","Vary vocabulary and sentence patterns."),je("grammar.practice.exercises.writing.tip4","Check grammar and punctuation."),je("grammar.practice.exercises.writing.tip5","Review and edit your response.")]),He=()=>{Le.value=Te.value.trim().split(/\s+/).filter(e=>e.length>0).length},Ue=()=>{switch(We.question.taskType){case"essay":return je("grammar.practice.exercises.writing.essayPlaceholder","Write your essay here...");case"email":return je("grammar.practice.exercises.writing.emailPlaceholder","Write your email here...");case"letter":return je("grammar.practice.exercises.writing.letterPlaceholder","Write your letter here...");default:return je("grammar.practice.exercises.writing.paragraphPlaceholder","Write your paragraph here...")}},$e=()=>{We.question.timeLimit&&(ze.value=60*We.question.timeLimit,Ae.value=setInterval(()=>{ze.value--,ze.value<=0&&(Ie.value=!0,Qe(),Ve.value||Ge())},1e3))},Qe=()=>{Ae.value&&(clearInterval(Ae.value),Ae.value=null)},_e=()=>{const e=`writing-draft-${We.question.id}`;localStorage.setItem(e,Te.value),console.log("Draft saved!")},De=()=>{confirm(Ce("grammar.practice.exercises.writing.confirmClear","Clear all text?"))&&(Te.value="",Le.value=0)},Ge=async()=>{Be.value=!0,Qe();try{await new Promise(e=>setTimeout(e,3e3));const e={overallScore:Math.floor(30*Math.random())+70,grammar:Math.floor(30*Math.random())+70,vocabulary:Math.floor(30*Math.random())+70,coherence:Math.floor(30*Math.random())+70,taskResponse:Math.floor(30*Math.random())+70,strengths:["Good use of complex sentence structures","Clear organization of ideas","Appropriate vocabulary for the task"],improvements:["Work on paragraph transitions","Use more varied sentence beginnings","Expand on supporting details"],corrections:[{original:"This is very good",corrected:"This is excellent",explanation:"Use more precise adjectives for better impact"}]};Re.value=e,Ve.value=!0;const r=e.overallScore;Se("answer",{isCorrect:r>=70,score:r,text:Te.value})}catch(e){console.error("Error analyzing writing:",e)}finally{Be.value=!1}},Je=()=>{We.questionIndex===We.totalQuestions-1?Se("complete"):(Ne(),Se("next"))},Ne=()=>{Te.value="",Le.value=0,Ie.value=!1,Ve.value=!1,Be.value=!1,Pe.value=!1,Re.value=null,Qe(),$e()};return a(()=>{$e(),(()=>{const e=`writing-draft-${We.question.id}`,r=localStorage.getItem(e);r&&(Te.value=r,He())})()}),s(()=>{Qe()}),(e,r)=>{return l(),i("div",p,[n("div",h,[n("h3",k,c(je("grammar.practice.exercises.writing.instruction","Follow the writing instructions")),1),n("div",b,[n("div",w,[r[2]||(r[2]=n("div",{class:"w-6 h-6 bg-blue-600 rounded-full flex items-center justify-center flex-shrink-0 mt-1"},[n("svg",{class:"w-4 h-4 text-white",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[n("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M13 16h-1v-4h-1m1-4h.01M21 12a9 9 0 11-18 0 9 9 0 0118 0z"})])],-1)),n("div",null,[n("h4",y,c("essay"===e.question.taskType?je("grammar.practice.exercises.writing.essay","Essay"):"email"===e.question.taskType?je("grammar.practice.exercises.writing.email","Email"):"letter"===e.question.taskType?je("grammar.practice.exercises.writing.letter","Letter"):je("grammar.practice.exercises.writing.paragraph","Paragraph")),1),n("p",f,c(e.question.prompt),1)])])]),e.question.requirements&&e.question.requirements.length>0?(l(),i("div",q,[n("h4",M,c(je("grammar.practice.exercises.writing.requirements","Requirements")),1),n("ul",C,[(l(!0),i(d,null,m(e.question.requirements,e=>(l(),i("li",{key:e,class:"flex items-start space-x-2 text-sm text-gray-600 dark:text-white/60"},[r[3]||(r[3]=n("svg",{class:"w-4 h-4 text-green-600 dark:text-green-400 mt-0.5 flex-shrink-0",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[n("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M5 13l4 4L19 7"})],-1)),n("span",null,c(e),1)]))),128))])])):o("",!0),n("div",j,[e.question.minWords?(l(),i("div",W,[r[4]||(r[4]=n("svg",{class:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[n("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M9 12h6m-6 4h6m2 5H7a2 2 0 01-2-2V5a2 2 0 012-2h5.586a1 1 0 01.707.293l5.414 5.414a1 1 0 01.293.707V19a2 2 0 01-2 2z"})],-1)),n("span",null,c(je("grammar.practice.exercises.writing.minWords","Min words"))+": "+c(e.question.minWords),1)])):o("",!0),e.question.timeLimit?(l(),i("div",S,[r[5]||(r[5]=n("svg",{class:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[n("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M12 8v4l3 3m6-3a9 9 0 11-18 0 9 9 0 0118 0z"})],-1)),n("span",null,c(je("grammar.practice.exercises.writing.timeLimit","Time limit"))+": "+c(e.question.timeLimit)+" "+c(je("common.minutes","minutes")),1)])):o("",!0)])]),n("div",T,[n("div",L,[n("h4",z,c(je("grammar.practice.exercises.writing.yourResponse","Your response")),1),n("div",I,[n("div",V,[n("span",B,c(je("grammar.practice.exercises.writing.words","Words"))+":",1),n("span",{class:g(["font-medium",Le.value>=(e.question.minWords||0)?"text-green-600 dark:text-green-400":"text-orange-600 dark:text-orange-400"])},c(Le.value),3),e.question.minWords?(l(),i("span",P," / "+c(e.question.minWords),1)):o("",!0)]),e.question.timeLimit?(l(),i("div",A,[n("span",R,c(je("grammar.practice.exercises.writing.timeLeft","Time left"))+":",1),n("span",{class:g(["font-medium font-mono",ze.value<=300?"text-red-600 dark:text-red-400":"text-blue-600 dark:text-blue-400"])},c((t=ze.value,`${Math.floor(t/60)}:${(t%60).toString().padStart(2,"0")}`)),3)])):o("",!0)])]),u(n("textarea",{"onUpdate:modelValue":r[0]||(r[0]=e=>Te.value=e),disabled:Ie.value||Ve.value,placeholder:Ue(),class:"w-full h-80 px-4 py-3 border border-gray-300 dark:border-white/10 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent bg-white dark:bg-[#0a0a0a] text-gray-900 dark:text-white resize-none disabled:bg-gray-100 dark:disabled:bg-white/5 disabled:cursor-not-allowed",onInput:He},null,40,E),[[x,Te.value]]),n("div",F,[n("button",{onClick:r[1]||(r[1]=e=>Pe.value=!Pe.value),class:"flex items-center space-x-1 hover:text-gray-800 dark:hover:text-white/80 transition-colors"},[r[6]||(r[6]=n("svg",{class:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[n("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M9.663 17h4.673M12 3v1m6.364 1.636l-.707.707M21 12h-1M4 12H3m3.343-5.657l-.707-.707m2.828 9.9a5 5 0 117.072 0l-.548.547A3.374 3.374 0 0014 18.469V19a2 2 0 11-4 0v-.531c0-.895-.356-1.754-.988-2.386l-.548-.547z"})],-1)),n("span",null,c(je("grammar.practice.exercises.writing.tips","Tips")),1)]),Pe.value?(l(),i("div",H,[n("ul",U,[(l(!0),i(d,null,m(Fe.value,e=>(l(),i("li",{key:e,class:"text-yellow-800 dark:text-yellow-200"}," • "+c(e),1))),128))])])):o("",!0)])]),Ve.value&&Re.value?(l(),i("div",$,[n("h4",Q,c(je("grammar.practice.exercises.writing.feedback","Feedback")),1),n("div",_,[n("div",D,[n("h5",G,c(je("grammar.practice.exercises.writing.overallScore","Overall score")),1),n("div",J,c(Re.value.overallScore)+"/100 ",1)]),n("div",N,[n("div",O,[n("div",Y,c(Re.value.grammar),1),n("div",K,c(je("grammar.practice.exercises.writing.grammar","Grammar")),1)]),n("div",X,[n("div",Z,c(Re.value.vocabulary),1),n("div",ee,c(je("grammar.practice.exercises.writing.vocabulary","Vocabulary")),1)]),n("div",re,[n("div",te,c(Re.value.coherence),1),n("div",ae,c(je("grammar.practice.exercises.writing.coherence","Coherence")),1)]),n("div",se,[n("div",ie,c(Re.value.taskResponse),1),n("div",le,c(je("grammar.practice.exercises.writing.taskResponse","Task response")),1)])])]),n("div",ne,[Re.value.strengths.length>0?(l(),i("div",oe,[n("h6",ce,c(je("grammar.practice.exercises.writing.strengths","Strengths")),1),n("ul",de,[(l(!0),i(d,null,m(Re.value.strengths,e=>(l(),i("li",{key:e,class:"text-green-700 dark:text-green-300 text-sm"}," ✓ "+c(e),1))),128))])])):o("",!0),Re.value.improvements.length>0?(l(),i("div",me,[n("h6",ue,c(je("grammar.practice.exercises.writing.improvements","Areas for improvement")),1),n("ul",ge,[(l(!0),i(d,null,m(Re.value.improvements,e=>(l(),i("li",{key:e,class:"text-orange-700 dark:text-orange-300 text-sm"}," → "+c(e),1))),128))])])):o("",!0),Re.value.corrections.length>0?(l(),i("div",xe,[n("h6",ve,c(je("grammar.practice.exercises.writing.corrections","Corrections")),1),n("div",pe,[(l(!0),i(d,null,m(Re.value.corrections,e=>(l(),i("div",{key:e.original,class:"text-sm"},[n("div",he," ❌ "+c(e.original),1),n("div",ke," ✅ "+c(e.corrected),1),e.explanation?(l(),i("div",be,c(e.explanation),1)):o("",!0)]))),128))])])):o("",!0)])])):o("",!0),n("div",we,[n("div",ye,[!Ve.value&&Te.value.trim()?(l(),i("button",{key:0,onClick:_e,class:"flex items-center space-x-2 px-4 py-2 text-sm text-gray-600 dark:text-gray-400 hover:text-gray-800 dark:hover:text-gray-200 transition-colors"},[r[7]||(r[7]=n("svg",{class:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[n("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M8 7H5a2 2 0 00-2 2v9a2 2 0 002 2h14a2 2 0 002-2V9a2 2 0 00-2-2h-3m-1 4l-3-3m0 0l-3 3m3-3v12"})],-1)),n("span",null,c(je("grammar.practice.exercises.writing.saveDraft","Save draft")),1)])):o("",!0),!Ve.value&&Te.value.trim()?(l(),i("button",{key:1,onClick:De,class:"flex items-center space-x-2 px-4 py-2 text-sm text-red-600 dark:text-red-400 hover:text-red-700 dark:hover:text-red-300 transition-colors"},[r[8]||(r[8]=n("svg",{class:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[n("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M19 7l-.867 12.142A2 2 0 0116.138 21H7.862a2 2 0 01-1.995-1.858L5 7m5 4v6m4-6v6m1-10V4a1 1 0 00-1-1h-4a1 1 0 00-1 1v3M4 7h16"})],-1)),n("span",null,c(je("grammar.practice.exercises.writing.clear","Clear")),1)])):o("",!0)]),n("div",fe,[Ve.value?(l(),i("button",{key:1,onClick:Je,class:"px-6 py-2 bg-green-600 text-white rounded-lg hover:bg-green-700 transition-colors"},c(e.questionIndex===e.totalQuestions-1?je("grammar.practice.finish","Finish"):je("grammar.practice.next","Next")),1)):(l(),i("button",{key:0,onClick:Ge,disabled:!Ee.value,class:"px-6 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700 disabled:bg-gray-400 disabled:cursor-not-allowed transition-colors"},c(Be.value?je("grammar.practice.exercises.writing.analyzing","Analyzing..."):je("grammar.practice.exercises.writing.submit","Submit for review")),9,qe))])])]);var t}}});export{Me as default};
