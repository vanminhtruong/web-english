import{d as e,A as t,C as r,I as a,D as l,c as s,v as o,f as n,e as d,t as u,u as x,F as p,j as c,n as i,M as m,_ as f,g,i as h,q as b}from"./vue-vendor-Bt65BSdi.js";import{u as v}from"./ui-vendor-D-J_fEQ5.js";import{_ as y}from"./_plugin-vue_export-helper-BCo6x5W8.js";const w={class:"mb-1"},k={class:"px-2 py-1 bg-purple-100 dark:bg-dark-bg-mute text-purple-800 dark:text-purple-300 text-xs font-medium rounded-full"},C={class:"text-lg sm:text-xl md:text-2xl xl:text-xl 2xl:text-2xl font-bold text-purple-900 dark:text-purple-300 mb-1 px-1 text-center"},I={class:"text-xs sm:text-sm xl:text-sm 2xl:text-sm text-gray-600 dark:text-white/70 mb-1 max-w-sm px-1 text-center"},M={class:"text-center mb-2"},_={class:"text-sm sm:text-base md:text-lg xl:text-base 2xl:text-lg text-gray-500 dark:text-white/70 break-words px-1"},j={class:"text-xs sm:text-sm text-gray-400 dark:text-white/60 mt-1"},A={class:"flex flex-wrap justify-center gap-1 sm:gap-1.5 mb-2 px-2 max-w-full"},z=["onUpdate:modelValue","onInput","onKeydown"],E={key:1,class:"uppercase text-purple-700 dark:text-purple-300"},L={key:2,class:"uppercase text-yellow-600 dark:text-yellow-400"},V={key:1,class:"w-2 sm:w-3"},W={class:"mb-0.5 xl:mb-0.5 2xl:mb-1"},F={class:"flex flex-wrap justify-center gap-2 px-1 mb-2"},T=["disabled"],B={key:0,class:"px-1 text-center mt-0.5 xl:mt-0 2xl:mt-0.5 bg-gray-50 dark:bg-dark-bg-soft rounded py-1 xl:py-0.5 2xl:py-1"},H={key:0,class:"text-sm sm:text-base xl:text-base 2xl:text-lg font-bold text-green-600 dark:text-green-400 mb-0.5 xl:mb-0.5 2xl:mb-1"},K={key:1,class:"text-sm sm:text-base xl:text-base 2xl:text-lg font-bold text-red-600 dark:text-red-400 mb-0.5 xl:mb-0.5 2xl:mb-1"},N={class:"space-y-0.5 xl:space-y-0 2xl:space-y-0.5 border-t border-gray-200 dark:border-dark-bg-mute pt-0.5 xl:pt-0 2xl:pt-0.5"},S={class:"text-sm xl:text-sm 2xl:text-base text-gray-700 dark:text-white/80"},U={class:"font-semibold"},q={class:"font-bold text-blue-600 dark:text-blue-400"},D={class:"text-sm xl:text-sm 2xl:text-base text-gray-700 dark:text-white/80"},P={class:"font-semibold"},R={class:"font-medium text-gray-900 dark:text-white"},Z=y(e({__name:"WordsCrushMode",props:{card:{},getTopicName:{type:Function}},emits:["game-completed","play-audio"],setup(e,{emit:y}){const Z=e,$=y,{t:G}=v(),J=t([]),O=t(!1),Q=t(!1),X=t(0),Y=t([]),ee=r(()=>J.value.filter(e=>!e.separator&&!e.filled).every(e=>""!==e.userInput.trim())),te=()=>{Z.card?.word&&(J.value=(()=>{if(!Z.card?.word)return[];const e=Z.card.word.toLowerCase(),t=[];for(let d=0;d<e.length;d++){const r=e[d];" "===r?t.push({char:" ",separator:!0,filled:!1,userInput:"",correct:!1,incorrect:!1,revealed:!1}):t.push({char:r,separator:!1,filled:!1,userInput:"",correct:!1,incorrect:!1,revealed:!1})}const r=t.filter(e=>!e.separator),a=Math.ceil(.5*r.length),l=[];for(;l.length<a;){const e=Math.floor(Math.random()*r.length),a=t.findIndex(t=>t===r[e]);l.includes(a)||l.push(a)}const s=[];t.forEach((e,t)=>{e.separator||l.includes(t)||s.push(t)});const o=[...s.map(e=>t[e].char)].sort(()=>Math.random()-.5);let n=0;return t.forEach((e,t)=>{e.separator||l.includes(t)||(e.filled=!0,e.userInput=o[n],n++)}),t})(),O.value=!1,Q.value=!1,X.value=0,Y.value=[])},re=()=>{if(!ee.value)return;let e=!0;J.value.forEach(t=>{if(!t.separator&&!t.filled){const r=t.userInput.toLowerCase()===t.char.toLowerCase();t.correct=r,t.incorrect=!r,r||(e=!1)}}),O.value=!0,Q.value=e,$("game-completed",e)},ae=()=>{if(X.value>=2)return;const e=J.value.filter(e=>!e.separator&&!e.filled&&""===e.userInput);if(0===e.length)return;const t=e[Math.floor(Math.random()*e.length)];t.revealed=!0,t.userInput=t.char,X.value++},le=()=>{te()},se=()=>{Z.card?.word&&$("play-audio","vocabulary",Z.card.word)};return a(()=>{te()}),l(()=>Z.card,()=>{te()},{deep:!0}),(e,t)=>(o(),s("div",{class:"text-center w-full h-full flex flex-col justify-center items-center gap-1 sm:gap-2 p-2 sm:p-3 md:p-4 xl:p-3 2xl:p-4 overflow-hidden",onCopy:t[0]||(t[0]=h(()=>{},["prevent"])),onCut:t[1]||(t[1]=h(()=>{},["prevent"])),onContextmenu:t[2]||(t[2]=h(()=>{},["prevent"]))},[n("div",w,[n("span",k,u(e.card?.category?e.getTopicName(e.card.category):""),1)]),n("h2",C,u(x(G)("flashcard.pronunciation.wordsCrush.title","Words Crush: Anagram Challenge")),1),n("p",I,u(x(G)("flashcard.pronunciation.wordsCrush.instruction","Fill in the missing letters to complete the word")),1),n("div",M,[n("p",_,u(e.card?.pronunciation),1),n("p",j,u(e.card?.meaning),1)]),n("div",A,[(o(!0),s(p,null,c(J.value,(e,t)=>(o(),s("div",{key:t,class:"relative"},[e.separator?(o(),s("div",V)):(o(),s("div",{key:0,class:i(["w-8 h-8 sm:w-10 sm:h-10 md:w-12 md:h-12 xl:w-10 xl:h-10 2xl:w-11 2xl:h-11 border-2 border-purple-300 dark:border-purple-600 rounded-lg flex items-center justify-center text-sm sm:text-lg md:text-xl xl:text-lg 2xl:text-xl font-bold transition-all duration-200",{"border-green-500 bg-green-50 dark:bg-green-900/20":e.correct,"border-red-500 bg-red-50 dark:bg-red-900/20":e.incorrect,"bg-white dark:bg-dark-bg":!e.correct&&!e.incorrect&&!e.filled,"bg-purple-50 dark:bg-purple-900/20 border-purple-500":e.filled,"bg-yellow-50 dark:bg-yellow-900/20 border-yellow-400":e.revealed&&!O.value}])},[e.filled||e.revealed?e.filled?(o(),s("span",E,u(e.char),1)):(o(),s("span",L,u(e.char),1)):m((o(),s("input",{key:0,"onUpdate:modelValue":t=>e.userInput=t,onInput:e=>((e,t)=>{const r=t.target,a=r.value.toLowerCase();if(a&&/^[a-zA-Z]$/.test(a)){J.value[e].userInput=a;const t=J.value.findIndex((t,r)=>r>e&&!t.separator&&!t.filled&&""===t.userInput);-1!==t&&Y.value[t]&&b(()=>{Y.value[t].focus()})}else""===a||(r.value=""),J.value[e].userInput=""})(t,e),onKeydown:e=>((e,t)=>{if("Backspace"===t.key&&""===J.value[e].userInput){if(-1!==J.value.findIndex((t,r)=>r<e&&!t.separator&&!t.filled)){const t=[...J.value].reverse().findIndex((t,r)=>J.value.length-1-r<e&&!t.separator&&!t.filled);if(-1!==t){const e=J.value.length-1-t;Y.value[e]&&b(()=>{Y.value[e].focus()})}}}else"Enter"===t.key&&re()})(t,e),type:"text",maxlength:"1",class:"w-full h-full bg-transparent text-center text-sm sm:text-lg md:text-xl xl:text-lg 2xl:text-xl font-bold uppercase border-none outline-none text-gray-900 dark:text-white placeholder-gray-400 dark:placeholder-gray-500",ref_for:!0,ref:"letterInput",placeholder:"?"},null,40,z)),[[f,e.userInput]])],2))]))),128))]),n("div",W,[n("button",{onClick:se,class:"px-2 py-0.5 md:px-3 md:py-1 xl:px-3 xl:py-1 2xl:px-3 2xl:py-1 text-xs sm:text-sm xl:text-sm 2xl:text-sm bg-blue-600 hover:bg-blue-700 dark:bg-blue-700 dark:hover:bg-blue-800 text-white rounded font-medium transition-colors flex items-center gap-1"},[t[3]||(t[3]=n("svg",{class:"w-3 h-3 xl:w-3 xl:h-3 2xl:w-3 2xl:h-3",fill:"currentColor",viewBox:"0 0 20 20"},[n("path",{"fill-rule":"evenodd",d:"M9.383 3.076A1 1 0 0110 4v12a1 1 0 01-1.617.773l-4.146-3.382a.5.5 0 00-.319-.118H2a1 1 0 01-1-1V8a1 1 0 011-1h1.918a.5.5 0 00.319-.118l4.146-3.382zM14 5a1 1 0 011 1v8a1 1 0 11-2 0V6a1 1 0 011-1zm2.025 1.13a1 1 0 011.414.057 7 7 0 010 9.816 1 1 0 11-1.471-1.358 5 5 0 000-7.1 1 1 0 01.057-1.415zM16.5 8.5a1 1 0 011 1v1a1 1 0 11-2 0v-1a1 1 0 011-1z","clip-rule":"evenodd"})],-1)),g(" "+u(x(G)("flashcard.pronunciation.wordsCrush.playSound","Play Sound")),1)])]),n("div",F,[O.value?d("",!0):(o(),s("button",{key:0,onClick:re,disabled:!ee.value,class:"px-3 py-1.5 text-sm bg-gradient-to-r from-purple-600 to-purple-700 hover:from-purple-700 hover:to-purple-800 text-white rounded-lg font-medium transition-all duration-200 disabled:opacity-50 disabled:cursor-not-allowed shadow-lg"},u(x(G)("flashcard.pronunciation.wordsCrush.checkAnswer","Check Answer")),9,T)),!O.value&&X.value<2?(o(),s("button",{key:1,onClick:ae,class:"px-3 py-1.5 text-sm bg-gradient-to-r from-yellow-500 to-yellow-600 hover:from-yellow-600 hover:to-yellow-700 text-white rounded-lg font-medium transition-all duration-200 shadow-lg"},u(x(G)("flashcard.pronunciation.wordsCrush.hint","Hint"))+" ("+u(X.value)+"/"+u(2)+") ",1)):d("",!0),n("button",{onClick:le,class:"px-3 py-1.5 text-sm bg-gradient-to-r from-gray-500 to-gray-600 hover:from-gray-600 hover:to-gray-700 text-white rounded-lg font-medium transition-all duration-200 shadow-lg"},u(x(G)("flashcard.pronunciation.wordsCrush.reset","Reset")),1)]),O.value?(o(),s("div",B,[Q.value?(o(),s("p",H,u(x(G)("flashcard.pronunciation.wordsCrush.correct"," Correct!")),1)):(o(),s("p",K,u(x(G)("flashcard.pronunciation.wordsCrush.tryAgain","Try Again!")),1)),n("div",N,[n("p",S,[n("span",U,u(x(G)("flashcard.pronunciation.wordsCrush.correctWord","Word"))+":",1),n("span",q,u(e.card?.word),1)]),n("p",D,[n("span",P,u(x(G)("flashcard.pronunciation.wordsCrush.meaning","Meaning"))+":",1),n("span",R,u(e.card?.meaning),1)])])])):d("",!0)],32))}}),[["__scopeId","data-v-b9d619f0"]]);export{Z as default};
