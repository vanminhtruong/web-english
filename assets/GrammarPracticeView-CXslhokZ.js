const __vite__mapDeps=(i,m=__vite__mapDeps,d=(m.f||(m.f=["assets/MultipleChoiceExercise-DotZkwho.js","assets/vendor-CKTvmtu5.js","assets/voiceStore-DiHiYd9f.js","assets/FillBlankExercise-BvhaCv3I.js","assets/PronunciationExercise-xbNu-klA.js","assets/ReadingExercise-CJxIJ1n3.js","assets/ListeningExercise-hJRA9gUJ.js","assets/WritingExercise-B14uBHJu.js","assets/ExerciseManager-C0QpEYZc.js"])))=>i.map(i=>d[i]);
import { _ as __vitePreload } from "./index-NgYuwt7j.js";
import { d as defineComponent, M as useI18n, N as useRoute, O as useRouter, D as computed, z as ref, Z as h, G as defineAsyncComponent, P as watch, A as onMounted, c as createElementBlock, v as openBlock, V as createStaticVNode, f as createBaseVNode, y as createVNode, e as createCommentVNode, t as toDisplayString, u as unref, g as createTextVNode, F as Fragment, j as renderList, n as normalizeClass, b as createBlock, r as resolveDynamicComponent, a as normalizeStyle, w as withCtx, U as Transition, i as withModifiers, E as withDirectives, Y as vModelSelect, X as vModelText, _ as vModelCheckbox } from "./vendor-CKTvmtu5.js";
import { u as useVoiceStore } from "./voiceStore-DiHiYd9f.js";
import "./vendor-toast-Blf0QbeM.js";
const _hoisted_1 = { class: "min-h-screen bg-gradient-to-br from-blue-50 to-indigo-100 dark:from-[#0a0a0a] dark:to-[#0f0f0f] relative overflow-x-hidden" };
const _hoisted_2 = { class: "relative z-10 max-w-full sm:max-w-full md:max-w-full lg:max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 pt-3 sm:pt-6" };
const _hoisted_3 = { class: "group bg-white/80 dark:bg-[#0a0a0a]/80 backdrop-blur-md shadow-xl hover:shadow-2xl rounded-2xl border border-white/20 dark:border-white/10 transition-all duration-500 hover:scale-[1.005] p-3 sm:p-4 md:p-5 lg:p-6" };
const _hoisted_4 = { class: "flex items-center justify-between" };
const _hoisted_5 = { class: "flex items-center space-x-4" };
const _hoisted_6 = { class: "flex items-center mb-1" };
const _hoisted_7 = { class: "text-xl sm:text-2xl font-bold bg-gradient-to-r from-blue-600 to-indigo-600 dark:from-blue-400 dark:to-indigo-400 bg-clip-text text-transparent" };
const _hoisted_8 = { class: "text-sm text-gray-600 dark:text-white/70" };
const _hoisted_9 = { class: "flex items-center space-x-4" };
const _hoisted_10 = { class: "text-sm text-gray-600 dark:text-white/70" };
const _hoisted_11 = { class: "font-medium text-blue-600 dark:text-blue-400" };
const _hoisted_12 = ["title"];
const _hoisted_13 = ["title"];
const _hoisted_14 = { class: "relative z-10 max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-8" };
const _hoisted_15 = {
  key: 0,
  class: "space-y-6"
};
const _hoisted_16 = { class: "text-center" };
const _hoisted_17 = { class: "text-2xl font-bold bg-gradient-to-r from-blue-600 to-indigo-600 dark:from-blue-400 dark:to-indigo-400 bg-clip-text text-transparent mb-4" };
const _hoisted_18 = { class: "text-gray-700 dark:text-white/70 mb-8" };
const _hoisted_19 = { class: "grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-6" };
const _hoisted_20 = ["onClick"];
const _hoisted_21 = { class: "text-center" };
const _hoisted_22 = { class: "text-lg font-semibold text-gray-900 dark:text-white mb-2" };
const _hoisted_23 = { class: "text-sm text-gray-600 dark:text-white/70 mb-4" };
const _hoisted_24 = { class: "flex items-center justify-center space-x-4 text-xs text-gray-500 dark:text-white/60" };
const _hoisted_25 = {
  key: 1,
  class: "space-y-6"
};
const _hoisted_26 = { class: "bg-white dark:bg-[#0a0a0a] rounded-xl shadow-lg border border-gray-200 dark:border-gray-700 p-6" };
const _hoisted_27 = { class: "flex items-center justify-between" };
const _hoisted_28 = { class: "flex items-center space-x-4" };
const _hoisted_29 = { class: "text-xl font-semibold text-gray-900 dark:text-white" };
const _hoisted_30 = { class: "text-sm text-gray-500 dark:text-gray-400" };
const _hoisted_31 = { class: "flex items-center space-x-4" };
const _hoisted_32 = { class: "w-32 bg-gray-200 dark:bg-mute rounded-full h-2" };
const _hoisted_33 = { class: "text-sm font-medium text-gray-700 dark:text-gray-300" };
const _hoisted_34 = {
  key: 0,
  class: "fixed inset-0 bg-black/50 dark:bg-black/60 flex items-center justify-center p-4 z-50 backdrop-blur-sm"
};
const _hoisted_35 = { class: "bg-white dark:bg-[#0a0a0a] shadow-2xl rounded-xl border border-gray-200 dark:border-dark-bg-mute flex flex-col h-full overflow-hidden transform" };
const _hoisted_36 = { class: "px-6 py-4 border-b border-gray-200 dark:border-dark-bg-mute flex-shrink-0 bg-gradient-to-r from-blue-50 to-indigo-50 dark:from-[#0a0a0a] dark:to-[#0a0a0a]" };
const _hoisted_37 = { class: "flex items-center justify-between" };
const _hoisted_38 = { class: "text-lg sm:text-xl font-semibold text-gray-900 dark:text-white flex items-center space-x-2" };
const _hoisted_39 = { class: "px-6 py-4 flex-1 overflow-y-auto min-h-0 space-y-4" };
const _hoisted_40 = { class: "block text-sm font-medium text-gray-700 dark:text-white mb-2" };
const _hoisted_41 = { value: "easy" };
const _hoisted_42 = { value: "medium" };
const _hoisted_43 = { value: "hard" };
const _hoisted_44 = { class: "flex items-center justify-between" };
const _hoisted_45 = { class: "text-sm font-medium text-gray-700 dark:text-white" };
const _hoisted_46 = { class: "flex items-center justify-between" };
const _hoisted_47 = { class: "text-sm font-medium text-gray-700 dark:text-white" };
const _hoisted_48 = { class: "px-6 py-4 border-t border-gray-200 dark:border-dark-bg-mute flex-shrink-0 bg-gradient-to-r from-gray-50 to-blue-50 dark:from-[#0a0a0a] dark:to-[#0a0a0a]" };
const _hoisted_49 = { class: "flex justify-end space-x-3" };
const _hoisted_50 = {
  key: 0,
  class: "fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50"
};
const _hoisted_51 = { class: "bg-white dark:bg-[#0a0a0a] rounded-xl shadow-2xl border border-gray-200 dark:border-gray-700 p-6 max-w-lg w-full mx-4" };
const _hoisted_52 = { class: "text-center" };
const _hoisted_53 = { class: "text-2xl font-bold text-gray-900 dark:text-white mb-2" };
const _hoisted_54 = { class: "space-y-4 mb-6" };
const _hoisted_55 = { class: "grid grid-cols-3 gap-4 text-center" };
const _hoisted_56 = { class: "bg-blue-50 dark:bg-blue-900/30 rounded-lg p-4" };
const _hoisted_57 = { class: "text-2xl font-bold text-blue-600 dark:text-blue-400" };
const _hoisted_58 = { class: "text-sm text-gray-600 dark:text-gray-400" };
const _hoisted_59 = { class: "bg-red-50 dark:bg-red-900/30 rounded-lg p-4" };
const _hoisted_60 = { class: "text-2xl font-bold text-red-600 dark:text-red-400" };
const _hoisted_61 = { class: "text-sm text-gray-600 dark:text-gray-400" };
const _hoisted_62 = { class: "bg-green-50 dark:bg-green-900/30 rounded-lg p-4" };
const _hoisted_63 = { class: "text-2xl font-bold text-green-600 dark:text-green-400" };
const _hoisted_64 = { class: "text-sm text-gray-600 dark:text-gray-400" };
const _hoisted_65 = { class: "flex justify-center space-x-4" };
const _hoisted_66 = {
  key: 1,
  class: "fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50"
};
const _hoisted_67 = { class: "bg-white dark:bg-[#0a0a0a] rounded-xl shadow-2xl border border-gray-200 dark:border-gray-700 p-6 max-w-6xl w-full mx-4 max-h-[90vh] overflow-y-auto" };
const _hoisted_68 = { class: "flex items-center justify-between mb-6" };
const _hoisted_69 = { class: "text-lg font-semibold text-gray-900 dark:text-white" };
const _hoisted_70 = { class: "space-y-6" };
const _hoisted_71 = { class: "bg-gray-50 dark:bg-gray-800/30 border border-gray-200 dark:border-gray-600 rounded-lg p-4" };
const _hoisted_72 = { class: "text-md font-medium text-gray-900 dark:text-white mb-4" };
const _hoisted_73 = {
  key: 0,
  class: "space-y-4"
};
const _hoisted_74 = { class: "grid grid-cols-1 md:grid-cols-2 gap-4" };
const _hoisted_75 = { class: "block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2" };
const _hoisted_76 = { value: "essay" };
const _hoisted_77 = { value: "email" };
const _hoisted_78 = { value: "letter" };
const _hoisted_79 = { value: "paragraph" };
const _hoisted_80 = { class: "grid grid-cols-2 gap-2" };
const _hoisted_81 = { class: "block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2" };
const _hoisted_82 = { class: "block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2" };
const _hoisted_83 = { class: "block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2" };
const _hoisted_84 = ["placeholder"];
const _hoisted_85 = { class: "flex items-center justify-between mb-2" };
const _hoisted_86 = { class: "block text-sm font-medium text-gray-700 dark:text-gray-300" };
const _hoisted_87 = { class: "space-y-2" };
const _hoisted_88 = ["onUpdate:modelValue", "placeholder"];
const _hoisted_89 = ["onClick", "disabled"];
const _hoisted_90 = {
  key: 1,
  class: "space-y-4"
};
const _hoisted_91 = { class: "block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2" };
const _hoisted_92 = ["placeholder"];
const _hoisted_93 = { class: "block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2" };
const _hoisted_94 = { class: "space-y-2" };
const _hoisted_95 = { class: "text-sm font-medium text-gray-500 dark:text-gray-400 w-6" };
const _hoisted_96 = ["onUpdate:modelValue", "placeholder"];
const _hoisted_97 = { class: "block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2" };
const _hoisted_98 = ["value"];
const _hoisted_99 = { class: "block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2" };
const _hoisted_100 = ["placeholder"];
const _hoisted_101 = {
  key: 2,
  class: "space-y-4"
};
const _hoisted_102 = { class: "block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2" };
const _hoisted_103 = { class: "relative" };
const _hoisted_104 = ["placeholder"];
const _hoisted_105 = { class: "mt-2 text-xs text-gray-500 dark:text-gray-400" };
const _hoisted_106 = {
  key: 0,
  class: "mt-3 p-3 bg-blue-50 dark:bg-blue-900/30 border border-blue-200 dark:border-blue-700 rounded-lg"
};
const _hoisted_107 = { class: "flex items-center space-x-2 text-sm text-blue-800 dark:text-blue-200" };
const _hoisted_108 = { class: "mt-2 text-xs text-gray-600 dark:text-gray-400" };
const _hoisted_109 = { class: "grid grid-cols-1 md:grid-cols-3 gap-4" };
const _hoisted_110 = { class: "block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2" };
const _hoisted_111 = { class: "block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2" };
const _hoisted_112 = { value: "easy" };
const _hoisted_113 = { value: "medium" };
const _hoisted_114 = { value: "hard" };
const _hoisted_115 = { class: "flex items-center" };
const _hoisted_116 = { class: "flex items-center space-x-2 cursor-pointer" };
const _hoisted_117 = { class: "text-sm font-medium text-gray-700 dark:text-gray-300" };
const _hoisted_118 = { class: "block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2" };
const _hoisted_119 = ["placeholder"];
const _hoisted_120 = { class: "block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2" };
const _hoisted_121 = { class: "space-y-3" };
const _hoisted_122 = { class: "flex items-center justify-between mb-2" };
const _hoisted_123 = { class: "text-sm font-medium text-gray-700 dark:text-gray-300" };
const _hoisted_124 = ["onClick", "disabled"];
const _hoisted_125 = { class: "space-y-2" };
const _hoisted_126 = ["onUpdate:modelValue"];
const _hoisted_127 = { value: "multiple-choice" };
const _hoisted_128 = { value: "fill-blank" };
const _hoisted_129 = { value: "ordering" };
const _hoisted_130 = ["onUpdate:modelValue", "placeholder"];
const _hoisted_131 = {
  key: 0,
  class: "space-y-1"
};
const _hoisted_132 = { class: "text-xs font-medium text-gray-500 dark:text-gray-400 w-4" };
const _hoisted_133 = ["onUpdate:modelValue", "placeholder"];
const _hoisted_134 = ["onUpdate:modelValue"];
const _hoisted_135 = { value: "" };
const _hoisted_136 = ["value"];
const _hoisted_137 = { key: 1 };
const _hoisted_138 = ["onUpdate:modelValue", "placeholder"];
const _hoisted_139 = {
  key: 3,
  class: "space-y-4"
};
const _hoisted_140 = { class: "block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2" };
const _hoisted_141 = ["placeholder"];
const _hoisted_142 = { class: "block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2" };
const _hoisted_143 = ["placeholder"];
const _hoisted_144 = { class: "flex justify-end mt-4" };
const _hoisted_145 = { key: 0 };
const _hoisted_146 = { class: "text-md font-medium text-gray-900 dark:text-white mb-4" };
const _hoisted_147 = { class: "space-y-4 max-h-96 overflow-y-auto" };
const _hoisted_148 = { class: "flex items-start justify-between" };
const _hoisted_149 = { class: "flex-1" };
const _hoisted_150 = { class: "mb-2" };
const _hoisted_151 = { class: "inline-flex items-center px-2 py-1 rounded-full text-xs font-medium bg-blue-100 text-blue-800 dark:bg-blue-900 dark:text-blue-200" };
const _hoisted_152 = {
  key: 0,
  class: "ml-2 inline-flex items-center px-2 py-1 rounded-full text-xs font-medium bg-green-100 text-green-800 dark:bg-green-900 dark:text-green-200"
};
const _hoisted_153 = { class: "text-sm text-gray-900 dark:text-white mb-2" };
const _hoisted_154 = { class: "mt-1" };
const _hoisted_155 = {
  key: 0,
  class: "text-xs text-gray-600 dark:text-gray-400"
};
const _hoisted_156 = { class: "list-disc list-inside mt-1" };
const _hoisted_157 = {
  key: 1,
  class: "text-xs text-gray-600 dark:text-gray-400 mt-2"
};
const _hoisted_158 = { class: "flex items-center space-x-2 ml-4" };
const _hoisted_159 = ["onClick", "title"];
const _hoisted_160 = ["onClick", "title"];
const _hoisted_161 = {
  key: 1,
  class: "text-center py-8"
};
const _hoisted_162 = { class: "text-gray-500 dark:text-gray-400" };
const _hoisted_163 = { class: "text-sm mt-1" };
const _hoisted_164 = { class: "flex justify-end space-x-4 mt-6" };
const _sfc_main = /* @__PURE__ */ defineComponent({
  __name: "GrammarPracticeView",
  setup(__props) {
    const { t } = useI18n();
    const tf = (key, fallback, params) => {
      const translated = params ? t(key, params) : t(key);
      const text = typeof translated === "string" ? translated : String(translated);
      if (text === key) return fallback;
      return text;
    };
    const route = useRoute();
    const router = useRouter();
    const { playAudio } = useVoiceStore();
    const MultipleChoiceExercise = defineAsyncComponent(() => __vitePreload(() => import("./MultipleChoiceExercise-DotZkwho.js"), true ? __vite__mapDeps([0,1,2]) : void 0));
    const FillBlankExercise = defineAsyncComponent(() => __vitePreload(() => import("./FillBlankExercise-BvhaCv3I.js"), true ? __vite__mapDeps([3,1,2]) : void 0));
    const PronunciationExercise = defineAsyncComponent(() => __vitePreload(() => import("./PronunciationExercise-xbNu-klA.js"), true ? __vite__mapDeps([4,1,2]) : void 0));
    const ReadingExercise = defineAsyncComponent(() => __vitePreload(() => import("./ReadingExercise-CJxIJ1n3.js"), true ? __vite__mapDeps([5,1,2]) : void 0));
    const ListeningExercise = defineAsyncComponent(() => __vitePreload(() => import("./ListeningExercise-hJRA9gUJ.js"), true ? __vite__mapDeps([6,1,2]) : void 0));
    const WritingExercise = defineAsyncComponent(() => __vitePreload(() => import("./WritingExercise-B14uBHJu.js"), true ? __vite__mapDeps([7,1]) : void 0));
    const ExerciseManager = defineAsyncComponent(() => __vitePreload(() => import("./ExerciseManager-C0QpEYZc.js"), true ? __vite__mapDeps([8,1]) : void 0));
    const BookOpenIcon = () => h("svg", { class: "w-8 h-8 text-white", fill: "none", stroke: "currentColor", viewBox: "0 0 24 24" }, [
      h("path", { "stroke-linecap": "round", "stroke-linejoin": "round", "stroke-width": "2", d: "M12 6.253v13m0-13C10.832 5.477 9.246 5 7.5 5S4.168 5.477 3 6.253v13C4.168 18.477 5.754 18 7.5 18s3.332.477 4.5 1.253m0-13C13.168 5.477 14.754 5 16.5 5c1.746 0 3.332.477 4.5 1.253v13C20.168 18.477 18.582 18 16.5 18c-1.746 0-3.332.477-4.5 1.253" })
    ]);
    const PencilIcon = () => h("svg", { class: "w-8 h-8 text-white", fill: "none", stroke: "currentColor", viewBox: "0 0 24 24" }, [
      h("path", { "stroke-linecap": "round", "stroke-linejoin": "round", "stroke-width": "2", d: "M11 5H6a2 2 0 00-2 2v11a2 2 0 002 2h11a2 2 0 002-2v-5m-1.414-9.414a2 2 0 112.828 2.828L11.828 15H9v-2.828l8.586-8.586z" })
    ]);
    const SpeakerWaveIcon = () => h("svg", { class: "w-8 h-8 text-white", fill: "none", stroke: "currentColor", viewBox: "0 0 24 24" }, [
      h("path", { "stroke-linecap": "round", "stroke-linejoin": "round", "stroke-width": "2", d: "M19.114 5.636a9 9 0 010 12.728M16.463 8.288a5.25 5.25 0 010 7.424M6.75 8.25l4.72-4.72a.75.75 0 011.28.53v15.88a.75.75 0 01-1.28.53l-4.72-4.72H4.51c-.88 0-1.59-.71-1.59-1.59V9.84c0-.88.71-1.59 1.59-1.59h2.24z" })
    ]);
    const MicrophoneIcon = () => h("svg", { class: "w-8 h-8 text-white", fill: "none", stroke: "currentColor", viewBox: "0 0 24 24" }, [
      h("path", { "stroke-linecap": "round", "stroke-linejoin": "round", "stroke-width": "2", d: "M12 1a3 3 0 0 0-3 3v8a3 3 0 0 0 6 0V4a3 3 0 0 0-3-3zM19 10v2a7 7 0 0 1-14 0v-2M12 19v4M8 23h8" })
    ]);
    const EyeIcon = () => h("svg", { class: "w-8 h-8 text-white", fill: "none", stroke: "currentColor", viewBox: "0 0 24 24" }, [
      h("path", { "stroke-linecap": "round", "stroke-linejoin": "round", "stroke-width": "2", d: "M15 12a3 3 0 11-6 0 3 3 0 016 0z" }),
      h("path", { "stroke-linecap": "round", "stroke-linejoin": "round", "stroke-width": "2", d: "M2.458 12C3.732 7.943 7.523 5 12 5c4.478 0 8.268 2.943 9.542 7-1.274 4.057-5.064 7-9.542 7-4.477 0-8.268-2.943-9.542-7z" })
    ]);
    const EditIcon = () => h("svg", { class: "w-8 h-8 text-white", fill: "none", stroke: "currentColor", viewBox: "0 0 24 24" }, [
      h("path", { "stroke-linecap": "round", "stroke-linejoin": "round", "stroke-width": "2", d: "M15.232 5.232l3.536 3.536m-2.036-5.036a2.5 2.5 0 113.536 3.536L6.5 21.036H3v-3.572L16.732 3.732z" })
    ]);
    computed(() => route.params.id);
    const selectedExercise = ref(null);
    const currentQuestionIndex = ref(0);
    const totalQuestions = ref(10);
    const currentQuestion = ref(null);
    const exerciseResults = ref({
      correct: 0,
      incorrect: 0,
      percentage: 0,
      answers: []
    });
    const showSettings = ref(false);
    const showResults = ref(false);
    const showExerciseManager = ref(false);
    const totalScore = ref(0);
    const newExercise = ref({
      type: "",
      title: "",
      description: "",
      difficulty: "medium",
      duration: ""
    });
    const exerciseQuestions = ref({});
    const showQuestionManager = ref(false);
    const selectedExerciseTypeForQuestions = ref("");
    const newQuestion = ref({
      id: "",
      type: "",
      question: "",
      options: ["", "", "", ""],
      correctAnswer: "",
      explanation: "",
      difficulty: "medium",
      // Writing specific fields
      taskType: "essay",
      prompt: "",
      requirements: [""],
      minWords: 100,
      timeLimit: 20,
      // Listening specific fields
      audioUrl: "",
      originalUrl: "",
      maxPlays: 3,
      allowNotes: false,
      transcript: "",
      questions: []
    });
    const editingQuestionIndex = ref(-1);
    const settings = ref({
      difficulty: "medium",
      autoPlayAudio: true,
      showExplanations: true
    });
    const exerciseTypes = ref([
      {
        type: "multiple-choice",
        title: "Multiple Choice",
        description: "Choose the correct answer from multiple options",
        icon: BookOpenIcon,
        colorClass: "bg-gray-500",
        duration: "10-15 min",
        difficulty: "Easy"
      },
      {
        type: "fill-blank",
        title: "Fill in the Blanks",
        description: "Complete sentences by filling in missing words",
        icon: PencilIcon,
        colorClass: "bg-green-500",
        duration: "15-20 min",
        difficulty: "Medium"
      },
      {
        type: "pronunciation",
        title: "Pronunciation Practice",
        description: "Practice speaking and pronunciation skills",
        icon: MicrophoneIcon,
        colorClass: "bg-purple-500",
        duration: "10-15 min",
        difficulty: "Medium"
      },
      {
        type: "reading",
        title: "Reading Comprehension",
        description: "Read passages and answer comprehension questions",
        icon: EyeIcon,
        colorClass: "bg-orange-500",
        duration: "20-25 min",
        difficulty: "Hard"
      },
      {
        type: "listening",
        title: "Listening Exercise",
        description: "Listen to audio and answer related questions",
        icon: SpeakerWaveIcon,
        colorClass: "bg-indigo-500",
        duration: "15-20 min",
        difficulty: "Medium"
      },
      {
        type: "writing",
        title: "Writing Practice",
        description: "Practice writing skills with various prompts",
        icon: EditIcon,
        colorClass: "bg-red-500",
        duration: "25-30 min",
        difficulty: "Hard"
      }
    ]);
    const currentExerciseComponent = computed(() => {
      const componentMap = {
        "multiple-choice": MultipleChoiceExercise,
        "fill-blank": FillBlankExercise,
        "pronunciation": PronunciationExercise,
        "reading": ReadingExercise,
        "listening": ListeningExercise,
        "writing": WritingExercise
      };
      return selectedExercise.value ? componentMap[selectedExercise.value] || null : null;
    });
    const startExercise = (exerciseType) => {
      selectedExercise.value = exerciseType;
      currentQuestionIndex.value = 0;
      exerciseResults.value = {
        correct: 0,
        incorrect: 0,
        percentage: 0,
        answers: []
      };
      generateQuestions();
      const newQuery = { ...route.query, exercise: exerciseType };
      router.replace({ query: newQuery });
    };
    const generateQuestions = () => {
      if (!selectedExercise.value) return;
      const savedQuestions = exerciseQuestions.value[selectedExercise.value] || [];
      if (savedQuestions.length > 0) {
        const questionIndex = currentQuestionIndex.value % savedQuestions.length;
        currentQuestion.value = savedQuestions[questionIndex];
      } else {
        generateDefaultQuestions();
      }
    };
    const generateDefaultQuestions = () => {
      if (selectedExercise.value === "writing") {
        const writingTasks = [
          {
            id: 1,
            type: "writing",
            taskType: "essay",
            prompt: "Write an essay about the importance of learning English in today's globalized world. Discuss how English proficiency can benefit individuals in their personal and professional lives.",
            requirements: [
              "Write at least 250 words",
              "Include an introduction, body paragraphs, and conclusion",
              "Use specific examples to support your points",
              "Demonstrate proper grammar and vocabulary usage"
            ],
            minWords: 250,
            timeLimit: 30
          },
          {
            id: 2,
            type: "writing",
            taskType: "email",
            prompt: "Write a formal email to your manager requesting time off for a family vacation. Include the dates, reason, and any work arrangements you have made.",
            requirements: [
              "Use formal email format",
              "Include appropriate subject line",
              "Be polite and professional",
              "Provide all necessary details"
            ],
            minWords: 150,
            timeLimit: 20
          },
          {
            id: 3,
            type: "writing",
            taskType: "letter",
            prompt: "Write a letter to a friend describing your recent trip to a new city. Share your experiences, what you liked most, and recommend places to visit.",
            requirements: [
              "Use informal, friendly tone",
              "Include specific details about places visited",
              "Share personal experiences and feelings",
              "Make recommendations"
            ],
            minWords: 200,
            timeLimit: 25
          }
        ];
        const taskIndex = currentQuestionIndex.value % writingTasks.length;
        currentQuestion.value = writingTasks[taskIndex];
      } else if (selectedExercise.value === "multiple-choice") {
        const mcQuestions = [
          {
            id: 1,
            type: "multiple-choice",
            question: 'Choose the correct form of the verb: "She _____ to the store yesterday."',
            options: ["go", "goes", "went", "going"],
            correctAnswer: "went",
            explanation: "Past tense is used for actions completed in the past."
          },
          {
            id: 2,
            type: "multiple-choice",
            question: "Which sentence is grammatically correct?",
            options: [
              "I have been living here since 5 years.",
              "I have been living here for 5 years.",
              "I am living here since 5 years.",
              "I live here since 5 years."
            ],
            correctAnswer: "I have been living here for 5 years.",
            explanation: 'Use "for" with duration and present perfect continuous for ongoing actions.'
          }
        ];
        const questionIndex = currentQuestionIndex.value % mcQuestions.length;
        currentQuestion.value = mcQuestions[questionIndex];
      } else if (selectedExercise.value === "fill-blank") {
        const fillBlankQuestions = [
          {
            id: 1,
            type: "fill-blank",
            question: 'Complete the sentence: "I _____ been studying English _____ three years."',
            blanks: ["have", "for"],
            sentence: "I _____ been studying English _____ three years.",
            explanation: 'Present perfect continuous with "have" and duration with "for".'
          }
        ];
        const questionIndex = currentQuestionIndex.value % fillBlankQuestions.length;
        currentQuestion.value = fillBlankQuestions[questionIndex];
      } else {
        currentQuestion.value = {
          id: 1,
          type: selectedExercise.value,
          question: `Sample ${selectedExercise.value} question`,
          options: ["Option A", "Option B", "Option C", "Option D"],
          correctAnswer: "Option A",
          explanation: "This is the correct answer because..."
        };
      }
    };
    const handleAnswer = (answer) => {
      const isCorrect = answer.isCorrect;
      if (isCorrect) {
        exerciseResults.value.correct++;
      } else {
        exerciseResults.value.incorrect++;
      }
      exerciseResults.value.answers.push({
        questionIndex: currentQuestionIndex.value,
        userAnswer: answer.userAnswer,
        correctAnswer: answer.correctAnswer,
        isCorrect
      });
    };
    const nextQuestion = () => {
      if (currentQuestionIndex.value < totalQuestions.value - 1) {
        currentQuestionIndex.value++;
        generateQuestions();
      } else {
        completeExercise();
      }
    };
    const completeExercise = () => {
      const total = exerciseResults.value.correct + exerciseResults.value.incorrect;
      exerciseResults.value.percentage = total > 0 ? Math.round(exerciseResults.value.correct / total * 100) : 0;
      totalScore.value += exerciseResults.value.correct * 10;
      showResults.value = true;
    };
    const restartExercise = () => {
      showResults.value = false;
      currentQuestionIndex.value = 0;
      exerciseResults.value = {
        correct: 0,
        incorrect: 0,
        percentage: 0,
        answers: []
      };
      generateQuestions();
    };
    const goBackToSelection = () => {
      selectedExercise.value = null;
      showResults.value = false;
      currentQuestionIndex.value = 0;
      const newQuery = { ...route.query };
      delete newQuery.exercise;
      router.replace({ query: newQuery });
    };
    const saveSettings = () => {
      localStorage.setItem("grammarPracticeSettings", JSON.stringify(settings.value));
      showSettings.value = false;
    };
    const goBackToGrammarDetail = () => {
      const grammarId2 = route.params.id;
      if (grammarId2) {
        router.push(`/grammar/${grammarId2}`);
      } else {
        router.push("/grammar");
      }
    };
    const addExerciseType = () => {
      if (!newExercise.value.type || !newExercise.value.title) {
        return;
      }
      const exerciseToAdd = {
        type: newExercise.value.type,
        title: newExercise.value.title,
        description: newExercise.value.description,
        difficulty: newExercise.value.difficulty,
        duration: newExercise.value.duration,
        icon: BookOpenIcon,
        colorClass: "bg-blue-500"
      };
      exerciseTypes.value.push(exerciseToAdd);
      newExercise.value = {
        type: "",
        title: "",
        description: "",
        difficulty: "medium",
        duration: ""
      };
    };
    const editExerciseType = (index) => {
      const exercise = exerciseTypes.value[index];
      newExercise.value = {
        type: exercise.type,
        title: exercise.title,
        description: exercise.description,
        difficulty: exercise.difficulty,
        duration: exercise.duration
      };
      exerciseTypes.value.splice(index, 1);
    };
    const deleteExerciseType = (index) => {
      if (confirm(t("common.confirmDelete", "Are you sure you want to delete this?"))) {
        exerciseTypes.value.splice(index, 1);
      }
    };
    const saveExerciseTypes = () => {
      localStorage.setItem("grammarExerciseTypes", JSON.stringify(exerciseTypes.value));
      showExerciseManager.value = false;
    };
    const openQuestionManager = (exerciseType) => {
      selectedExerciseTypeForQuestions.value = exerciseType;
      showQuestionManager.value = true;
      resetNewQuestionForm();
    };
    const closeQuestionManager = () => {
      showQuestionManager.value = false;
      selectedExerciseTypeForQuestions.value = "";
      resetNewQuestionForm();
      editingQuestionIndex.value = -1;
    };
    const resetNewQuestionForm = () => {
      if (selectedExerciseTypeForQuestions.value === "listening") {
        newQuestion.value = {
          id: "",
          type: "listening",
          audioUrl: "",
          maxPlays: 3,
          allowNotes: true,
          difficulty: "medium",
          transcript: "",
          questions: [{
            question: "",
            type: "multiple-choice",
            options: ["", "", "", ""],
            correctAnswer: ""
          }]
        };
      } else if (selectedExerciseTypeForQuestions.value === "writing") {
        newQuestion.value = {
          id: "",
          type: "writing",
          question: "",
          options: ["", "", "", ""],
          correctAnswer: "",
          explanation: "",
          difficulty: "medium",
          // Writing specific fields
          taskType: "essay",
          prompt: "",
          requirements: [""],
          minWords: 100,
          timeLimit: 20,
          // Listening specific fields (default values)
          audioUrl: "",
          originalUrl: "",
          maxPlays: 3,
          allowNotes: false,
          transcript: "",
          questions: []
        };
      } else {
        newQuestion.value = {
          id: "",
          type: selectedExerciseTypeForQuestions.value || "",
          question: "",
          options: ["", "", "", ""],
          correctAnswer: "",
          explanation: "",
          difficulty: "medium",
          // Add missing properties to satisfy TypeScript
          taskType: "essay",
          prompt: "",
          requirements: [""],
          minWords: 100,
          timeLimit: 20,
          // Listening specific fields (default values)
          audioUrl: "",
          originalUrl: "",
          maxPlays: 3,
          allowNotes: false,
          transcript: "",
          questions: []
        };
      }
    };
    const addQuestion = () => {
      const exerciseType = selectedExerciseTypeForQuestions.value;
      if (!exerciseType) return;
      const id = Date.now().toString();
      const questionToAdd = {
        ...newQuestion.value,
        id,
        type: exerciseType
      };
      if (exerciseType === "writing") {
        questionToAdd.requirements = questionToAdd.requirements.filter((req) => req.trim() !== "");
      }
      if (!exerciseQuestions.value[exerciseType]) {
        exerciseQuestions.value[exerciseType] = [];
      }
      if (editingQuestionIndex.value >= 0) {
        exerciseQuestions.value[exerciseType][editingQuestionIndex.value] = questionToAdd;
        editingQuestionIndex.value = -1;
      } else {
        exerciseQuestions.value[exerciseType].push(questionToAdd);
      }
      saveQuestionsToStorage();
      resetNewQuestionForm();
    };
    const editQuestion = (index) => {
      const exerciseType = selectedExerciseTypeForQuestions.value;
      const question = exerciseQuestions.value[exerciseType][index];
      newQuestion.value = { ...question };
      editingQuestionIndex.value = index;
    };
    const deleteQuestion = (index) => {
      if (confirm(t("common.confirmDelete", "Are you sure you want to delete this?"))) {
        const exerciseType = selectedExerciseTypeForQuestions.value;
        exerciseQuestions.value[exerciseType].splice(index, 1);
        saveQuestionsToStorage();
      }
    };
    const addRequirement = () => {
      newQuestion.value.requirements.push("");
    };
    const removeRequirement = (index) => {
      if (newQuestion.value.requirements.length > 1) {
        newQuestion.value.requirements.splice(index, 1);
      }
    };
    const addListeningQuestion = () => {
      const listeningQuestion = newQuestion.value;
      if (listeningQuestion.questions) {
        listeningQuestion.questions.push({
          question: "",
          type: "multiple-choice",
          options: ["", "", "", ""],
          correctAnswer: ""
        });
      }
    };
    const removeListeningQuestion = (index) => {
      const listeningQuestion = newQuestion.value;
      if (listeningQuestion.questions && listeningQuestion.questions.length > 1) {
        listeningQuestion.questions.splice(index, 1);
      }
    };
    const isYouTubeUrl = (url) => {
      if (!url) return false;
      const youtubeRegex = /^(https?\:\/\/)?(www\.)?(youtube\.com|youtu\.be)\/.+/;
      return youtubeRegex.test(url);
    };
    const extractYouTubeVideoId = (url) => {
      const regex = /(?:youtube\.com\/(?:[^\/]+\/.+\/|(?:v|e(?:mbed)?)\/|.*[?&]v=)|youtu\.be\/)([^"&?\/\s]{11})/;
      const match = url.match(regex);
      return match ? match[1] : null;
    };
    const convertYouTubeToAudioUrl = (url) => {
      const videoId = extractYouTubeVideoId(url);
      if (videoId) {
        return `youtube:${videoId}`;
      }
      return url;
    };
    const handleAudioUrlChange = () => {
      if (isYouTubeUrl(newQuestion.value.audioUrl)) {
        const convertedUrl = convertYouTubeToAudioUrl(newQuestion.value.audioUrl);
        newQuestion.value.originalUrl = newQuestion.value.audioUrl;
        newQuestion.value.audioUrl = convertedUrl;
      }
    };
    const handleUrlPaste = (event) => {
      const pastedText = event.clipboardData?.getData("text") || "";
      if (pastedText) {
        let cleanUrl = pastedText.trim();
        if (cleanUrl.includes("youtube.com") || cleanUrl.includes("youtu.be")) {
          const url = new URL(cleanUrl);
          if (url.hostname.includes("youtube.com")) {
            const videoId = url.searchParams.get("v");
            if (videoId) {
              cleanUrl = `https://www.youtube.com/watch?v=${videoId}`;
            }
          } else if (url.hostname.includes("youtu.be")) {
            const videoId = url.pathname.slice(1);
            if (videoId) {
              cleanUrl = `https://youtu.be/${videoId}`;
            }
          }
        }
        newQuestion.value.audioUrl = cleanUrl;
        event.preventDefault();
        handleAudioUrlChange();
      }
    };
    const clearAudioUrl = () => {
      newQuestion.value.audioUrl = "";
      newQuestion.value.originalUrl = "";
    };
    const saveQuestionsToStorage = () => {
      localStorage.setItem("grammarExerciseQuestions", JSON.stringify(exerciseQuestions.value));
    };
    const loadQuestionsFromStorage = () => {
      const saved = localStorage.getItem("grammarExerciseQuestions");
      if (saved) {
        exerciseQuestions.value = JSON.parse(saved);
      }
    };
    const initializeFromUrl = () => {
      const exerciseFromUrl = route.query.exercise;
      if (exerciseFromUrl && exerciseTypes.value.some((ex) => ex.type === exerciseFromUrl)) {
        selectedExercise.value = exerciseFromUrl;
        generateQuestions();
      } else {
        selectedExercise.value = null;
      }
    };
    watch(() => route.query.exercise, (newExercise2) => {
      if (newExercise2 && exerciseTypes.value.some((ex) => ex.type === newExercise2)) {
        if (selectedExercise.value !== newExercise2) {
          selectedExercise.value = newExercise2;
          currentQuestionIndex.value = 0;
          exerciseResults.value = {
            correct: 0,
            incorrect: 0,
            percentage: 0,
            answers: []
          };
          generateQuestions();
        }
      } else {
        selectedExercise.value = null;
      }
    });
    watch([showQuestionManager, showSettings, showResults, showExerciseManager], ([questionManager, settings2, results, exerciseManager]) => {
      const anyModalOpen = questionManager || settings2 || results || exerciseManager;
      if (anyModalOpen) {
        document.body.style.overflow = "hidden";
      } else {
        document.body.style.overflow = "";
      }
    });
    onMounted(() => {
      const savedSettings = localStorage.getItem("grammarPracticeSettings");
      if (savedSettings) {
        settings.value = { ...settings.value, ...JSON.parse(savedSettings) };
      }
      const savedScore = localStorage.getItem("grammarPracticeScore");
      if (savedScore) {
        totalScore.value = parseInt(savedScore);
      }
      loadQuestionsFromStorage();
      initializeFromUrl();
    });
    return (_ctx, _cache) => {
      return openBlock(), createElementBlock("div", _hoisted_1, [
        _cache[40] || (_cache[40] = createStaticVNode('<div class="absolute inset-0 overflow-hidden pointer-events-none z-0"><div class="floating-shapes"><div class="absolute top-16 left-8 w-64 h-64 bg-blue-300 dark:bg-blue-500 rounded-full mix-blend-multiply dark:mix-blend-normal filter blur-xl opacity-30 animate-blob"></div><div class="absolute top-36 right-8 w-72 h-72 bg-purple-300 dark:bg-purple-500 rounded-full mix-blend-multiply dark:mix-blend-normal filter blur-xl opacity-30 animate-blob animation-delay-2000"></div><div class="absolute -bottom-10 left-24 w-80 h-80 bg-pink-300 dark:bg-pink-500 rounded-full mix-blend-multiply dark:mix-blend-normal filter blur-xl opacity-30 animate-blob animation-delay-4000"></div></div></div>', 1)),
        createBaseVNode("div", _hoisted_2, [
          createBaseVNode("div", _hoisted_3, [
            createBaseVNode("div", _hoisted_4, [
              createBaseVNode("div", _hoisted_5, [
                createBaseVNode("button", {
                  onClick: goBackToGrammarDetail,
                  class: "p-2 rounded-lg text-gray-600 dark:text-white/70 hover:text-gray-800 dark:hover:text-white hover:bg-gray-100 dark:hover:bg-[#0f0f0f] transition-colors"
                }, _cache[23] || (_cache[23] = [
                  createBaseVNode("svg", {
                    class: "w-5 h-5",
                    fill: "none",
                    stroke: "currentColor",
                    viewBox: "0 0 24 24"
                  }, [
                    createBaseVNode("path", {
                      "stroke-linecap": "round",
                      "stroke-linejoin": "round",
                      "stroke-width": "2",
                      d: "M15 19l-7-7 7-7"
                    })
                  ], -1)
                ])),
                createBaseVNode("div", null, [
                  createBaseVNode("div", _hoisted_6, [
                    _cache[24] || (_cache[24] = createBaseVNode("div", { class: "animate-pulse-slow" }, [
                      createBaseVNode("div", { class: "w-2.5 h-2.5 bg-gradient-to-r from-blue-400 to-indigo-500 rounded-full mr-2.5" })
                    ], -1)),
                    createBaseVNode("h1", _hoisted_7, toDisplayString(unref(t)("grammar.practice.title", "Practice")), 1)
                  ]),
                  createBaseVNode("p", _hoisted_8, toDisplayString(unref(t)("grammar.practice.subtitle", "Choose a mode to practice grammar with interactive exercises")), 1)
                ])
              ]),
              createBaseVNode("div", _hoisted_9, [
                createBaseVNode("div", _hoisted_10, [
                  createTextVNode(toDisplayString(unref(t)("grammar.practice.score", "Score")) + ": ", 1),
                  createBaseVNode("span", _hoisted_11, toDisplayString(totalScore.value), 1)
                ]),
                createBaseVNode("button", {
                  onClick: _cache[0] || (_cache[0] = ($event) => showExerciseManager.value = true),
                  class: "p-2 rounded-lg text-gray-600 dark:text-white/70 hover:text-gray-800 dark:hover:text-white hover:bg-gray-100 dark:hover:bg-[#0f0f0f] transition-colors",
                  title: unref(t)("grammar.practice.exerciseManager.title", "Manage exercises")
                }, _cache[25] || (_cache[25] = [
                  createBaseVNode("svg", {
                    class: "w-5 h-5",
                    fill: "none",
                    stroke: "currentColor",
                    viewBox: "0 0 24 24"
                  }, [
                    createBaseVNode("path", {
                      "stroke-linecap": "round",
                      "stroke-linejoin": "round",
                      "stroke-width": "2",
                      d: "M12 6V4m0 2a2 2 0 100 4m0-4a2 2 0 110 4m-6 8a2 2 0 100-4m0 4a2 2 0 100 4m0-4v2m0-6V4m6 6v10m6-2a2 2 0 100-4m0 4a2 2 0 100 4m0-4v2m0-6V4"
                    })
                  ], -1)
                ]), 8, _hoisted_12),
                createBaseVNode("button", {
                  onClick: _cache[1] || (_cache[1] = ($event) => showSettings.value = true),
                  class: "p-2 rounded-lg text-gray-600 dark:text-white/70 hover:text-gray-800 dark:hover:text-white hover:bg-gray-100 dark:hover:bg-[#0f0f0f] transition-colors",
                  title: unref(t)("grammar.practice.settings.title", "Settings")
                }, _cache[26] || (_cache[26] = [
                  createBaseVNode("svg", {
                    class: "w-5 h-5",
                    fill: "none",
                    stroke: "currentColor",
                    viewBox: "0 0 24 24"
                  }, [
                    createBaseVNode("path", {
                      "stroke-linecap": "round",
                      "stroke-linejoin": "round",
                      "stroke-width": "2",
                      d: "M10.325 4.317c.426-1.756 2.924-1.756 3.35 0a1.724 1.724 0 002.573 1.066c1.543-.94 3.31.826 2.37 2.37a1.724 1.724 0 001.065 2.572c1.756.426 1.756 2.924 0 3.35a1.724 1.724 0 00-1.066 2.573c.94 1.543-.826 3.31-2.37 2.37a1.724 1.724 0 00-2.572 1.065c-.426 1.756-2.924 1.756-3.35 0a1.724 1.724 0 00-2.573-1.066c-1.543.94-3.31-.826-2.37-2.37a1.724 1.724 0 00-1.065-2.572c-1.756-.426-1.756-2.924 0-3.35a1.724 1.724 0 001.066-2.573c-.94-1.543.826-3.31 2.37-2.37.996.608 2.296.07 2.572-1.065z"
                    }),
                    createBaseVNode("path", {
                      "stroke-linecap": "round",
                      "stroke-linejoin": "round",
                      "stroke-width": "2",
                      d: "M15 12a3 3 0 11-6 0 3 3 0 016 0z"
                    })
                  ], -1)
                ]), 8, _hoisted_13)
              ])
            ])
          ])
        ]),
        createBaseVNode("div", _hoisted_14, [
          !selectedExercise.value ? (openBlock(), createElementBlock("div", _hoisted_15, [
            createBaseVNode("div", _hoisted_16, [
              createBaseVNode("h2", _hoisted_17, toDisplayString(unref(t)("grammar.practice.chooseExercise", "Choose an exercise")), 1),
              createBaseVNode("p", _hoisted_18, toDisplayString(unref(t)("grammar.practice.chooseDescription", "Select a practice type below to get started")), 1)
            ]),
            createBaseVNode("div", _hoisted_19, [
              (openBlock(true), createElementBlock(Fragment, null, renderList(exerciseTypes.value, (exercise) => {
                return openBlock(), createElementBlock("div", {
                  key: exercise.type,
                  onClick: ($event) => startExercise(exercise.type),
                  class: "group bg-white/80 dark:bg-[#0a0a0a]/80 backdrop-blur-md rounded-2xl shadow-xl border border-white/20 dark:border-white/10 p-6 cursor-pointer hover:shadow-2xl hover:scale-[1.03] transition-all duration-300"
                }, [
                  createBaseVNode("div", _hoisted_21, [
                    createBaseVNode("div", {
                      class: normalizeClass(["w-16 h-16 mx-auto mb-4 rounded-full flex items-center justify-center", exercise.colorClass])
                    }, [
                      (openBlock(), createBlock(resolveDynamicComponent(exercise.icon), { class: "w-8 h-8 text-white" }))
                    ], 2),
                    createBaseVNode("h3", _hoisted_22, toDisplayString(tf(`grammar.practice.exercises.${exercise.type}.title`, exercise.title)), 1),
                    createBaseVNode("p", _hoisted_23, toDisplayString(tf(`grammar.practice.exercises.${exercise.type}.description`, exercise.description)), 1),
                    createBaseVNode("div", _hoisted_24, [
                      createBaseVNode("span", null, toDisplayString(exercise.duration), 1),
                      _cache[27] || (_cache[27] = createBaseVNode("span", null, "•", -1)),
                      createBaseVNode("span", null, toDisplayString(exercise.difficulty), 1)
                    ])
                  ])
                ], 8, _hoisted_20);
              }), 128))
            ])
          ])) : (openBlock(), createElementBlock("div", _hoisted_25, [
            createBaseVNode("div", _hoisted_26, [
              createBaseVNode("div", _hoisted_27, [
                createBaseVNode("div", _hoisted_28, [
                  createBaseVNode("button", {
                    onClick: goBackToSelection,
                    class: "p-2 rounded-lg text-gray-500 dark:text-gray-400 hover:text-gray-700 dark:hover:text-gray-200 hover:bg-gray-100 dark:hover:bg-gray-700 transition-colors"
                  }, _cache[28] || (_cache[28] = [
                    createBaseVNode("svg", {
                      class: "w-5 h-5",
                      fill: "none",
                      stroke: "currentColor",
                      viewBox: "0 0 24 24"
                    }, [
                      createBaseVNode("path", {
                        "stroke-linecap": "round",
                        "stroke-linejoin": "round",
                        "stroke-width": "2",
                        d: "M15 19l-7-7 7-7"
                      })
                    ], -1)
                  ])),
                  createBaseVNode("div", null, [
                    createBaseVNode("h2", _hoisted_29, toDisplayString(tf(`grammar.practice.exercises.${selectedExercise.value}.title`, "Exercise")), 1),
                    createBaseVNode("p", _hoisted_30, toDisplayString(unref(t)("grammar.practice.question", "Question")) + " " + toDisplayString(currentQuestionIndex.value + 1) + " / " + toDisplayString(totalQuestions.value), 1)
                  ])
                ]),
                createBaseVNode("div", _hoisted_31, [
                  createBaseVNode("div", _hoisted_32, [
                    createBaseVNode("div", {
                      class: "bg-blue-600 h-2 rounded-full transition-all duration-300",
                      style: normalizeStyle({ width: `${currentQuestionIndex.value / totalQuestions.value * 100}%` })
                    }, null, 4)
                  ]),
                  createBaseVNode("span", _hoisted_33, toDisplayString(Math.round(currentQuestionIndex.value / totalQuestions.value * 100)) + "% ", 1)
                ])
              ])
            ]),
            (openBlock(), createBlock(resolveDynamicComponent(currentExerciseComponent.value), {
              question: currentQuestion.value,
              "question-index": currentQuestionIndex.value,
              "total-questions": totalQuestions.value,
              difficulty: settings.value.difficulty,
              onAnswer: handleAnswer,
              onNext: nextQuestion,
              onComplete: completeExercise
            }, null, 40, ["question", "question-index", "total-questions", "difficulty"]))
          ]))
        ]),
        createVNode(Transition, {
          "enter-active-class": "transition-all duration-500 ease-out",
          "enter-from-class": "opacity-0",
          "enter-to-class": "opacity-100",
          "leave-active-class": "transition-all duration-300 ease-in",
          "leave-from-class": "opacity-100",
          "leave-to-class": "opacity-0"
        }, {
          default: withCtx(() => [
            showSettings.value ? (openBlock(), createElementBlock("div", _hoisted_34, [
              createVNode(Transition, {
                "enter-active-class": "transition-all duration-500 ease-out",
                "enter-from-class": "opacity-0 scale-90 translate-y-8 rotate-1",
                "enter-to-class": "opacity-100 scale-100 translate-y-0 rotate-0",
                "leave-active-class": "transition-all duration-300 ease-in",
                "leave-from-class": "opacity-100 scale-100 translate-y-0 rotate-0",
                "leave-to-class": "opacity-0 scale-90 translate-y-8 rotate-1"
              }, {
                default: withCtx(() => [
                  createBaseVNode("div", {
                    class: "w-full max-h-[90vh] flex flex-col max-w-md sm:max-w-md md:max-w-lg",
                    onClick: _cache[7] || (_cache[7] = withModifiers(() => {
                    }, ["stop"]))
                  }, [
                    createBaseVNode("div", _hoisted_35, [
                      createBaseVNode("div", _hoisted_36, [
                        createBaseVNode("div", _hoisted_37, [
                          createBaseVNode("h3", _hoisted_38, [
                            _cache[29] || (_cache[29] = createBaseVNode("span", { class: "w-2 h-2 bg-blue-500 rounded-full animate-pulse" }, null, -1)),
                            createBaseVNode("span", null, toDisplayString(unref(t)("grammar.practice.settings.title", "Settings")), 1)
                          ]),
                          createBaseVNode("button", {
                            onClick: _cache[2] || (_cache[2] = ($event) => showSettings.value = false),
                            class: "text-gray-400 dark:text-white hover:text-gray-600 dark:hover:text-white transition-all duration-300 hover:scale-110 hover:rotate-90 p-1 rounded-full hover:bg-gray-100 dark:hover:bg-dark-bg-mute"
                          }, _cache[30] || (_cache[30] = [
                            createBaseVNode("svg", {
                              class: "w-6 h-6",
                              fill: "none",
                              stroke: "currentColor",
                              viewBox: "0 0 24 24"
                            }, [
                              createBaseVNode("path", {
                                "stroke-linecap": "round",
                                "stroke-linejoin": "round",
                                "stroke-width": "2",
                                d: "M6 18L18 6M6 6l12 12"
                              })
                            ], -1)
                          ]))
                        ])
                      ]),
                      createBaseVNode("div", _hoisted_39, [
                        createBaseVNode("div", null, [
                          createBaseVNode("label", _hoisted_40, toDisplayString(unref(t)("grammar.practice.settings.difficulty", "Difficulty")), 1),
                          withDirectives(createBaseVNode("select", {
                            "onUpdate:modelValue": _cache[3] || (_cache[3] = ($event) => settings.value.difficulty = $event),
                            class: "w-full px-3 py-2 border border-gray-300 dark:border-dark-bg-mute rounded-lg bg-white dark:bg-[#0a0a0a] text-gray-900 dark:text-white focus:ring-2 focus:ring-blue-500 focus:border-blue-500 dark:focus:border-blue-500"
                          }, [
                            createBaseVNode("option", _hoisted_41, toDisplayString(unref(t)("grammar.practice.settings.levels.easy", "Easy")), 1),
                            createBaseVNode("option", _hoisted_42, toDisplayString(unref(t)("grammar.practice.settings.levels.medium", "Medium")), 1),
                            createBaseVNode("option", _hoisted_43, toDisplayString(unref(t)("grammar.practice.settings.levels.hard", "Hard")), 1)
                          ], 512), [
                            [vModelSelect, settings.value.difficulty]
                          ])
                        ]),
                        createBaseVNode("div", _hoisted_44, [
                          createBaseVNode("label", _hoisted_45, toDisplayString(unref(t)("grammar.practice.settings.autoPlay", "Auto-play audio")), 1),
                          createBaseVNode("button", {
                            onClick: _cache[4] || (_cache[4] = ($event) => settings.value.autoPlayAudio = !settings.value.autoPlayAudio),
                            class: normalizeClass([
                              "relative inline-flex h-6 w-11 items-center rounded-full transition-colors",
                              settings.value.autoPlayAudio ? "bg-blue-600" : "bg-gray-200 dark:bg-dark-bg-mute"
                            ])
                          }, [
                            createBaseVNode("span", {
                              class: normalizeClass([
                                "inline-block h-4 w-4 transform rounded-full bg-white transition-transform",
                                settings.value.autoPlayAudio ? "translate-x-6" : "translate-x-1"
                              ])
                            }, null, 2)
                          ], 2)
                        ]),
                        createBaseVNode("div", _hoisted_46, [
                          createBaseVNode("label", _hoisted_47, toDisplayString(unref(t)("grammar.practice.settings.showExplanations", "Show explanations")), 1),
                          createBaseVNode("button", {
                            onClick: _cache[5] || (_cache[5] = ($event) => settings.value.showExplanations = !settings.value.showExplanations),
                            class: normalizeClass([
                              "relative inline-flex h-6 w-11 items-center rounded-full transition-colors",
                              settings.value.showExplanations ? "bg-blue-600" : "bg-gray-200 dark:bg-dark-bg-mute"
                            ])
                          }, [
                            createBaseVNode("span", {
                              class: normalizeClass([
                                "inline-block h-4 w-4 transform rounded-full bg-white transition-transform",
                                settings.value.showExplanations ? "translate-x-6" : "translate-x-1"
                              ])
                            }, null, 2)
                          ], 2)
                        ])
                      ]),
                      createBaseVNode("div", _hoisted_48, [
                        createBaseVNode("div", _hoisted_49, [
                          createBaseVNode("button", {
                            onClick: _cache[6] || (_cache[6] = ($event) => showSettings.value = false),
                            class: "px-6 py-2 text-gray-700 dark:text-white bg-gray-100 dark:bg-dark-bg-mute hover:bg-gray-200 dark:hover:bg-dark-bg-soft rounded-lg transition-all duration-300 hover:scale-105 hover:shadow-lg font-medium"
                          }, toDisplayString(unref(t)("common.cancel", "Cancel")), 1),
                          createBaseVNode("button", {
                            onClick: saveSettings,
                            class: "px-6 py-2 bg-gradient-to-r from-blue-500 to-blue-600 text-white rounded-lg hover:from-blue-600 hover:to-blue-700 focus:outline-none focus:ring-2 focus:ring-blue-500 transition-all duration-300 hover:scale-105 hover:shadow-lg font-medium"
                          }, toDisplayString(unref(t)("common.save", "Save")), 1)
                        ])
                      ])
                    ])
                  ])
                ]),
                _: 1
              })
            ])) : createCommentVNode("", true)
          ]),
          _: 1
        }),
        showResults.value ? (openBlock(), createElementBlock("div", _hoisted_50, [
          createBaseVNode("div", _hoisted_51, [
            createBaseVNode("div", _hoisted_52, [
              _cache[31] || (_cache[31] = createBaseVNode("div", { class: "w-20 h-20 mx-auto mb-4 rounded-full bg-green-100 dark:bg-green-900/30 flex items-center justify-center" }, [
                createBaseVNode("svg", {
                  class: "w-10 h-10 text-green-600 dark:text-green-400",
                  fill: "none",
                  stroke: "currentColor",
                  viewBox: "0 0 24 24"
                }, [
                  createBaseVNode("path", {
                    "stroke-linecap": "round",
                    "stroke-linejoin": "round",
                    "stroke-width": "2",
                    d: "M9 12l2 2 4-4m6 2a9 9 0 11-18 0 9 9 0 0118 0z"
                  })
                ])
              ], -1)),
              createBaseVNode("h3", _hoisted_53, toDisplayString(unref(t)("grammar.practice.results.title", "Great job!")), 1),
              createBaseVNode("div", _hoisted_54, [
                createBaseVNode("div", _hoisted_55, [
                  createBaseVNode("div", _hoisted_56, [
                    createBaseVNode("div", _hoisted_57, toDisplayString(exerciseResults.value.correct), 1),
                    createBaseVNode("div", _hoisted_58, toDisplayString(unref(t)("grammar.practice.results.correct", "Correct")), 1)
                  ]),
                  createBaseVNode("div", _hoisted_59, [
                    createBaseVNode("div", _hoisted_60, toDisplayString(exerciseResults.value.incorrect), 1),
                    createBaseVNode("div", _hoisted_61, toDisplayString(unref(t)("grammar.practice.results.incorrect", "Incorrect")), 1)
                  ]),
                  createBaseVNode("div", _hoisted_62, [
                    createBaseVNode("div", _hoisted_63, toDisplayString(exerciseResults.value.percentage) + "%", 1),
                    createBaseVNode("div", _hoisted_64, toDisplayString(unref(t)("grammar.practice.results.accuracy", "Accuracy")), 1)
                  ])
                ])
              ]),
              createBaseVNode("div", _hoisted_65, [
                createBaseVNode("button", {
                  onClick: restartExercise,
                  class: "px-6 py-3 text-sm font-medium text-gray-700 dark:text-gray-300 bg-gray-100 dark:bg-gray-700 rounded-lg hover:bg-gray-200 dark:hover:bg-gray-600 transition-colors"
                }, toDisplayString(unref(t)("grammar.practice.results.tryAgain", "Try again")), 1),
                createBaseVNode("button", {
                  onClick: goBackToSelection,
                  class: "px-6 py-3 text-sm font-medium text-white bg-blue-600 rounded-lg hover:bg-blue-700 transition-colors"
                }, toDisplayString(unref(t)("grammar.practice.results.chooseAnother", "Choose another exercise")), 1)
              ])
            ])
          ])
        ])) : createCommentVNode("", true),
        createVNode(unref(ExerciseManager), {
          modelValue: showExerciseManager.value,
          "onUpdate:modelValue": _cache[8] || (_cache[8] = ($event) => showExerciseManager.value = $event),
          "exercise-types": exerciseTypes.value,
          onAddExercise: addExerciseType,
          onEditExercise: editExerciseType,
          onDeleteExercise: deleteExerciseType,
          onSaveExercises: saveExerciseTypes,
          onOpenQuestionManager: openQuestionManager
        }, null, 8, ["modelValue", "exercise-types"]),
        showQuestionManager.value ? (openBlock(), createElementBlock("div", _hoisted_66, [
          createBaseVNode("div", _hoisted_67, [
            createBaseVNode("div", _hoisted_68, [
              createBaseVNode("h3", _hoisted_69, toDisplayString(unref(t)("grammar.practice.questionManager.title")) + ": " + toDisplayString(unref(t)(`grammar.practice.exercises.${selectedExerciseTypeForQuestions.value}.title`)), 1),
              createBaseVNode("button", {
                onClick: closeQuestionManager,
                class: "p-2 rounded-lg text-gray-500 dark:text-gray-400 hover:text-gray-700 dark:hover:text-gray-200 hover:bg-gray-100 dark:hover:bg-gray-700 transition-colors"
              }, _cache[32] || (_cache[32] = [
                createBaseVNode("svg", {
                  class: "w-5 h-5",
                  fill: "none",
                  stroke: "currentColor",
                  viewBox: "0 0 24 24"
                }, [
                  createBaseVNode("path", {
                    "stroke-linecap": "round",
                    "stroke-linejoin": "round",
                    "stroke-width": "2",
                    d: "M6 18L18 6M6 6l12 12"
                  })
                ], -1)
              ]))
            ]),
            createBaseVNode("div", _hoisted_70, [
              createBaseVNode("div", _hoisted_71, [
                createBaseVNode("h4", _hoisted_72, toDisplayString(editingQuestionIndex.value >= 0 ? unref(t)("grammar.practice.questionManager.editQuestion") : unref(t)("grammar.practice.questionManager.addNew")), 1),
                selectedExerciseTypeForQuestions.value === "writing" ? (openBlock(), createElementBlock("div", _hoisted_73, [
                  createBaseVNode("div", _hoisted_74, [
                    createBaseVNode("div", null, [
                      createBaseVNode("label", _hoisted_75, toDisplayString(unref(t)("grammar.practice.questionManager.taskType")), 1),
                      withDirectives(createBaseVNode("select", {
                        "onUpdate:modelValue": _cache[9] || (_cache[9] = ($event) => newQuestion.value.taskType = $event),
                        class: "w-full px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-lg bg-white dark:bg-[#0a0a0a] text-gray-900 dark:text-white focus:ring-2 focus:ring-blue-500 focus:border-transparent"
                      }, [
                        createBaseVNode("option", _hoisted_76, toDisplayString(unref(t)("grammar.practice.exercises.writing.essay")), 1),
                        createBaseVNode("option", _hoisted_77, toDisplayString(unref(t)("grammar.practice.exercises.writing.email")), 1),
                        createBaseVNode("option", _hoisted_78, toDisplayString(unref(t)("grammar.practice.exercises.writing.letter")), 1),
                        createBaseVNode("option", _hoisted_79, toDisplayString(unref(t)("grammar.practice.exercises.writing.paragraph")), 1)
                      ], 512), [
                        [vModelSelect, newQuestion.value.taskType]
                      ])
                    ]),
                    createBaseVNode("div", _hoisted_80, [
                      createBaseVNode("div", null, [
                        createBaseVNode("label", _hoisted_81, toDisplayString(unref(t)("grammar.practice.questionManager.minWords")), 1),
                        withDirectives(createBaseVNode("input", {
                          "onUpdate:modelValue": _cache[10] || (_cache[10] = ($event) => newQuestion.value.minWords = $event),
                          type: "number",
                          min: "50",
                          class: "w-full px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-lg bg-white dark:bg-[#0a0a0a] text-gray-900 dark:text-white focus:ring-2 focus:ring-blue-500 focus:border-transparent"
                        }, null, 512), [
                          [
                            vModelText,
                            newQuestion.value.minWords,
                            void 0,
                            { number: true }
                          ]
                        ])
                      ]),
                      createBaseVNode("div", null, [
                        createBaseVNode("label", _hoisted_82, toDisplayString(unref(t)("grammar.practice.questionManager.timeLimit")), 1),
                        withDirectives(createBaseVNode("input", {
                          "onUpdate:modelValue": _cache[11] || (_cache[11] = ($event) => newQuestion.value.timeLimit = $event),
                          type: "number",
                          min: "5",
                          class: "w-full px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-lg bg-white dark:bg-[#0a0a0a] text-gray-900 dark:text-white focus:ring-2 focus:ring-blue-500 focus:border-transparent"
                        }, null, 512), [
                          [
                            vModelText,
                            newQuestion.value.timeLimit,
                            void 0,
                            { number: true }
                          ]
                        ])
                      ])
                    ])
                  ]),
                  createBaseVNode("div", null, [
                    createBaseVNode("label", _hoisted_83, toDisplayString(unref(t)("grammar.practice.questionManager.prompt")), 1),
                    withDirectives(createBaseVNode("textarea", {
                      "onUpdate:modelValue": _cache[12] || (_cache[12] = ($event) => newQuestion.value.prompt = $event),
                      rows: "3",
                      class: "w-full px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-lg bg-white dark:bg-[#0a0a0a] text-gray-900 dark:text-white focus:ring-2 focus:ring-blue-500 focus:border-transparent",
                      placeholder: unref(t)("grammar.practice.questionManager.promptPlaceholder")
                    }, null, 8, _hoisted_84), [
                      [vModelText, newQuestion.value.prompt]
                    ])
                  ]),
                  createBaseVNode("div", null, [
                    createBaseVNode("div", _hoisted_85, [
                      createBaseVNode("label", _hoisted_86, toDisplayString(unref(t)("grammar.practice.questionManager.requirements")), 1),
                      createBaseVNode("button", {
                        onClick: addRequirement,
                        class: "text-sm text-blue-600 dark:text-blue-400 hover:text-blue-800 dark:hover:text-blue-300"
                      }, " + " + toDisplayString(unref(t)("grammar.practice.questionManager.addRequirement")), 1)
                    ]),
                    createBaseVNode("div", _hoisted_87, [
                      (openBlock(true), createElementBlock(Fragment, null, renderList(newQuestion.value.requirements, (requirement, index) => {
                        return openBlock(), createElementBlock("div", {
                          key: index,
                          class: "flex items-center space-x-2"
                        }, [
                          withDirectives(createBaseVNode("input", {
                            "onUpdate:modelValue": ($event) => newQuestion.value.requirements[index] = $event,
                            type: "text",
                            class: "flex-1 px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-lg bg-white dark:bg-gray-700 text-gray-900 dark:text-white focus:ring-2 focus:ring-blue-500 focus:border-transparent",
                            placeholder: unref(t)("grammar.practice.questionManager.requirementPlaceholder")
                          }, null, 8, _hoisted_88), [
                            [vModelText, newQuestion.value.requirements[index]]
                          ]),
                          createBaseVNode("button", {
                            onClick: ($event) => removeRequirement(index),
                            class: "p-2 text-red-600 dark:text-red-400 hover:bg-red-100 dark:hover:bg-red-900/30 rounded",
                            disabled: newQuestion.value.requirements.length === 1
                          }, _cache[33] || (_cache[33] = [
                            createBaseVNode("svg", {
                              class: "w-4 h-4",
                              fill: "none",
                              stroke: "currentColor",
                              viewBox: "0 0 24 24"
                            }, [
                              createBaseVNode("path", {
                                "stroke-linecap": "round",
                                "stroke-linejoin": "round",
                                "stroke-width": "2",
                                d: "M19 7l-.867 12.142A2 2 0 0116.138 21H7.862a2 2 0 01-1.995-1.858L5 7m5 4v6m4-6v6m1-10V4a1 1 0 00-1-1h-4a1 1 0 00-1 1v3M4 7h16"
                              })
                            ], -1)
                          ]), 8, _hoisted_89)
                        ]);
                      }), 128))
                    ])
                  ])
                ])) : selectedExerciseTypeForQuestions.value === "multiple-choice" ? (openBlock(), createElementBlock("div", _hoisted_90, [
                  createBaseVNode("div", null, [
                    createBaseVNode("label", _hoisted_91, toDisplayString(unref(t)("grammar.practice.questionManager.question")), 1),
                    withDirectives(createBaseVNode("textarea", {
                      "onUpdate:modelValue": _cache[13] || (_cache[13] = ($event) => newQuestion.value.question = $event),
                      rows: "2",
                      class: "w-full px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-lg bg-white dark:bg-[#0a0a0a] text-gray-900 dark:text-white focus:ring-2 focus:ring-blue-500 focus:border-transparent",
                      placeholder: unref(t)("grammar.practice.questionManager.questionPlaceholder")
                    }, null, 8, _hoisted_92), [
                      [vModelText, newQuestion.value.question]
                    ])
                  ]),
                  createBaseVNode("div", null, [
                    createBaseVNode("label", _hoisted_93, toDisplayString(unref(t)("grammar.practice.questionManager.options")), 1),
                    createBaseVNode("div", _hoisted_94, [
                      (openBlock(true), createElementBlock(Fragment, null, renderList(newQuestion.value.options, (option, index) => {
                        return openBlock(), createElementBlock("div", {
                          key: index,
                          class: "flex items-center space-x-2"
                        }, [
                          createBaseVNode("span", _hoisted_95, toDisplayString(String.fromCharCode(65 + index)) + ".", 1),
                          withDirectives(createBaseVNode("input", {
                            "onUpdate:modelValue": ($event) => newQuestion.value.options[index] = $event,
                            type: "text",
                            class: "flex-1 px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-lg bg-white dark:bg-gray-700 text-gray-900 dark:text-white focus:ring-2 focus:ring-blue-500 focus:border-transparent",
                            placeholder: unref(t)("grammar.practice.questionManager.optionPlaceholder")
                          }, null, 8, _hoisted_96), [
                            [vModelText, newQuestion.value.options[index]]
                          ])
                        ]);
                      }), 128))
                    ])
                  ]),
                  createBaseVNode("div", null, [
                    createBaseVNode("label", _hoisted_97, toDisplayString(unref(t)("grammar.practice.questionManager.correctAnswer")), 1),
                    withDirectives(createBaseVNode("select", {
                      "onUpdate:modelValue": _cache[14] || (_cache[14] = ($event) => newQuestion.value.correctAnswer = $event),
                      class: "w-full px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-lg bg-white dark:bg-[#0a0a0a] text-gray-900 dark:text-white focus:ring-2 focus:ring-blue-500 focus:border-transparent"
                    }, [
                      (openBlock(true), createElementBlock(Fragment, null, renderList(newQuestion.value.options, (option, index) => {
                        return openBlock(), createElementBlock("option", {
                          key: index,
                          value: option
                        }, toDisplayString(String.fromCharCode(65 + index)) + ". " + toDisplayString(option), 9, _hoisted_98);
                      }), 128))
                    ], 512), [
                      [vModelSelect, newQuestion.value.correctAnswer]
                    ])
                  ]),
                  createBaseVNode("div", null, [
                    createBaseVNode("label", _hoisted_99, toDisplayString(unref(t)("grammar.practice.questionManager.explanation")), 1),
                    withDirectives(createBaseVNode("textarea", {
                      "onUpdate:modelValue": _cache[15] || (_cache[15] = ($event) => newQuestion.value.explanation = $event),
                      rows: "2",
                      class: "w-full px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-lg bg-white dark:bg-[#0a0a0a] text-gray-900 dark:text-white focus:ring-2 focus:ring-blue-500 focus:border-transparent",
                      placeholder: unref(t)("grammar.practice.questionManager.explanationPlaceholder")
                    }, null, 8, _hoisted_100), [
                      [vModelText, newQuestion.value.explanation]
                    ])
                  ])
                ])) : selectedExerciseTypeForQuestions.value === "listening" ? (openBlock(), createElementBlock("div", _hoisted_101, [
                  createBaseVNode("div", null, [
                    createBaseVNode("label", _hoisted_102, toDisplayString(unref(t)("grammar.practice.exercises.listening.audioUrl")), 1),
                    createBaseVNode("div", _hoisted_103, [
                      withDirectives(createBaseVNode("input", {
                        "onUpdate:modelValue": _cache[16] || (_cache[16] = ($event) => newQuestion.value.audioUrl = $event),
                        type: "text",
                        onInput: handleAudioUrlChange,
                        onPaste: handleUrlPaste,
                        class: "w-full px-3 py-2 pr-20 border border-gray-300 dark:border-gray-600 rounded-lg bg-white dark:bg-[#0a0a0a] text-gray-900 dark:text-white focus:ring-2 focus:ring-blue-500 focus:border-transparent",
                        placeholder: unref(t)("grammar.practice.exercises.listening.audioUrlPlaceholder")
                      }, null, 40, _hoisted_104), [
                        [vModelText, newQuestion.value.audioUrl]
                      ]),
                      newQuestion.value.audioUrl ? (openBlock(), createElementBlock("button", {
                        key: 0,
                        onClick: clearAudioUrl,
                        type: "button",
                        class: "absolute right-2 top-1/2 transform -translate-y-1/2 p-1 text-gray-400 hover:text-gray-600 dark:hover:text-gray-300 transition-colors"
                      }, _cache[34] || (_cache[34] = [
                        createBaseVNode("svg", {
                          class: "w-4 h-4",
                          fill: "none",
                          stroke: "currentColor",
                          viewBox: "0 0 24 24"
                        }, [
                          createBaseVNode("path", {
                            "stroke-linecap": "round",
                            "stroke-linejoin": "round",
                            "stroke-width": "2",
                            d: "M6 18L18 6M6 6l12 12"
                          })
                        ], -1)
                      ]))) : createCommentVNode("", true)
                    ]),
                    createBaseVNode("div", _hoisted_105, toDisplayString(unref(t)("grammar.practice.exercises.listening.audioUrlHint")), 1),
                    isYouTubeUrl(newQuestion.value.audioUrl) ? (openBlock(), createElementBlock("div", _hoisted_106, [
                      createBaseVNode("div", _hoisted_107, [
                        _cache[35] || (_cache[35] = createBaseVNode("svg", {
                          class: "w-4 h-4",
                          fill: "currentColor",
                          viewBox: "0 0 24 24"
                        }, [
                          createBaseVNode("path", { d: "M23.498 6.186a3.016 3.016 0 0 0-2.122-2.136C19.505 3.545 12 3.545 12 3.545s-7.505 0-9.377.505A3.017 3.017 0 0 0 .502 6.186C0 8.07 0 12 0 12s0 3.93.502 5.814a3.016 3.016 0 0 0 2.122 2.136c1.871.505 9.376.505 9.376.505s7.505 0 9.377-.505a3.015 3.015 0 0 0 2.122-2.136C24 15.93 24 12 24 12s0-3.93-.502-5.814zM9.545 15.568V8.432L15.818 12l-6.273 3.568z" })
                        ], -1)),
                        createBaseVNode("span", null, toDisplayString(unref(t)("grammar.practice.exercises.listening.youtubeDetected")), 1)
                      ]),
                      createBaseVNode("div", _hoisted_108, toDisplayString(unref(t)("grammar.practice.exercises.listening.youtubeNote")), 1)
                    ])) : createCommentVNode("", true)
                  ]),
                  createBaseVNode("div", _hoisted_109, [
                    createBaseVNode("div", null, [
                      createBaseVNode("label", _hoisted_110, toDisplayString(unref(t)("grammar.practice.exercises.listening.maxPlays")), 1),
                      withDirectives(createBaseVNode("input", {
                        "onUpdate:modelValue": _cache[17] || (_cache[17] = ($event) => newQuestion.value.maxPlays = $event),
                        type: "number",
                        min: "1",
                        max: "10",
                        class: "w-full px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-lg bg-white dark:bg-[#0a0a0a] text-gray-900 dark:text-white focus:ring-2 focus:ring-blue-500 focus:border-transparent"
                      }, null, 512), [
                        [
                          vModelText,
                          newQuestion.value.maxPlays,
                          void 0,
                          { number: true }
                        ]
                      ])
                    ]),
                    createBaseVNode("div", null, [
                      createBaseVNode("label", _hoisted_111, toDisplayString(unref(t)("grammar.practice.settings.difficulty")), 1),
                      withDirectives(createBaseVNode("select", {
                        "onUpdate:modelValue": _cache[18] || (_cache[18] = ($event) => newQuestion.value.difficulty = $event),
                        class: "w-full px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-lg bg-white dark:bg-[#0a0a0a] text-gray-900 dark:text-white focus:ring-2 focus:ring-blue-500 focus:border-transparent"
                      }, [
                        createBaseVNode("option", _hoisted_112, toDisplayString(unref(t)("grammar.practice.settings.levels.easy")), 1),
                        createBaseVNode("option", _hoisted_113, toDisplayString(unref(t)("grammar.practice.settings.levels.medium")), 1),
                        createBaseVNode("option", _hoisted_114, toDisplayString(unref(t)("grammar.practice.settings.levels.hard")), 1)
                      ], 512), [
                        [vModelSelect, newQuestion.value.difficulty]
                      ])
                    ]),
                    createBaseVNode("div", _hoisted_115, [
                      createBaseVNode("label", _hoisted_116, [
                        withDirectives(createBaseVNode("input", {
                          "onUpdate:modelValue": _cache[19] || (_cache[19] = ($event) => newQuestion.value.allowNotes = $event),
                          type: "checkbox",
                          class: "w-4 h-4 text-blue-600 border-gray-300 rounded focus:ring-blue-500"
                        }, null, 512), [
                          [vModelCheckbox, newQuestion.value.allowNotes]
                        ]),
                        createBaseVNode("span", _hoisted_117, toDisplayString(unref(t)("grammar.practice.exercises.listening.allowNotes")), 1)
                      ])
                    ])
                  ]),
                  createBaseVNode("div", null, [
                    createBaseVNode("label", _hoisted_118, toDisplayString(unref(t)("grammar.practice.exercises.listening.transcript")), 1),
                    withDirectives(createBaseVNode("textarea", {
                      "onUpdate:modelValue": _cache[20] || (_cache[20] = ($event) => newQuestion.value.transcript = $event),
                      rows: "3",
                      class: "w-full px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-lg bg-white dark:bg-[#0a0a0a] text-gray-900 dark:text-white focus:ring-2 focus:ring-blue-500 focus:border-transparent",
                      placeholder: unref(t)("grammar.practice.exercises.listening.transcriptPlaceholder")
                    }, null, 8, _hoisted_119), [
                      [vModelText, newQuestion.value.transcript]
                    ])
                  ]),
                  createBaseVNode("div", null, [
                    createBaseVNode("label", _hoisted_120, toDisplayString(unref(t)("grammar.practice.exercises.listening.questions")), 1),
                    createBaseVNode("div", _hoisted_121, [
                      (openBlock(true), createElementBlock(Fragment, null, renderList(newQuestion.value.questions, (question, qIndex) => {
                        return openBlock(), createElementBlock("div", {
                          key: qIndex,
                          class: "border border-gray-200 dark:border-gray-600 rounded-lg p-3"
                        }, [
                          createBaseVNode("div", _hoisted_122, [
                            createBaseVNode("span", _hoisted_123, toDisplayString(unref(t)("grammar.practice.exercises.listening.question")) + " " + toDisplayString(qIndex + 1), 1),
                            createBaseVNode("button", {
                              onClick: ($event) => removeListeningQuestion(qIndex),
                              class: "p-1 text-red-600 dark:text-red-400 hover:bg-red-100 dark:hover:bg-red-900/30 rounded",
                              disabled: newQuestion.value.questions.length === 1
                            }, _cache[36] || (_cache[36] = [
                              createBaseVNode("svg", {
                                class: "w-4 h-4",
                                fill: "none",
                                stroke: "currentColor",
                                viewBox: "0 0 24 24"
                              }, [
                                createBaseVNode("path", {
                                  "stroke-linecap": "round",
                                  "stroke-linejoin": "round",
                                  "stroke-width": "2",
                                  d: "M19 7l-.867 12.142A2 2 0 0116.138 21H7.862a2 2 0 01-1.995-1.858L5 7m5 4v6m4-6v6m1-10V4a1 1 0 00-1-1h-4a1 1 0 00-1 1v3M4 7h16"
                                })
                              ], -1)
                            ]), 8, _hoisted_124)
                          ]),
                          createBaseVNode("div", _hoisted_125, [
                            createBaseVNode("div", null, [
                              withDirectives(createBaseVNode("select", {
                                "onUpdate:modelValue": ($event) => question.type = $event,
                                class: "w-full px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-lg bg-white dark:bg-[#0a0a0a] text-gray-900 dark:text-white focus:ring-2 focus:ring-blue-500 focus:border-transparent text-sm"
                              }, [
                                createBaseVNode("option", _hoisted_127, toDisplayString(unref(t)("grammar.practice.exercises.listening.multipleChoice")), 1),
                                createBaseVNode("option", _hoisted_128, toDisplayString(unref(t)("grammar.practice.exercises.listening.fillBlank")), 1),
                                createBaseVNode("option", _hoisted_129, toDisplayString(unref(t)("grammar.practice.exercises.listening.ordering")), 1)
                              ], 8, _hoisted_126), [
                                [vModelSelect, question.type]
                              ])
                            ]),
                            createBaseVNode("div", null, [
                              withDirectives(createBaseVNode("textarea", {
                                "onUpdate:modelValue": ($event) => question.question = $event,
                                rows: "2",
                                class: "w-full px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-lg bg-white dark:bg-[#0a0a0a] text-gray-900 dark:text-white focus:ring-2 focus:ring-blue-500 focus:border-transparent text-sm",
                                placeholder: unref(t)("grammar.practice.questionManager.questionPlaceholder")
                              }, null, 8, _hoisted_130), [
                                [vModelText, question.question]
                              ])
                            ]),
                            question.type === "multiple-choice" ? (openBlock(), createElementBlock("div", _hoisted_131, [
                              (openBlock(true), createElementBlock(Fragment, null, renderList(question.options, (option, oIndex) => {
                                return openBlock(), createElementBlock("div", {
                                  key: oIndex,
                                  class: "flex items-center space-x-2"
                                }, [
                                  createBaseVNode("span", _hoisted_132, toDisplayString(String.fromCharCode(65 + oIndex)) + ".", 1),
                                  withDirectives(createBaseVNode("input", {
                                    "onUpdate:modelValue": ($event) => question.options[oIndex] = $event,
                                    type: "text",
                                    class: "flex-1 px-2 py-1 border border-gray-300 dark:border-gray-600 rounded bg-white dark:bg-[#0a0a0a] text-gray-900 dark:text-white focus:ring-1 focus:ring-blue-500 focus:border-transparent text-sm",
                                    placeholder: unref(t)("grammar.practice.questionManager.optionPlaceholder")
                                  }, null, 8, _hoisted_133), [
                                    [vModelText, question.options[oIndex]]
                                  ])
                                ]);
                              }), 128)),
                              createBaseVNode("div", null, [
                                withDirectives(createBaseVNode("select", {
                                  "onUpdate:modelValue": ($event) => question.correctAnswer = $event,
                                  class: "w-full px-2 py-1 border border-gray-300 dark:border-gray-600 rounded bg-white dark:bg-[#0a0a0a] text-gray-900 dark:text-white focus:ring-1 focus:ring-blue-500 focus:border-transparent text-sm"
                                }, [
                                  createBaseVNode("option", _hoisted_135, toDisplayString(unref(t)("grammar.practice.questionManager.selectCorrectAnswer")), 1),
                                  (openBlock(true), createElementBlock(Fragment, null, renderList(question.options, (option, oIndex) => {
                                    return openBlock(), createElementBlock("option", {
                                      key: oIndex,
                                      value: oIndex
                                    }, toDisplayString(String.fromCharCode(65 + oIndex)) + ". " + toDisplayString(option), 9, _hoisted_136);
                                  }), 128))
                                ], 8, _hoisted_134), [
                                  [vModelSelect, question.correctAnswer]
                                ])
                              ])
                            ])) : question.type === "fill-blank" ? (openBlock(), createElementBlock("div", _hoisted_137, [
                              withDirectives(createBaseVNode("input", {
                                "onUpdate:modelValue": ($event) => question.correctAnswer = $event,
                                type: "text",
                                class: "w-full px-2 py-1 border border-gray-300 dark:border-gray-600 rounded bg-white dark:bg-gray-700 text-gray-900 dark:text-white focus:ring-1 focus:ring-blue-500 focus:border-transparent text-sm",
                                placeholder: unref(t)("grammar.practice.exercises.listening.correctAnswerPlaceholder")
                              }, null, 8, _hoisted_138), [
                                [vModelText, question.correctAnswer]
                              ])
                            ])) : createCommentVNode("", true)
                          ])
                        ]);
                      }), 128)),
                      createBaseVNode("button", {
                        onClick: addListeningQuestion,
                        class: "w-full px-3 py-2 border-2 border-dashed border-gray-300 dark:border-gray-600 rounded-lg text-gray-500 dark:text-gray-400 hover:border-blue-400 hover:text-blue-500 transition-colors text-sm"
                      }, " + " + toDisplayString(unref(t)("grammar.practice.exercises.listening.addQuestion")), 1)
                    ])
                  ])
                ])) : (openBlock(), createElementBlock("div", _hoisted_139, [
                  createBaseVNode("div", null, [
                    createBaseVNode("label", _hoisted_140, toDisplayString(unref(t)("grammar.practice.questionManager.question")), 1),
                    withDirectives(createBaseVNode("textarea", {
                      "onUpdate:modelValue": _cache[21] || (_cache[21] = ($event) => newQuestion.value.question = $event),
                      rows: "3",
                      class: "w-full px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-lg bg-white dark:bg-[#0a0a0a] text-gray-900 dark:text-white focus:ring-2 focus:ring-blue-500 focus:border-transparent",
                      placeholder: unref(t)("grammar.practice.questionManager.questionPlaceholder")
                    }, null, 8, _hoisted_141), [
                      [vModelText, newQuestion.value.question]
                    ])
                  ]),
                  createBaseVNode("div", null, [
                    createBaseVNode("label", _hoisted_142, toDisplayString(unref(t)("grammar.practice.questionManager.explanation")), 1),
                    withDirectives(createBaseVNode("textarea", {
                      "onUpdate:modelValue": _cache[22] || (_cache[22] = ($event) => newQuestion.value.explanation = $event),
                      rows: "2",
                      class: "w-full px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-lg bg-white dark:bg-[#0a0a0a] text-gray-900 dark:text-white focus:ring-2 focus:ring-blue-500 focus:border-transparent",
                      placeholder: unref(t)("grammar.practice.questionManager.explanationPlaceholder")
                    }, null, 8, _hoisted_143), [
                      [vModelText, newQuestion.value.explanation]
                    ])
                  ])
                ])),
                createBaseVNode("div", _hoisted_144, [
                  createBaseVNode("button", {
                    onClick: addQuestion,
                    class: "px-4 py-2 text-sm font-medium text-white bg-blue-600 rounded-lg hover:bg-blue-700 transition-colors"
                  }, toDisplayString(editingQuestionIndex.value >= 0 ? unref(t)("common.update") : unref(t)("grammar.practice.questionManager.addQuestion")), 1)
                ])
              ]),
              exerciseQuestions.value[selectedExerciseTypeForQuestions.value]?.length > 0 ? (openBlock(), createElementBlock("div", _hoisted_145, [
                createBaseVNode("h4", _hoisted_146, toDisplayString(unref(t)("grammar.practice.questionManager.existingQuestions")) + " (" + toDisplayString(exerciseQuestions.value[selectedExerciseTypeForQuestions.value].length) + ") ", 1),
                createBaseVNode("div", _hoisted_147, [
                  (openBlock(true), createElementBlock(Fragment, null, renderList(exerciseQuestions.value[selectedExerciseTypeForQuestions.value], (question, index) => {
                    return openBlock(), createElementBlock("div", {
                      key: question.id,
                      class: "bg-white dark:bg-gray-800 border border-gray-200 dark:border-gray-700 rounded-lg p-4"
                    }, [
                      createBaseVNode("div", _hoisted_148, [
                        createBaseVNode("div", _hoisted_149, [
                          createBaseVNode("div", _hoisted_150, [
                            createBaseVNode("span", _hoisted_151, " #" + toDisplayString(index + 1), 1),
                            selectedExerciseTypeForQuestions.value === "writing" ? (openBlock(), createElementBlock("span", _hoisted_152, toDisplayString(unref(t)(`grammar.practice.exercises.writing.${question.taskType}`)), 1)) : createCommentVNode("", true)
                          ]),
                          createBaseVNode("div", _hoisted_153, [
                            createBaseVNode("strong", null, toDisplayString(selectedExerciseTypeForQuestions.value === "writing" ? unref(t)("grammar.practice.questionManager.prompt") : unref(t)("grammar.practice.questionManager.question")) + ":", 1),
                            createBaseVNode("p", _hoisted_154, toDisplayString(selectedExerciseTypeForQuestions.value === "writing" ? question.prompt : question.question), 1)
                          ]),
                          selectedExerciseTypeForQuestions.value === "writing" && question.requirements?.length > 0 ? (openBlock(), createElementBlock("div", _hoisted_155, [
                            createBaseVNode("strong", null, toDisplayString(unref(t)("grammar.practice.questionManager.requirements")) + ":", 1),
                            createBaseVNode("ul", _hoisted_156, [
                              (openBlock(true), createElementBlock(Fragment, null, renderList(question.requirements, (req) => {
                                return openBlock(), createElementBlock("li", { key: req }, toDisplayString(req), 1);
                              }), 128))
                            ])
                          ])) : createCommentVNode("", true),
                          selectedExerciseTypeForQuestions.value === "multiple-choice" && question.options ? (openBlock(), createElementBlock("div", _hoisted_157, [
                            createBaseVNode("strong", null, toDisplayString(unref(t)("grammar.practice.questionManager.correctAnswer")) + ":", 1),
                            createTextVNode(" " + toDisplayString(question.correctAnswer), 1)
                          ])) : createCommentVNode("", true)
                        ]),
                        createBaseVNode("div", _hoisted_158, [
                          createBaseVNode("button", {
                            onClick: ($event) => editQuestion(index),
                            class: "p-1 rounded text-blue-600 dark:text-blue-400 hover:bg-blue-100 dark:hover:bg-blue-900/30 transition-colors",
                            title: unref(t)("common.edit")
                          }, _cache[37] || (_cache[37] = [
                            createBaseVNode("svg", {
                              class: "w-4 h-4",
                              fill: "none",
                              stroke: "currentColor",
                              viewBox: "0 0 24 24"
                            }, [
                              createBaseVNode("path", {
                                "stroke-linecap": "round",
                                "stroke-linejoin": "round",
                                "stroke-width": "2",
                                d: "M11 5H6a2 2 0 00-2 2v11a2 2 0 002 2h11a2 2 0 002-2v-5m-1.414-9.414a2 2 0 112.828 2.828L11.828 15H9v-2.828l8.586-8.586z"
                              })
                            ], -1)
                          ]), 8, _hoisted_159),
                          createBaseVNode("button", {
                            onClick: ($event) => deleteQuestion(index),
                            class: "p-1 rounded text-red-600 dark:text-red-400 hover:bg-red-100 dark:hover:bg-red-900/30 transition-colors",
                            title: unref(t)("common.delete")
                          }, _cache[38] || (_cache[38] = [
                            createBaseVNode("svg", {
                              class: "w-4 h-4",
                              fill: "none",
                              stroke: "currentColor",
                              viewBox: "0 0 24 24"
                            }, [
                              createBaseVNode("path", {
                                "stroke-linecap": "round",
                                "stroke-linejoin": "round",
                                "stroke-width": "2",
                                d: "M19 7l-.867 12.142A2 2 0 0116.138 21H7.862a2 2 0 01-1.995-1.858L5 7m5 4v6m4-6v6m1-10V4a1 1 0 00-1-1h-4a1 1 0 00-1 1v3M4 7h16"
                              })
                            ], -1)
                          ]), 8, _hoisted_160)
                        ])
                      ])
                    ]);
                  }), 128))
                ])
              ])) : (openBlock(), createElementBlock("div", _hoisted_161, [
                createBaseVNode("div", _hoisted_162, [
                  _cache[39] || (_cache[39] = createBaseVNode("svg", {
                    class: "w-12 h-12 mx-auto mb-4",
                    fill: "none",
                    stroke: "currentColor",
                    viewBox: "0 0 24 24"
                  }, [
                    createBaseVNode("path", {
                      "stroke-linecap": "round",
                      "stroke-linejoin": "round",
                      "stroke-width": "2",
                      d: "M9 12h6m-6 4h6m2 5H7a2 2 0 01-2-2V5a2 2 0 012-2h5.586a1 1 0 01.707.293l5.414 5.414a1 1 0 01.293.707V19a2 2 0 01-2 2z"
                    })
                  ], -1)),
                  createBaseVNode("p", null, toDisplayString(unref(t)("grammar.practice.questionManager.noQuestions")), 1),
                  createBaseVNode("p", _hoisted_163, toDisplayString(unref(t)("grammar.practice.questionManager.addFirstQuestion")), 1)
                ])
              ]))
            ]),
            createBaseVNode("div", _hoisted_164, [
              createBaseVNode("button", {
                onClick: closeQuestionManager,
                class: "px-4 py-2 text-sm font-medium text-gray-700 dark:text-gray-300 bg-gray-100 dark:bg-[#0a0a0a] rounded-lg hover:bg-gray-200 dark:hover:bg-gray-600 transition-colors"
              }, toDisplayString(unref(t)("common.close")), 1)
            ])
          ])
        ])) : createCommentVNode("", true)
      ]);
    };
  }
});
export {
  _sfc_main as default
};
//# sourceMappingURL=GrammarPracticeView-CXslhokZ.js.map
